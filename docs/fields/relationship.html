<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Relationship - Relationship Field | Payload CMS Documentation</title><meta name="description" content="The Relationship field provides the ability to relate documents together. Learn how to use Relationship fields, see examples and options."/><meta property="og:title" content="Relationship - Relationship Field | Payload CMS Documentation"/><meta property="og:description" content="The Relationship field provides the ability to relate documents together. Learn how to use Relationship fields, see examples and options."/><meta name="next-head-count" content="6"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-8726031e66a50318.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/_tTBTu5tMI_qrBgEpmt0H/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/_tTBTu5tMI_qrBgEpmt0H/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">Relationship Field</h1><p class="text-xl text-gray-600 mb-8">The Relationship field provides the ability to relate documents together. Learn how to use Relationship fields, see examples and options.</p><div class="prose prose-lg max-w-none"><p>The Relationship Field is one of the most powerful fields Payload features. It provides the ability to easily relate documents together.</p>
<figure class="my-8"><picture><source srcSet="https://payloadcms.com/images/docs/fields/relationship-dark.png" media="(prefers-color-scheme: dark)"/><img src="https://payloadcms.com/images/docs/fields/relationship.png" alt="Shows a relationship field in the Payload Admin Panel" class="w-full rounded-lg shadow-lg"/></picture><figcaption class="mt-3 text-sm text-center text-gray-600 dark:text-gray-400">Admin Panel screenshot of a Relationship field</figcaption></figure>
<p>The Relationship field is used in a variety of ways, including:</p>
<ul>
<li>To add <code>Product</code> documents to an <code>Order</code> document</li>
<li>To allow for an <code>Order</code> to feature a <code>placedBy</code> relationship to either an <code>Organization</code> or <code>User</code> collection</li>
<li>To assign <code>Category</code> documents to <code>Post</code> documents</li>
</ul>
<p>To add a Relationship Field, set the <code>type</code> to <code>relationship</code> in your <a href="./overview">Field Config</a>:</p>
<pre><code class="language-ts">import type { Field } from &#x27;payload&#x27;

export const MyRelationshipField: Field = {
  // ...
  // highlight-start
  type: &#x27;relationship&#x27;,
  relationTo: &#x27;products&#x27;,
  // highlight-end
}
</code></pre>
<h2>Config Options</h2>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>name</code></strong> *</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">To be used as the property name when stored and retrieved from the database. <a href="/payload-just-docs/docs/fields/overview#field-names">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>relationTo</code></strong> *</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Provide one or many collection <code>slug</code>s to be able to assign relationships to.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>filterOptions</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A query to filter which options appear in the UI and validate against. <a href="#filtering-relationship-options">More</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>hasMany</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Boolean when, if set to <code>true</code>, allows this field to have many relations instead of only one.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>minRows</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A number for the fewest allowed items during validation when a value is present. Used with <code>hasMany</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>maxRows</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A number for the most allowed items during validation when a value is present. Used with <code>hasMany</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>maxDepth</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Sets a maximum population depth for this field, regardless of the remaining depth when this field is reached. <a href="/payload-just-docs/docs/queries/depth#max-depth">Max Depth</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>label</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Text used as a field label in the Admin Panel or an object with keys for each language.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>unique</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Enforce that each entry in the Collection has a unique value for this field.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>validate</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Provide a custom validation function that will be executed on both the Admin Panel and the backend. <a href="/payload-just-docs/docs/fields/overview#validation">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>index</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Build an <a href="/payload-just-docs/docs/database/overview">index</a> for this field to produce faster queries. Set this field to <code>true</code> if your users will perform queries on this field&#x27;s data often.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>saveToJWT</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">If this field is top-level and nested in a config supporting <a href="/payload-just-docs/docs/authentication/overview">Authentication</a>, include its data in the user JWT.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>hooks</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Provide Field Hooks to control logic for this field. <a href="../hooks/fields">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>access</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Provide Field Access Control to denote what users can see and do with this field&#x27;s data. <a href="../access-control/fields">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>hidden</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Restrict this field&#x27;s visibility from all APIs entirely. Will still be saved to the database, but will not appear in any API or the Admin Panel.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>defaultValue</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Provide data to be used for this field&#x27;s default value. <a href="/payload-just-docs/docs/fields/overview#default-values">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>localized</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Enable localization for this field. Requires <a href="/payload-just-docs/docs/configuration/localization">localization to be enabled</a> in the Base config.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>required</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Require this field to have a value.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>admin</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Admin-specific configuration. <a href="#admin-options">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>custom</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Extension point for adding custom data (e.g. for plugins)</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>typescriptSchema</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Override field type generation with providing a JSON schema</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>virtual</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Provide <code>true</code> to disable field in the database. See <a href="https://payloadcms.com/blog/learn-how-virtual-fields-can-help-solve-common-cms-challenges">Virtual Fields</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>graphQL</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Custom graphQL configuration for the field. <a href="/payload-just-docs/docs/graphql/overview#field-complexity">More details</a></td></tr></tbody></table></div>
<p><em>* An asterisk denotes that a property is required.</em></p>
<div class="p-4 my-4 rounded-lg border bg-green-50 border-green-200 text-green-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg><p><strong>Tip:</strong> The <a href="../queries/depth">Depth</a> parameter can be used to automatically
populate related documents that are returned by the API.</p></div>
<h2>Admin Options</h2>
<p>To the appearance and behavior of the Relationship Field in the <a href="../admin/overview">Admin Panel</a>, you can use the <code>admin</code> option:</p>
<pre><code class="language-ts">import type { Field } from &#x27;payload&#x27;

export const MyRelationshipField: Field = {
  // ...
  admin: {
    // highlight-line
    // ...
  },
}
</code></pre>
<p>The Relationship Field inherits all of the default options from the base <a href="./overview#admin-options">Field Admin Config</a>, plus the following additional options:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Property</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>isSortable</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> if you&#x27;d like this field to be sortable within the Admin UI using drag and drop (only works when <code>hasMany</code> is set to <code>true</code>).</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>allowCreate</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>false</code> if you&#x27;d like to disable the ability to create new documents from within the relationship field.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>allowEdit</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>false</code> if you&#x27;d like to disable the ability to edit documents from within the relationship field.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>sortOptions</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Define a default sorting order for the options within a Relationship field&#x27;s dropdown. <a href="#sort-options">More</a></td></tr></tbody></table></div>
<h3>Sort Options</h3>
<p>You can specify <code>sortOptions</code> in two ways:</p>
<p><strong>As a string:</strong></p>
<p>Provide a string to define a global default sort field for all relationship field dropdowns across different
collections. You can prefix the field name with a minus symbol (&quot;-&quot;) to sort in descending order.</p>
<p>Example:</p>
<pre><code class="language-ts">sortOptions: &#x27;fieldName&#x27;,
</code></pre>
<p>This configuration will sort all relationship field dropdowns by <code>&quot;fieldName&quot;</code> in ascending order.</p>
<p><strong>As an object :</strong></p>
<p>Specify an object where keys are collection slugs and values are strings representing the field names to sort by. This
allows for different sorting fields for each collection&#x27;s relationship dropdown.</p>
<p>Example:</p>
<pre><code class="language-ts">sortOptions: {
  &quot;pages&quot;: &quot;fieldName1&quot;,
  &quot;posts&quot;: &quot;-fieldName2&quot;,
  &quot;categories&quot;: &quot;fieldName3&quot;
}
</code></pre>
<p>In this configuration:</p>
<ul>
<li>Dropdowns related to <code>pages</code> will be sorted by <code>&quot;fieldName1&quot;</code> in ascending order.</li>
<li>Dropdowns for <code>posts</code> will use <code>&quot;fieldName2&quot;</code> for sorting in descending order (noted by the &quot;-&quot; prefix).</li>
<li>Dropdowns associated with <code>categories</code> will sort based on <code>&quot;fieldName3&quot;</code> in ascending order.</li>
</ul>
<p>Note: If <code>sortOptions</code> is not defined, the default sorting behavior of the Relationship field dropdown will be used.</p>
<h2>Filtering relationship options</h2>
<p>Options can be dynamically limited by supplying a <a href="/payload-just-docs/docs/queries/overview">query constraint</a>, which will be used both for validating input and filtering available relationships in the UI.</p>
<p>The <code>filterOptions</code> property can either be a <code>Where</code> query, or a function returning <code>true</code> to not filter, <code>false</code> to prevent all, or a <code>Where</code> query. When using a function, it will be called with an argument object with the following properties:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Property</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>blockData</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The data of the nearest parent block. Will be <code>undefined</code> if the field is not within a block or when called on a <code>Filter</code> component within the list view.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>data</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">An object containing the full collection or global document currently being edited. Will be an empty object when called on a <code>Filter</code> component within the list view.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>id</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <code>id</code> of the current document being edited. Will be <code>undefined</code> during the <code>create</code> operation or when called on a <code>Filter</code> component within the list view.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>relationTo</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The collection <code>slug</code> to filter against, limited to this field&#x27;s <code>relationTo</code> property.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>req</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The Payload Request, which contains references to <code>payload</code>, <code>user</code>, <code>locale</code>, and more.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>siblingData</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">An object containing document data that is scoped to only fields within the same parent of this field. Will be an emprt object when called on a <code>Filter</code> component within the list view.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>user</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">An object containing the currently authenticated user.</td></tr></tbody></table></div>
<h2>Example</h2>
<pre><code class="language-ts">import type { CollectionConfig } from &#x27;payload&#x27;

export const ExampleCollection: CollectionConfig = {
  slug: &#x27;example-collection&#x27;,
  fields: [
    {
      name: &#x27;purchase&#x27;,
      type: &#x27;relationship&#x27;,
      relationTo: [&#x27;products&#x27;, &#x27;services&#x27;],
      filterOptions: ({ relationTo, siblingData }) =&gt; {
        // returns a Where query dynamically by the type of relationship
        if (relationTo === &#x27;products&#x27;) {
          return {
            stock: { greater_than: siblingData.quantity },
          }
        }

        if (relationTo === &#x27;services&#x27;) {
          return {
            isAvailable: { equals: true },
          }
        }
      },
    },
  ],
}
</code></pre>
<p>You can learn more about writing queries <a href="/payload-just-docs/docs/queries/overview">here</a>.</p>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Note:</strong></p><p>When a relationship field has both <strong>filterOptions</strong> and a custom
<strong>validate</strong> function, the api will not validate <strong>filterOptions</strong>
unless you call the default relationship field validation function imported from
<strong>payload/shared</strong> in your validate function.</p></div>
<h2>Bi-directional relationships</h2>
<p>The <code>relationship</code> field on its own is used to define relationships for the document that contains the relationship field, and this can be considered as a &quot;one-way&quot; relationship. For example, if you have a Post that has a <code>category</code> relationship field on it, the related <code>category</code> itself will not surface any information about the posts that have the category set.</p>
<p>However, the <code>relationship</code> field can be used in conjunction with the <code>Join</code> field to produce powerful bi-directional relationship authoring capabilities. If you&#x27;re interested in bi-directional relationships, check out the <a href="./join">documentation for the Join field</a>.</p>
<h2>How the data is saved</h2>
<p>Given the variety of options possible within the <code>relationship</code> field type, the shape of the data needed for creating
and updating these fields can vary. The following sections will describe the variety of data shapes that can arise from
this field.</p>
<h3>Has One</h3>
<p>The most simple pattern of a relationship is to use <code>hasMany: false</code> with a <code>relationTo</code> that allows for only one type
of collection.</p>
<pre><code class="language-ts">{
  slug: &#x27;example-collection&#x27;,
  fields: [
    {
      name: &#x27;owner&#x27;, // required
      type: &#x27;relationship&#x27;, // required
      relationTo: &#x27;users&#x27;, // required
      hasMany: false,
    }
  ]
}
</code></pre>
<p>The shape of the data to save for a document with the field configured this way would be:</p>
<pre><code class="language-json">{
  // ObjectID of the related user
  &quot;owner&quot;: &quot;6031ac9e1289176380734024&quot;
}
</code></pre>
<p>When querying documents in this collection via REST API, you could query as follows:</p>
<p><code>?where[owner][equals]=6031ac9e1289176380734024</code>.</p>
<h3>Has One - Polymorphic</h3>
<p>Also known as <strong>dynamic references</strong>, in this configuration, the <code>relationTo</code> field is an array of Collection slugs that
tells Payload which Collections are valid to reference.</p>
<pre><code class="language-ts">{
  slug: &#x27;example-collection&#x27;,
  fields: [
    {
      name: &#x27;owner&#x27;, // required
      type: &#x27;relationship&#x27;, // required
      relationTo: [&#x27;users&#x27;, &#x27;organizations&#x27;], // required
      hasMany: false,
    }
  ]
}
</code></pre>
<p>The shape of the data to save for a document with more than one relationship type would be:</p>
<pre><code class="language-json">{
  &quot;owner&quot;: {
    &quot;relationTo&quot;: &quot;organizations&quot;,
    &quot;value&quot;: &quot;6031ac9e1289176380734024&quot;
  }
}
</code></pre>
<p>Here is an example for how to query documents by this data (note the difference in referencing the <code>owner.value</code>):</p>
<p><code>?where[owner.value][equals]=6031ac9e1289176380734024</code>.</p>
<p>You can also query for documents where a field has a relationship to a specific Collection:</p>
<p><code>?where[owners.relationTo][equals]=organizations</code>.</p>
<p>This query would return only documents that have an owner relationship to organizations.</p>
<h3>Has Many</h3>
<p>The <code>hasMany</code> tells Payload that there may be more than one collection saved to the field.</p>
<pre><code class="language-ts">{
  slug: &#x27;example-collection&#x27;,
  fields: [
    {
      name: &#x27;owners&#x27;, // required
      type: &#x27;relationship&#x27;, // required
      relationTo: &#x27;users&#x27;, // required
      hasMany: true,
    }
  ]
}
</code></pre>
<p>To save to the <code>hasMany</code> relationship field we need to send an array of IDs:</p>
<pre><code class="language-json">{
  &quot;owners&quot;: [&quot;6031ac9e1289176380734024&quot;, &quot;602c3c327b811235943ee12b&quot;]
}
</code></pre>
<p>When querying documents, the format does not change for arrays:</p>
<p><code>?where[owners][equals]=6031ac9e1289176380734024</code>.</p>
<h3>Has Many - Polymorphic</h3>
<pre><code class="language-ts">{
  slug: &#x27;example-collection&#x27;,
  fields: [
    {
      name: &#x27;owners&#x27;, // required
      type: &#x27;relationship&#x27;, // required
      relationTo: [&#x27;users&#x27;, &#x27;organizations&#x27;], // required
      hasMany: true,
      required: true,
    }
  ]
}
</code></pre>
<p>Relationship fields with <code>hasMany</code> set to more than one kind of collections save their data as an array of objectsâ€”each
containing the Collection <code>slug</code> as the <code>relationTo</code> value, and the related document <code>id</code> for the <code>value</code>:</p>
<pre><code class="language-json">{
  &quot;owners&quot;: [
    {
      &quot;relationTo&quot;: &quot;users&quot;,
      &quot;value&quot;: &quot;6031ac9e1289176380734024&quot;
    },
    {
      &quot;relationTo&quot;: &quot;organizations&quot;,
      &quot;value&quot;: &quot;602c3c327b811235943ee12b&quot;
    }
  ]
}
</code></pre>
<p>Querying is done in the same way as the earlier Polymorphic example:</p>
<p><code>?where[owners.value][equals]=6031ac9e1289176380734024</code>.</p>
<h3>Querying and Filtering Polymorphic Relationships</h3>
<p>Polymorphic and non-polymorphic relationships must be queried differently because of how the related data is stored and
may be inconsistent across different collections. Because of this, filtering polymorphic relationship fields from the
Collection List admin UI is limited to the <code>id</code> value.</p>
<p>For a polymorphic relationship, the response will always be an array of objects. Each object will contain
the <code>relationTo</code> and <code>value</code> properties.</p>
<p>The data can be queried by the related document ID:</p>
<p><code>?where[field.value][equals]=6031ac9e1289176380734024</code>.</p>
<p>Or by the related document Collection slug:</p>
<p><code>?where[field.relationTo][equals]=your-collection-slug</code>.</p>
<p>However, you <strong>cannot</strong> query on any field values within the related document.
Since we are referencing multiple collections, the field you are querying on may not exist and break the query.</p>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Note:</strong></p><p>You <strong>cannot</strong> query on a field within a polymorphic relationship as you would with a
non-polymorphic relationship.</p></div>
<h2>Custom Components</h2>
<h3>Field</h3>
<h4>Server Component</h4>
<pre><code class="language-tsx">import type React from &#x27;react&#x27;
import { RelationshipField } from &#x27;@payloadcms/ui&#x27;
import type { RelationshipFieldServerComponent } from &#x27;payload&#x27;

export const CustomRelationshipFieldServer: RelationshipFieldServerComponent =
  ({ clientField, path, schemaPath, permissions }) =&gt; {
    return (
      &lt;RelationshipField
        field={clientField}
        path={path}
        schemaPath={schemaPath}
        permissions={permissions}
      /&gt;
    )
  }
</code></pre>
<h4>Client Component</h4>
<pre><code class="language-tsx">&#x27;use client&#x27;
import React from &#x27;react&#x27;
import { RelationshipField } from &#x27;@payloadcms/ui&#x27;
import type { RelationshipFieldClientComponent } from &#x27;payload&#x27;

export const CustomRelationshipFieldClient: RelationshipFieldClientComponent = (
  props,
) =&gt; {
  return &lt;RelationshipField {...props} /&gt;
}
</code></pre>
<h3>Label</h3>
<h4>Server Component</h4>
<pre><code class="language-tsx">import React from &#x27;react&#x27;
import { FieldLabel } from &#x27;@payloadcms/ui&#x27;
import type { RelationshipFieldLabelServerComponent } from &#x27;payload&#x27;

export const CustomRelationshipFieldLabelServer: RelationshipFieldLabelServerComponent =
  (clientField, path) =&gt; {
    return (
      &lt;FieldLabel
        label={clientField?.label || clientField?.name}
        path={path}
        required={clientField?.required}
      /&gt;
    )
  }
</code></pre>
<h4>Client Component</h4>
<pre><code class="language-tsx">&#x27;use client&#x27;
import React from &#x27;react&#x27;
import { FieldLabel } from &#x27;@payloadcms/ui&#x27;
import type { RelationshipFieldLabelClientComponent } from &#x27;payload&#x27;

export const CustomRelationshipFieldLabelClient: RelationshipFieldLabelClientComponent =
  ({ field, path }) =&gt; {
    return (
      &lt;FieldLabel
        label={field?.label || field?.name}
        path={path}
        required={field?.required}
      /&gt;
    )
  }
</code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"Relationship Field","label":"Relationship","order":130,"desc":"The Relationship field provides the ability to relate documents together. Learn how to use Relationship fields, see examples and options.","keywords":"relationship, fields, config, configuration, documentation, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\",\n    code: \"code\",\n    a: \"a\",\n    pre: \"pre\",\n    h2: \"h2\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    strong: \"strong\",\n    em: \"em\",\n    h3: \"h3\",\n    h4: \"h4\"\n  }, _provideComponents(), props.components), {LightDarkImage, Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  if (!LightDarkImage) _missingMdxReference(\"LightDarkImage\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"The Relationship Field is one of the most powerful fields Payload features. It provides the ability to easily relate documents together.\"\n    }), \"\\n\", _jsx(LightDarkImage, {\n      srcLight: \"https://payloadcms.com/images/docs/fields/relationship.png\",\n      srcDark: \"https://payloadcms.com/images/docs/fields/relationship-dark.png\",\n      alt: \"Shows a relationship field in the Payload Admin Panel\",\n      caption: \"Admin Panel screenshot of a Relationship field\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The Relationship field is used in a variety of ways, including:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"To add \", _jsx(_components.code, {\n          children: \"Product\"\n        }), \" documents to an \", _jsx(_components.code, {\n          children: \"Order\"\n        }), \" document\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"To allow for an \", _jsx(_components.code, {\n          children: \"Order\"\n        }), \" to feature a \", _jsx(_components.code, {\n          children: \"placedBy\"\n        }), \" relationship to either an \", _jsx(_components.code, {\n          children: \"Organization\"\n        }), \" or \", _jsx(_components.code, {\n          children: \"User\"\n        }), \" collection\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"To assign \", _jsx(_components.code, {\n          children: \"Category\"\n        }), \" documents to \", _jsx(_components.code, {\n          children: \"Post\"\n        }), \" documents\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To add a Relationship Field, set the \", _jsx(_components.code, {\n        children: \"type\"\n      }), \" to \", _jsx(_components.code, {\n        children: \"relationship\"\n      }), \" in your \", _jsx(_components.a, {\n        href: \"./overview\",\n        children: \"Field Config\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { Field } from 'payload'\\n\\nexport const MyRelationshipField: Field = {\\n  // ...\\n  // highlight-start\\n  type: 'relationship',\\n  relationTo: 'products',\\n  // highlight-end\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Config Options\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsxs(_components.td, {\n            children: [_jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"name\"\n              })\n            }), \" *\"]\n          }), _jsxs(_components.td, {\n            children: [\"To be used as the property name when stored and retrieved from the database. \", _jsx(_components.a, {\n              href: \"/docs/fields/overview#field-names\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsxs(_components.td, {\n            children: [_jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"relationTo\"\n              })\n            }), \" *\"]\n          }), _jsxs(_components.td, {\n            children: [\"Provide one or many collection \", _jsx(_components.code, {\n              children: \"slug\"\n            }), \"s to be able to assign relationships to.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"filterOptions\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A query to filter which options appear in the UI and validate against. \", _jsx(_components.a, {\n              href: \"#filtering-relationship-options\",\n              children: \"More\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"hasMany\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Boolean when, if set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \", allows this field to have many relations instead of only one.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"minRows\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A number for the fewest allowed items during validation when a value is present. Used with \", _jsx(_components.code, {\n              children: \"hasMany\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"maxRows\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A number for the most allowed items during validation when a value is present. Used with \", _jsx(_components.code, {\n              children: \"hasMany\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"maxDepth\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Sets a maximum population depth for this field, regardless of the remaining depth when this field is reached. \", _jsx(_components.a, {\n              href: \"/docs/queries/depth#max-depth\",\n              children: \"Max Depth\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"label\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Text used as a field label in the Admin Panel or an object with keys for each language.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"unique\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Enforce that each entry in the Collection has a unique value for this field.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"validate\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Provide a custom validation function that will be executed on both the Admin Panel and the backend. \", _jsx(_components.a, {\n              href: \"/docs/fields/overview#validation\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"index\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Build an \", _jsx(_components.a, {\n              href: \"/docs/database/overview\",\n              children: \"index\"\n            }), \" for this field to produce faster queries. Set this field to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" if your users will perform queries on this field's data often.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"saveToJWT\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"If this field is top-level and nested in a config supporting \", _jsx(_components.a, {\n              href: \"/docs/authentication/overview\",\n              children: \"Authentication\"\n            }), \", include its data in the user JWT.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"hooks\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Provide Field Hooks to control logic for this field. \", _jsx(_components.a, {\n              href: \"../hooks/fields\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"access\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Provide Field Access Control to denote what users can see and do with this field's data. \", _jsx(_components.a, {\n              href: \"../access-control/fields\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"hidden\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Restrict this field's visibility from all APIs entirely. Will still be saved to the database, but will not appear in any API or the Admin Panel.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"defaultValue\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Provide data to be used for this field's default value. \", _jsx(_components.a, {\n              href: \"/docs/fields/overview#default-values\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"localized\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Enable localization for this field. Requires \", _jsx(_components.a, {\n              href: \"/docs/configuration/localization\",\n              children: \"localization to be enabled\"\n            }), \" in the Base config.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"required\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Require this field to have a value.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"admin\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Admin-specific configuration. \", _jsx(_components.a, {\n              href: \"#admin-options\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"custom\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Extension point for adding custom data (e.g. for plugins)\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"typescriptSchema\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Override field type generation with providing a JSON schema\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"virtual\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Provide \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to disable field in the database. See \", _jsx(_components.a, {\n              href: \"https://payloadcms.com/blog/learn-how-virtual-fields-can-help-solve-common-cms-challenges\",\n              children: \"Virtual Fields\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"graphQL\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Custom graphQL configuration for the field. \", _jsx(_components.a, {\n              href: \"/docs/graphql/overview#field-complexity\",\n              children: \"More details\"\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.em, {\n        children: \"* An asterisk denotes that a property is required.\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"success\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Tip:\"\n        }), \" The \", _jsx(_components.a, {\n          href: \"../queries/depth\",\n          children: \"Depth\"\n        }), \" parameter can be used to automatically\\npopulate related documents that are returned by the API.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Admin Options\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To the appearance and behavior of the Relationship Field in the \", _jsx(_components.a, {\n        href: \"../admin/overview\",\n        children: \"Admin Panel\"\n      }), \", you can use the \", _jsx(_components.code, {\n        children: \"admin\"\n      }), \" option:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { Field } from 'payload'\\n\\nexport const MyRelationshipField: Field = {\\n  // ...\\n  admin: {\\n    // highlight-line\\n    // ...\\n  },\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The Relationship Field inherits all of the default options from the base \", _jsx(_components.a, {\n        href: \"./overview#admin-options\",\n        children: \"Field Admin Config\"\n      }), \", plus the following additional options:\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Property\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"isSortable\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" if you'd like this field to be sortable within the Admin UI using drag and drop (only works when \", _jsx(_components.code, {\n              children: \"hasMany\"\n            }), \" is set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \").\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"allowCreate\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \" if you'd like to disable the ability to create new documents from within the relationship field.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"allowEdit\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \" if you'd like to disable the ability to edit documents from within the relationship field.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"sortOptions\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Define a default sorting order for the options within a Relationship field's dropdown. \", _jsx(_components.a, {\n              href: \"#sort-options\",\n              children: \"More\"\n            })]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Sort Options\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can specify \", _jsx(_components.code, {\n        children: \"sortOptions\"\n      }), \" in two ways:\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"As a string:\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Provide a string to define a global default sort field for all relationship field dropdowns across different\\ncollections. You can prefix the field name with a minus symbol (\\\"-\\\") to sort in descending order.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Example:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"sortOptions: 'fieldName',\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This configuration will sort all relationship field dropdowns by \", _jsx(_components.code, {\n        children: \"\\\"fieldName\\\"\"\n      }), \" in ascending order.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"As an object :\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Specify an object where keys are collection slugs and values are strings representing the field names to sort by. This\\nallows for different sorting fields for each collection's relationship dropdown.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Example:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"sortOptions: {\\n  \\\"pages\\\": \\\"fieldName1\\\",\\n  \\\"posts\\\": \\\"-fieldName2\\\",\\n  \\\"categories\\\": \\\"fieldName3\\\"\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In this configuration:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Dropdowns related to \", _jsx(_components.code, {\n          children: \"pages\"\n        }), \" will be sorted by \", _jsx(_components.code, {\n          children: \"\\\"fieldName1\\\"\"\n        }), \" in ascending order.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Dropdowns for \", _jsx(_components.code, {\n          children: \"posts\"\n        }), \" will use \", _jsx(_components.code, {\n          children: \"\\\"fieldName2\\\"\"\n        }), \" for sorting in descending order (noted by the \\\"-\\\" prefix).\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Dropdowns associated with \", _jsx(_components.code, {\n          children: \"categories\"\n        }), \" will sort based on \", _jsx(_components.code, {\n          children: \"\\\"fieldName3\\\"\"\n        }), \" in ascending order.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Note: If \", _jsx(_components.code, {\n        children: \"sortOptions\"\n      }), \" is not defined, the default sorting behavior of the Relationship field dropdown will be used.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Filtering relationship options\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Options can be dynamically limited by supplying a \", _jsx(_components.a, {\n        href: \"/docs/queries/overview\",\n        children: \"query constraint\"\n      }), \", which will be used both for validating input and filtering available relationships in the UI.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"filterOptions\"\n      }), \" property can either be a \", _jsx(_components.code, {\n        children: \"Where\"\n      }), \" query, or a function returning \", _jsx(_components.code, {\n        children: \"true\"\n      }), \" to not filter, \", _jsx(_components.code, {\n        children: \"false\"\n      }), \" to prevent all, or a \", _jsx(_components.code, {\n        children: \"Where\"\n      }), \" query. When using a function, it will be called with an argument object with the following properties:\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Property\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"blockData\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The data of the nearest parent block. Will be \", _jsx(_components.code, {\n              children: \"undefined\"\n            }), \" if the field is not within a block or when called on a \", _jsx(_components.code, {\n              children: \"Filter\"\n            }), \" component within the list view.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"data\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"An object containing the full collection or global document currently being edited. Will be an empty object when called on a \", _jsx(_components.code, {\n              children: \"Filter\"\n            }), \" component within the list view.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"id\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.code, {\n              children: \"id\"\n            }), \" of the current document being edited. Will be \", _jsx(_components.code, {\n              children: \"undefined\"\n            }), \" during the \", _jsx(_components.code, {\n              children: \"create\"\n            }), \" operation or when called on a \", _jsx(_components.code, {\n              children: \"Filter\"\n            }), \" component within the list view.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"relationTo\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The collection \", _jsx(_components.code, {\n              children: \"slug\"\n            }), \" to filter against, limited to this field's \", _jsx(_components.code, {\n              children: \"relationTo\"\n            }), \" property.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"req\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The Payload Request, which contains references to \", _jsx(_components.code, {\n              children: \"payload\"\n            }), \", \", _jsx(_components.code, {\n              children: \"user\"\n            }), \", \", _jsx(_components.code, {\n              children: \"locale\"\n            }), \", and more.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"siblingData\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"An object containing document data that is scoped to only fields within the same parent of this field. Will be an emprt object when called on a \", _jsx(_components.code, {\n              children: \"Filter\"\n            }), \" component within the list view.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"user\"\n            })\n          }), _jsx(_components.td, {\n            children: \"An object containing the currently authenticated user.\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Example\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const ExampleCollection: CollectionConfig = {\\n  slug: 'example-collection',\\n  fields: [\\n    {\\n      name: 'purchase',\\n      type: 'relationship',\\n      relationTo: ['products', 'services'],\\n      filterOptions: ({ relationTo, siblingData }) =\u003e {\\n        // returns a Where query dynamically by the type of relationship\\n        if (relationTo === 'products') {\\n          return {\\n            stock: { greater_than: siblingData.quantity },\\n          }\\n        }\\n\\n        if (relationTo === 'services') {\\n          return {\\n            isAvailable: { equals: true },\\n          }\\n        }\\n      },\\n    },\\n  ],\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can learn more about writing queries \", _jsx(_components.a, {\n        href: \"/docs/queries/overview\",\n        children: \"here\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"When a relationship field has both \", _jsx(_components.strong, {\n          children: \"filterOptions\"\n        }), \" and a custom\\n\", _jsx(_components.strong, {\n          children: \"validate\"\n        }), \" function, the api will not validate \", _jsx(_components.strong, {\n          children: \"filterOptions\"\n        }), \"\\nunless you call the default relationship field validation function imported from\\n\", _jsx(_components.strong, {\n          children: \"payload/shared\"\n        }), \" in your validate function.\"]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Bi-directional relationships\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"relationship\"\n      }), \" field on its own is used to define relationships for the document that contains the relationship field, and this can be considered as a \\\"one-way\\\" relationship. For example, if you have a Post that has a \", _jsx(_components.code, {\n        children: \"category\"\n      }), \" relationship field on it, the related \", _jsx(_components.code, {\n        children: \"category\"\n      }), \" itself will not surface any information about the posts that have the category set.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"However, the \", _jsx(_components.code, {\n        children: \"relationship\"\n      }), \" field can be used in conjunction with the \", _jsx(_components.code, {\n        children: \"Join\"\n      }), \" field to produce powerful bi-directional relationship authoring capabilities. If you're interested in bi-directional relationships, check out the \", _jsx(_components.a, {\n        href: \"./join\",\n        children: \"documentation for the Join field\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"How the data is saved\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Given the variety of options possible within the \", _jsx(_components.code, {\n        children: \"relationship\"\n      }), \" field type, the shape of the data needed for creating\\nand updating these fields can vary. The following sections will describe the variety of data shapes that can arise from\\nthis field.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Has One\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The most simple pattern of a relationship is to use \", _jsx(_components.code, {\n        children: \"hasMany: false\"\n      }), \" with a \", _jsx(_components.code, {\n        children: \"relationTo\"\n      }), \" that allows for only one type\\nof collection.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"{\\n  slug: 'example-collection',\\n  fields: [\\n    {\\n      name: 'owner', // required\\n      type: 'relationship', // required\\n      relationTo: 'users', // required\\n      hasMany: false,\\n    }\\n  ]\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The shape of the data to save for a document with the field configured this way would be:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  // ObjectID of the related user\\n  \\\"owner\\\": \\\"6031ac9e1289176380734024\\\"\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When querying documents in this collection via REST API, you could query as follows:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"?where[owner][equals]=6031ac9e1289176380734024\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Has One - Polymorphic\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Also known as \", _jsx(_components.strong, {\n        children: \"dynamic references\"\n      }), \", in this configuration, the \", _jsx(_components.code, {\n        children: \"relationTo\"\n      }), \" field is an array of Collection slugs that\\ntells Payload which Collections are valid to reference.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"{\\n  slug: 'example-collection',\\n  fields: [\\n    {\\n      name: 'owner', // required\\n      type: 'relationship', // required\\n      relationTo: ['users', 'organizations'], // required\\n      hasMany: false,\\n    }\\n  ]\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The shape of the data to save for a document with more than one relationship type would be:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  \\\"owner\\\": {\\n    \\\"relationTo\\\": \\\"organizations\\\",\\n    \\\"value\\\": \\\"6031ac9e1289176380734024\\\"\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Here is an example for how to query documents by this data (note the difference in referencing the \", _jsx(_components.code, {\n        children: \"owner.value\"\n      }), \"):\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"?where[owner.value][equals]=6031ac9e1289176380734024\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You can also query for documents where a field has a relationship to a specific Collection:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"?where[owners.relationTo][equals]=organizations\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This query would return only documents that have an owner relationship to organizations.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Has Many\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"hasMany\"\n      }), \" tells Payload that there may be more than one collection saved to the field.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"{\\n  slug: 'example-collection',\\n  fields: [\\n    {\\n      name: 'owners', // required\\n      type: 'relationship', // required\\n      relationTo: 'users', // required\\n      hasMany: true,\\n    }\\n  ]\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To save to the \", _jsx(_components.code, {\n        children: \"hasMany\"\n      }), \" relationship field we need to send an array of IDs:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  \\\"owners\\\": [\\\"6031ac9e1289176380734024\\\", \\\"602c3c327b811235943ee12b\\\"]\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When querying documents, the format does not change for arrays:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"?where[owners][equals]=6031ac9e1289176380734024\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Has Many - Polymorphic\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"{\\n  slug: 'example-collection',\\n  fields: [\\n    {\\n      name: 'owners', // required\\n      type: 'relationship', // required\\n      relationTo: ['users', 'organizations'], // required\\n      hasMany: true,\\n      required: true,\\n    }\\n  ]\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Relationship fields with \", _jsx(_components.code, {\n        children: \"hasMany\"\n      }), \" set to more than one kind of collections save their data as an array of objectsâ€”each\\ncontaining the Collection \", _jsx(_components.code, {\n        children: \"slug\"\n      }), \" as the \", _jsx(_components.code, {\n        children: \"relationTo\"\n      }), \" value, and the related document \", _jsx(_components.code, {\n        children: \"id\"\n      }), \" for the \", _jsx(_components.code, {\n        children: \"value\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  \\\"owners\\\": [\\n    {\\n      \\\"relationTo\\\": \\\"users\\\",\\n      \\\"value\\\": \\\"6031ac9e1289176380734024\\\"\\n    },\\n    {\\n      \\\"relationTo\\\": \\\"organizations\\\",\\n      \\\"value\\\": \\\"602c3c327b811235943ee12b\\\"\\n    }\\n  ]\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Querying is done in the same way as the earlier Polymorphic example:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"?where[owners.value][equals]=6031ac9e1289176380734024\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Querying and Filtering Polymorphic Relationships\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Polymorphic and non-polymorphic relationships must be queried differently because of how the related data is stored and\\nmay be inconsistent across different collections. Because of this, filtering polymorphic relationship fields from the\\nCollection List admin UI is limited to the \", _jsx(_components.code, {\n        children: \"id\"\n      }), \" value.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For a polymorphic relationship, the response will always be an array of objects. Each object will contain\\nthe \", _jsx(_components.code, {\n        children: \"relationTo\"\n      }), \" and \", _jsx(_components.code, {\n        children: \"value\"\n      }), \" properties.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The data can be queried by the related document ID:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"?where[field.value][equals]=6031ac9e1289176380734024\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Or by the related document Collection slug:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"?where[field.relationTo][equals]=your-collection-slug\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"However, you \", _jsx(_components.strong, {\n        children: \"cannot\"\n      }), \" query on any field values within the related document.\\nSince we are referencing multiple collections, the field you are querying on may not exist and break the query.\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"You \", _jsx(_components.strong, {\n          children: \"cannot\"\n        }), \" query on a field within a polymorphic relationship as you would with a\\nnon-polymorphic relationship.\"]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Custom Components\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Field\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Server Component\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-tsx\",\n        children: \"import type React from 'react'\\nimport { RelationshipField } from '@payloadcms/ui'\\nimport type { RelationshipFieldServerComponent } from 'payload'\\n\\nexport const CustomRelationshipFieldServer: RelationshipFieldServerComponent =\\n  ({ clientField, path, schemaPath, permissions }) =\u003e {\\n    return (\\n      \u003cRelationshipField\\n        field={clientField}\\n        path={path}\\n        schemaPath={schemaPath}\\n        permissions={permissions}\\n      /\u003e\\n    )\\n  }\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Client Component\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-tsx\",\n        children: \"'use client'\\nimport React from 'react'\\nimport { RelationshipField } from '@payloadcms/ui'\\nimport type { RelationshipFieldClientComponent } from 'payload'\\n\\nexport const CustomRelationshipFieldClient: RelationshipFieldClientComponent = (\\n  props,\\n) =\u003e {\\n  return \u003cRelationshipField {...props} /\u003e\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Label\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Server Component\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-tsx\",\n        children: \"import React from 'react'\\nimport { FieldLabel } from '@payloadcms/ui'\\nimport type { RelationshipFieldLabelServerComponent } from 'payload'\\n\\nexport const CustomRelationshipFieldLabelServer: RelationshipFieldLabelServerComponent =\\n  (clientField, path) =\u003e {\\n    return (\\n      \u003cFieldLabel\\n        label={clientField?.label || clientField?.name}\\n        path={path}\\n        required={clientField?.required}\\n      /\u003e\\n    )\\n  }\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Client Component\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-tsx\",\n        children: \"'use client'\\nimport React from 'react'\\nimport { FieldLabel } from '@payloadcms/ui'\\nimport type { RelationshipFieldLabelClientComponent } from 'payload'\\n\\nexport const CustomRelationshipFieldLabelClient: RelationshipFieldLabelClientComponent =\\n  ({ field, path }) =\u003e {\\n    return (\\n      \u003cFieldLabel\\n        label={field?.label || field?.name}\\n        path={path}\\n        required={field?.required}\\n      /\u003e\\n    )\\n  }\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["fields","relationship"]},"buildId":"_tTBTu5tMI_qrBgEpmt0H","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>