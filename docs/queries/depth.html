<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-fd8027ecb5121007.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-04104d75f6814829.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/docs/%5B...slug%5D-e023289636109d90.js" defer="" crossorigin=""></script><script src="/_next/static/rEpVRygLyV6yJ0i_Ohw0C/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/rEpVRygLyV6yJ0i_Ohw0C/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">Depth</h1><p class="text-xl text-gray-600 mb-8">Payload depth determines how many levels down related documents should be automatically populated when retrieved.</p><div class="prose prose-lg max-w-none"><p>Documents in Payload can have relationships to other Documents. This is true for both <a href="../configuration/collections">Collections</a> as well as <a href="../configuration/globals">Globals</a>. When you query a Document, you can specify the depth at which to populate any of its related Documents either as full objects, or only their IDs.</p>
<p>Depth will optimize the performance of your application by limiting the amount of processing made in the database and significantly reducing the amount of data returned. Since Documents can be infinitely nested or recursively related, it&#x27;s important to be able to control how deep your API populates.</p>
<p>For example, when you specify a <code>depth</code> of <code>0</code>, the API response might look like this:</p>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;5ae8f9bde69e394e717c8832&quot;,
  &quot;title&quot;: &quot;This is a great post&quot;,
  &quot;author&quot;: &quot;5f7dd05cd50d4005f8bcab17&quot;
}
</code></pre>
<p>But with a <code>depth</code> of <code>1</code>, the response might look like this:</p>
<pre><code class="language-json">{
  &quot;id&quot;: &quot;5ae8f9bde69e394e717c8832&quot;,
  &quot;title&quot;: &quot;This is a great post&quot;,
  &quot;author&quot;: {
    &quot;id&quot;: &quot;5f7dd05cd50d4005f8bcab17&quot;,
    &quot;name&quot;: &quot;John Doe&quot;
  }
}
</code></pre>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Important:</strong> Depth has no effect in the <a href="../graphql/overview">GraphQL API</a>,
because there, depth is based on the shape of your queries.</p></div>
<h2>Local API</h2>
<p>To specify depth in the <a href="../local-api/overview">Local API</a>, you can use the <code>depth</code> option in your query:</p>
<pre><code class="language-ts">import type { Payload } from &#x27;payload&#x27;

const getPosts = async (payload: Payload) =&gt; {
  const posts = await payload.find({
    collection: &#x27;posts&#x27;,
    depth: 2, // highlight-line
  })

  return posts
}
</code></pre>
<div class="p-4 my-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p><strong>Reminder:</strong> This is the same for <a href="../configuration/globals">Globals</a> using
the <code>findGlobal</code> operation.</p></div>
<h2>REST API</h2>
<p>To specify depth in the <a href="../rest-api/overview">REST API</a>, you can use the <code>depth</code> parameter in your query:</p>
<pre><code class="language-ts">fetch(&#x27;https://localhost:3000/api/posts?depth=2&#x27;) // highlight-line
  .then((res) =&gt; res.json())
  .then((data) =&gt; console.log(data))
</code></pre>
<div class="p-4 my-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p><strong>Reminder:</strong> This is the same for <a href="../configuration/globals">Globals</a> using
the <code>/api/globals</code> endpoint.</p></div>
<h2>Max Depth</h2>
<p>Fields like the <a href="../fields/relationship">Relationship Field</a> or the <a href="../fields/upload">Upload Field</a> can also set a maximum depth. If exceeded, this will limit the population depth regardless of what the depth might be on the request.</p>
<p>To set a max depth for a field, use the <code>maxDepth</code> property in your field configuration:</p>
<pre><code class="language-js">{
  slug: &#x27;posts&#x27;,
  fields: [
    {
      name: &#x27;author&#x27;,
      type: &#x27;relationship&#x27;,
      relationTo: &#x27;users&#x27;,
      maxDepth: 2, // highlight-line
    }
  ]
}
</code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"Depth","label":"Depth","order":30,"desc":"Payload depth determines how many levels down related documents should be automatically populated when retrieved.","keywords":"query, documents, pagination, documentation, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    code: \"code\",\n    pre: \"pre\",\n    strong: \"strong\",\n    h2: \"h2\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Documents in Payload can have relationships to other Documents. This is true for both \", _jsx(_components.a, {\n        href: \"../configuration/collections\",\n        children: \"Collections\"\n      }), \" as well as \", _jsx(_components.a, {\n        href: \"../configuration/globals\",\n        children: \"Globals\"\n      }), \". When you query a Document, you can specify the depth at which to populate any of its related Documents either as full objects, or only their IDs.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Depth will optimize the performance of your application by limiting the amount of processing made in the database and significantly reducing the amount of data returned. Since Documents can be infinitely nested or recursively related, it's important to be able to control how deep your API populates.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For example, when you specify a \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" of \", _jsx(_components.code, {\n        children: \"0\"\n      }), \", the API response might look like this:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  \\\"id\\\": \\\"5ae8f9bde69e394e717c8832\\\",\\n  \\\"title\\\": \\\"This is a great post\\\",\\n  \\\"author\\\": \\\"5f7dd05cd50d4005f8bcab17\\\"\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"But with a \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" of \", _jsx(_components.code, {\n        children: \"1\"\n      }), \", the response might look like this:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  \\\"id\\\": \\\"5ae8f9bde69e394e717c8832\\\",\\n  \\\"title\\\": \\\"This is a great post\\\",\\n  \\\"author\\\": {\\n    \\\"id\\\": \\\"5f7dd05cd50d4005f8bcab17\\\",\\n    \\\"name\\\": \\\"John Doe\\\"\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"warning\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Important:\"\n        }), \" Depth has no effect in the \", _jsx(_components.a, {\n          href: \"../graphql/overview\",\n          children: \"GraphQL API\"\n        }), \",\\nbecause there, depth is based on the shape of your queries.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Local API\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To specify depth in the \", _jsx(_components.a, {\n        href: \"../local-api/overview\",\n        children: \"Local API\"\n      }), \", you can use the \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" option in your query:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { Payload } from 'payload'\\n\\nconst getPosts = async (payload: Payload) =\u003e {\\n  const posts = await payload.find({\\n    collection: 'posts',\\n    depth: 2, // highlight-line\\n  })\\n\\n  return posts\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Reminder:\"\n        }), \" This is the same for \", _jsx(_components.a, {\n          href: \"../configuration/globals\",\n          children: \"Globals\"\n        }), \" using\\nthe \", _jsx(_components.code, {\n          children: \"findGlobal\"\n        }), \" operation.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"REST API\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To specify depth in the \", _jsx(_components.a, {\n        href: \"../rest-api/overview\",\n        children: \"REST API\"\n      }), \", you can use the \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" parameter in your query:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"fetch('https://localhost:3000/api/posts?depth=2') // highlight-line\\n  .then((res) =\u003e res.json())\\n  .then((data) =\u003e console.log(data))\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Reminder:\"\n        }), \" This is the same for \", _jsx(_components.a, {\n          href: \"../configuration/globals\",\n          children: \"Globals\"\n        }), \" using\\nthe \", _jsx(_components.code, {\n          children: \"/api/globals\"\n        }), \" endpoint.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Max Depth\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Fields like the \", _jsx(_components.a, {\n        href: \"../fields/relationship\",\n        children: \"Relationship Field\"\n      }), \" or the \", _jsx(_components.a, {\n        href: \"../fields/upload\",\n        children: \"Upload Field\"\n      }), \" can also set a maximum depth. If exceeded, this will limit the population depth regardless of what the depth might be on the request.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To set a max depth for a field, use the \", _jsx(_components.code, {\n        children: \"maxDepth\"\n      }), \" property in your field configuration:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"{\\n  slug: 'posts',\\n  fields: [\\n    {\\n      name: 'author',\\n      type: 'relationship',\\n      relationTo: 'users',\\n      maxDepth: 2, // highlight-line\\n    }\\n  ]\\n}\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["queries","depth"]},"buildId":"rEpVRygLyV6yJ0i_Ohw0C","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>