<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-e023289636109d90.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">Environment Variables</h1><p class="text-xl text-gray-600 mb-8">Learn how to use Environment Variables in your Payload project</p><div class="prose prose-lg max-w-none"><p>Environment Variables are a way to store sensitive information that your application needs to function. This could be anything from API keys to <a href="../database/overview">Database</a> credentials. Payload allows you to easily use Environment Variables within your config and throughout your application.</p>
<h2>Next.js Applications</h2>
<p>If you are using Next.js, no additional setup is required other than creating your <code>.env</code> file.</p>
<p>To use Environment Variables, add a <code>.env</code> file to the root of your project:</p>
<pre><code class="language-plaintext">project-name/
├─ .env
├─ package.json
├─ payload.config.ts
</code></pre>
<p>Here is an example of what an <code>.env</code> file might look like:</p>
<pre><code class="language-plaintext">SERVER_URL=localhost:3000
DATABASE_URI=mongodb://localhost:27017/my-database
</code></pre>
<p>To use Environment Variables in your Payload Config, you can access them directly from <code>process.env</code>:</p>
<pre><code class="language-ts">import { buildConfig } from &#x27;payload&#x27;

export default buildConfig({
  serverURL: process.env.SERVER_URL, // highlight-line
  // ...
})
</code></pre>
<h2>Client-side Environments</h2>
<p>For security and safety reasons, the <a href="../admin/overview">Admin Panel</a> does <strong>not</strong> include Environment Variables in its <em>client-side</em> bundle by default. But, Next.js provides a mechanism to expose Environment Variables to the client-side bundle when needed.</p>
<p>If you are building a <a href="../custom-components/overview">Custom Component</a> and need to access Environment Variables from the client-side, you can do so by prefixing them with <code>NEXT_PUBLIC_</code>.</p>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Important:</strong> Be careful about what variables you provide to your client-side
code. Analyze every single one to make sure that you&#x27;re not accidentally
leaking sensitive information. Only ever include keys that are safe for the
public to read in plain text.</p></div>
<p>For example, if you&#x27;ve got the following Environment Variable:</p>
<pre><code class="language-bash">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_XXXXXXXXXXXXXXXXXX
</code></pre>
<p>This key will automatically be made available to the client-side Payload bundle and can be referenced in your Custom Component as follows:</p>
<pre><code class="language-tsx">&#x27;use client&#x27;
import React from &#x27;react&#x27;

const stripeKey = process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY // highlight-line

const MyClientComponent = () =&gt; {
  // do something with the key

  return &lt;div&gt;My Client Component&lt;/div&gt;
}
</code></pre>
<p>For more information, check out the <a href="https://nextjs.org/docs/app/building-your-application/configuring/environment-variables">Next.js Documentation</a>.</p>
<h2>Outside of Next.js</h2>
<p>If you are using Payload outside of Next.js, we suggest using the <a href="https://www.npmjs.com/package/dotenv"><code>dotenv</code></a> package to handle Environment Variables from <code>.env</code> files. This will automatically load your Environment Variables into <code>process.env</code>.</p>
<p>To do this, import the package as high up in your application as possible:</p>
<pre><code class="language-ts">import dotenv from &#x27;dotenv&#x27;
dotenv.config() // highlight-line

import { buildConfig } from &#x27;payload&#x27;

export default buildConfig({
  serverURL: process.env.SERVER_URL,
  // ...
})
</code></pre>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Tip:</strong> Be sure that <code>dotenv</code> can find your <code>.env</code> file. By default, it will
look for a file named <code>.env</code> in the root of your project. If you need to
specify a different file, pass the path into the config options.</p></div></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"Environment Variables","label":"Environment Variables","order":100,"desc":"Learn how to use Environment Variables in your Payload project"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    h2: \"h2\",\n    code: \"code\",\n    pre: \"pre\",\n    strong: \"strong\",\n    em: \"em\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Environment Variables are a way to store sensitive information that your application needs to function. This could be anything from API keys to \", _jsx(_components.a, {\n        href: \"../database/overview\",\n        children: \"Database\"\n      }), \" credentials. Payload allows you to easily use Environment Variables within your config and throughout your application.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Next.js Applications\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you are using Next.js, no additional setup is required other than creating your \", _jsx(_components.code, {\n        children: \".env\"\n      }), \" file.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To use Environment Variables, add a \", _jsx(_components.code, {\n        children: \".env\"\n      }), \" file to the root of your project:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-plaintext\",\n        children: \"project-name/\\n├─ .env\\n├─ package.json\\n├─ payload.config.ts\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Here is an example of what an \", _jsx(_components.code, {\n        children: \".env\"\n      }), \" file might look like:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-plaintext\",\n        children: \"SERVER_URL=localhost:3000\\nDATABASE_URI=mongodb://localhost:27017/my-database\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To use Environment Variables in your Payload Config, you can access them directly from \", _jsx(_components.code, {\n        children: \"process.env\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from 'payload'\\n\\nexport default buildConfig({\\n  serverURL: process.env.SERVER_URL, // highlight-line\\n  // ...\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Client-side Environments\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For security and safety reasons, the \", _jsx(_components.a, {\n        href: \"../admin/overview\",\n        children: \"Admin Panel\"\n      }), \" does \", _jsx(_components.strong, {\n        children: \"not\"\n      }), \" include Environment Variables in its \", _jsx(_components.em, {\n        children: \"client-side\"\n      }), \" bundle by default. But, Next.js provides a mechanism to expose Environment Variables to the client-side bundle when needed.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you are building a \", _jsx(_components.a, {\n        href: \"../custom-components/overview\",\n        children: \"Custom Component\"\n      }), \" and need to access Environment Variables from the client-side, you can do so by prefixing them with \", _jsx(_components.code, {\n        children: \"NEXT_PUBLIC_\"\n      }), \".\"]\n    }), \"\\n\", _jsx(Banner, {\n      type: \"warning\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Important:\"\n        }), \" Be careful about what variables you provide to your client-side\\ncode. Analyze every single one to make sure that you're not accidentally\\nleaking sensitive information. Only ever include keys that are safe for the\\npublic to read in plain text.\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"For example, if you've got the following Environment Variable:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_XXXXXXXXXXXXXXXXXX\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This key will automatically be made available to the client-side Payload bundle and can be referenced in your Custom Component as follows:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-tsx\",\n        children: \"'use client'\\nimport React from 'react'\\n\\nconst stripeKey = process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY // highlight-line\\n\\nconst MyClientComponent = () =\u003e {\\n  // do something with the key\\n\\n  return \u003cdiv\u003eMy Client Component\u003c/div\u003e\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For more information, check out the \", _jsx(_components.a, {\n        href: \"https://nextjs.org/docs/app/building-your-application/configuring/environment-variables\",\n        children: \"Next.js Documentation\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Outside of Next.js\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you are using Payload outside of Next.js, we suggest using the \", _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/dotenv\",\n        children: _jsx(_components.code, {\n          children: \"dotenv\"\n        })\n      }), \" package to handle Environment Variables from \", _jsx(_components.code, {\n        children: \".env\"\n      }), \" files. This will automatically load your Environment Variables into \", _jsx(_components.code, {\n        children: \"process.env\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To do this, import the package as high up in your application as possible:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import dotenv from 'dotenv'\\ndotenv.config() // highlight-line\\n\\nimport { buildConfig } from 'payload'\\n\\nexport default buildConfig({\\n  serverURL: process.env.SERVER_URL,\\n  // ...\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"warning\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Tip:\"\n        }), \" Be sure that \", _jsx(_components.code, {\n          children: \"dotenv\"\n        }), \" can find your \", _jsx(_components.code, {\n          children: \".env\"\n        }), \" file. By default, it will\\nlook for a file named \", _jsx(_components.code, {\n          children: \".env\"\n        }), \" in the root of your project. If you need to\\nspecify a different file, pass the path into the config options.\"]\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["configuration","environment-vars"]},"buildId":"pbayt_BRhSN28J-gcoKlf","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>