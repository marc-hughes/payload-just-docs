<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-e023289636109d90.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">JWT Strategy</h1><p class="text-xl text-gray-600 mb-8">Enable JSON Web Token based authentication to interface with Payload.</p><div class="prose prose-lg max-w-none"><p>Payload offers the ability to <a href="./overview">Authenticate</a> via JSON Web Tokens (JWT). These can be read from the responses of <code>login</code>, <code>logout</code>, <code>refresh</code>, and <code>me</code> auth operations.</p>
<div class="p-4 my-4 rounded-lg border bg-green-50 border-green-200 text-green-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg><p><strong>Tip:</strong> You can access the logged-in user from within <a href="../access-control/overview">Access
Control</a> and <a href="../hooks/overview">Hooks</a> through
the <code>req.user</code> argument. <a href="./token-data">More details</a>.</p></div>
<h3>Identifying Users Via The Authorization Header</h3>
<p>In addition to authenticating via an HTTP-only cookie, you can also identify users via the <code>Authorization</code> header on an HTTP request.</p>
<p>Example:</p>
<pre><code class="language-ts">const user = await fetch(&#x27;http://localhost:3000/api/users/login&#x27;, {
  method: &#x27;POST&#x27;,
  body: JSON.stringify({
    email: &#x27;dev@payloadcms.com&#x27;,
    password: &#x27;password&#x27;,
  }),
}).then((req) =&gt; await req.json())

const request = await fetch(&#x27;http://localhost:3000&#x27;, {
  headers: {
    Authorization: `JWT ${user.token}`,
  },
})
</code></pre>
<h3>Omitting The Token</h3>
<p>In some cases you may want to prevent the token from being returned from the auth operations. You can do that by setting <code>removeTokenFromResponse</code> to <code>true</code> like so:</p>
<pre><code class="language-ts">import type { CollectionConfig } from &#x27;payload&#x27;

export const UsersWithoutJWTs: CollectionConfig = {
  slug: &#x27;users-without-jwts&#x27;,
  auth: {
    removeTokenFromResponse: true, // highlight-line
  },
}
</code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"JWT Strategy","label":"JWT Strategy","order":40,"desc":"Enable JSON Web Token based authentication to interface with Payload.","keywords":"authentication, config, configuration, documentation, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    code: \"code\",\n    strong: \"strong\",\n    h3: \"h3\",\n    pre: \"pre\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Payload offers the ability to \", _jsx(_components.a, {\n        href: \"./overview\",\n        children: \"Authenticate\"\n      }), \" via JSON Web Tokens (JWT). These can be read from the responses of \", _jsx(_components.code, {\n        children: \"login\"\n      }), \", \", _jsx(_components.code, {\n        children: \"logout\"\n      }), \", \", _jsx(_components.code, {\n        children: \"refresh\"\n      }), \", and \", _jsx(_components.code, {\n        children: \"me\"\n      }), \" auth operations.\"]\n    }), \"\\n\", _jsx(Banner, {\n      type: \"success\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Tip:\"\n        }), \" You can access the logged-in user from within \", _jsx(_components.a, {\n          href: \"../access-control/overview\",\n          children: \"Access\\nControl\"\n        }), \" and \", _jsx(_components.a, {\n          href: \"../hooks/overview\",\n          children: \"Hooks\"\n        }), \" through\\nthe \", _jsx(_components.code, {\n          children: \"req.user\"\n        }), \" argument. \", _jsx(_components.a, {\n          href: \"./token-data\",\n          children: \"More details\"\n        }), \".\"]\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Identifying Users Via The Authorization Header\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In addition to authenticating via an HTTP-only cookie, you can also identify users via the \", _jsx(_components.code, {\n        children: \"Authorization\"\n      }), \" header on an HTTP request.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Example:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"const user = await fetch('http://localhost:3000/api/users/login', {\\n  method: 'POST',\\n  body: JSON.stringify({\\n    email: 'dev@payloadcms.com',\\n    password: 'password',\\n  }),\\n}).then((req) =\u003e await req.json())\\n\\nconst request = await fetch('http://localhost:3000', {\\n  headers: {\\n    Authorization: `JWT ${user.token}`,\\n  },\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Omitting The Token\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In some cases you may want to prevent the token from being returned from the auth operations. You can do that by setting \", _jsx(_components.code, {\n        children: \"removeTokenFromResponse\"\n      }), \" to \", _jsx(_components.code, {\n        children: \"true\"\n      }), \" like so:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const UsersWithoutJWTs: CollectionConfig = {\\n  slug: 'users-without-jwts',\\n  auth: {\\n    removeTokenFromResponse: true, // highlight-line\\n  },\\n}\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["authentication","jwt"]},"buildId":"pbayt_BRhSN28J-gcoKlf","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>