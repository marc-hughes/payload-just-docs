<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-e023289636109d90.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">Uploads</h1><p class="text-xl text-gray-600 mb-8">Payload supports uploads, storage and management of files directly on your server, combined with powerful file access control.</p><div class="prose prose-lg max-w-none"><div class="p-4 my-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p>Payload provides everything you need to enable file upload, storage, and
management directly on your server—including extremely powerful file <a href="#access-control">access
control</a>.</p></div>
<figure class="my-8"><picture><source srcSet="https://payloadcms.com/images/docs/upload-admin.jpg" media="(prefers-color-scheme: dark)"/><img src="https://payloadcms.com/images/docs/upload-admin.jpg" alt="Shows an Upload enabled collection in the Payload Admin Panel" class="w-full rounded-lg shadow-lg"/></picture><figcaption class="mt-3 text-sm text-center text-gray-600 dark:text-gray-400">Admin Panel screenshot depicting a Media Collection with Upload enabled</figcaption></figure>
<p><strong>Here are some common use cases of Uploads:</strong></p>
<ul>
<li>Creating a &quot;Media Library&quot; that contains images for use throughout your site or app</li>
<li>Building a Gated Content library where users need to sign up to gain access to downloadable assets like ebook PDFs, whitepapers, etc.</li>
<li>Storing publicly available, downloadable assets like software, ZIP files, MP4s, etc.</li>
</ul>
<p><strong>By simply enabling Upload functionality on a Collection, Payload will automatically transform your Collection into a robust file management / storage solution. The following modifications will be made:</strong></p>
<ol>
<li><code>filename</code>, <code>mimeType</code>, and <code>filesize</code> fields will be automatically added to your Collection. Optionally, if you pass <code>imageSizes</code> to your Collection&#x27;s Upload config, a <a href="#image-sizes"><code>sizes</code></a> array will also be added containing auto-resized image sizes and filenames.</li>
<li>The Admin Panel will modify its built-in <code>List</code> component to show a thumbnail for each upload within the List View</li>
<li>The Admin Panel will modify its <code>Edit</code> view(s) to add a new set of corresponding Upload UI which will allow for file upload</li>
<li>The <code>create</code>, <code>update</code>, and <code>delete</code> Collection operations will be modified to support file upload, re-upload, and deletion</li>
</ol>
<h2>Enabling Uploads</h2>
<p>Every Payload Collection can opt-in to supporting Uploads by specifying the <code>upload</code> property on the Collection&#x27;s config to either <code>true</code> or to an object containing <code>upload</code> options.</p>
<div class="p-4 my-4 rounded-lg border bg-green-50 border-green-200 text-green-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg><p><strong>Tip:</strong></p><p>A common pattern is to create a <strong>&quot;media&quot;</strong> collection and enable <strong>upload</strong> on that collection.</p></div>
<pre><code class="language-ts">import type { CollectionConfig } from &#x27;payload&#x27;

export const Media: CollectionConfig = {
  slug: &#x27;media&#x27;,
  upload: {
    staticDir: &#x27;media&#x27;,
    imageSizes: [
      {
        name: &#x27;thumbnail&#x27;,
        width: 400,
        height: 300,
        position: &#x27;centre&#x27;,
      },
      {
        name: &#x27;card&#x27;,
        width: 768,
        height: 1024,
        position: &#x27;centre&#x27;,
      },
      {
        name: &#x27;tablet&#x27;,
        width: 1024,
        // By specifying `undefined` or leaving a height undefined,
        // the image will be sized to a certain width,
        // but it will retain its original aspect ratio
        // and calculate a height automatically.
        height: undefined,
        position: &#x27;centre&#x27;,
      },
    ],
    adminThumbnail: &#x27;thumbnail&#x27;,
    mimeTypes: [&#x27;image/*&#x27;],
  },
  fields: [
    {
      name: &#x27;alt&#x27;,
      type: &#x27;text&#x27;,
    },
  ],
}
</code></pre>
<h3>Collection Upload Options</h3>
<p><em>An asterisk denotes that an option is required.</em></p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>adminThumbnail</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set the way that the <a href="../admin/overview">Admin Panel</a> will display thumbnails for this Collection. <a href="#admin-thumbnails">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>bulkUpload</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Allow users to upload in bulk from the list view, default is true</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>cacheTags</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>false</code> to disable the cache tag set in the UI for the admin thumbnail component. Useful for when CDNs don&#x27;t allow certain cache queries.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>crop</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>false</code> to disable the cropping tool in the <a href="../admin/overview">Admin Panel</a>. Crop is enabled by default. <a href="#crop-and-focal-point-selector">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>disableLocalStorage</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Completely disable uploading files to disk locally. <a href="#disabling-local-upload-storage">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>displayPreview</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Enable displaying preview of the uploaded file in Upload fields related to this Collection. Can be locally overridden by <code>displayPreview</code> option in Upload field. <a href="/docs/fields/upload#config-options">More</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>externalFileHeaderFilter</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Accepts existing headers and returns the headers after filtering or modifying.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>filesRequiredOnCreate</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Mandate file data on creation, default is true.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>filenameCompoundIndex</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Field slugs to use for a compound index instead of the default filename index.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>focalPoint</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>false</code> to disable the focal point selection tool in the <a href="../admin/overview">Admin Panel</a>. The focal point selector is only available when <code>imageSizes</code> or <code>resizeOptions</code> are defined. <a href="#crop-and-focal-point-selector">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>formatOptions</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">An object with <code>format</code> and <code>options</code> that are used with the Sharp image library to format the upload file. <a href="https://sharp.pixelplumbing.com/api-output#toformat">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>handlers</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Array of Request handlers to execute when fetching a file, if a handler returns a Response it will be sent to the client. Otherwise Payload will retrieve and send back the file.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>imageSizes</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">If specified, image uploads will be automatically resized in accordance to these image sizes. <a href="#image-sizes">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>mimeTypes</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Restrict mimeTypes in the file picker. Array of valid mimetypes or mimetype wildcards <a href="#mimetypes">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>pasteURL</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Controls whether files can be uploaded from remote URLs by pasting them into the Upload field. <strong>Enabled by default.</strong> Accepts <code>false</code> to disable or an object with an <code>allowList</code> of valid remote URLs. <a href="#uploading-files-from-remote-urls">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>resizeOptions</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">An object passed to the the Sharp image library to resize the uploaded file. <a href="https://sharp.pixelplumbing.com/api-resize">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>staticDir</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The folder directory to use to store media in. Can be either an absolute path or relative to the directory that contains your config. Defaults to your collection slug</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>trimOptions</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">An object passed to the the Sharp image library to trim the uploaded file. <a href="https://sharp.pixelplumbing.com/api-resize#trim">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>withMetadata</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">If specified, appends metadata to the output image file. Accepts a boolean or a function that receives <code>metadata</code> and <code>req</code>, returning a boolean.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>hideFileInputOnCreate</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to prevent the admin UI from showing file inputs during document creation, useful for programmatic file generation.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>hideRemoveFile</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to prevent the admin UI having a way to remove an existing file while editing.</td></tr></tbody></table></div>
<h3>Payload-wide Upload Options</h3>
<p>Upload options are specifiable on a Collection by Collection basis, you can also control app wide options by passing your base Payload Config an <code>upload</code> property containing an object supportive of all <code>Busboy</code> configuration options.</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>abortOnLimit</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A boolean that, if <code>true</code>, returns HTTP 413 if a file exceeds the file size limit. If <code>false</code>, the file is truncated. Defaults to <code>false</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>createParentPath</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to automatically create a directory path when moving files from a temporary directory or buffer. Defaults to <code>false</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>debug</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A boolean that turns upload process logging on if <code>true</code>, or off if <code>false</code>. Useful for troubleshooting. Defaults to <code>false</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>limitHandler</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A function which is invoked if the file is greater than configured limits.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>parseNested</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to turn <code>req.body</code> and <code>req.files</code> into nested structures. By default <code>req.body</code> and <code>req.files</code> are flat objects. Defaults to <code>false</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>preserveExtension</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Preserves file extensions with the <code>safeFileNames</code> option. Limits file names to 3 characters if <code>true</code> or a custom length if a <code>number</code>, trimming from the start of the extension.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>responseOnLimit</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A <code>string</code> that is sent in the Response to a client if the file size limit is exceeded when used with <code>abortOnLimit</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>safeFileNames</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to strip non-alphanumeric characters except dashes and underscores. Can also be set to a regex to determine what to strip. Defaults to <code>false</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>tempFileDir</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A <code>string</code> path to store temporary files used when the <code>useTempFiles</code> option is set to <code>true</code>. Defaults to <code>&#x27;./tmp&#x27;</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>uploadTimeout</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A <code>number</code> that defines how long to wait for data before aborting, specified in milliseconds. Set to <code>0</code> to disable timeout checks. Defaults to <code>60000</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>uriDecodeFileNames</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to apply uri decoding to file names. Defaults to <code>false</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>useTempFiles</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to store files to a temporary directory instead of in RAM, reducing memory usage for large files or many files.</td></tr></tbody></table></div>
<p><a href="https://github.com/mscdex/busboy#api">Click here</a> for more documentation about what you can control with <code>Busboy</code>.</p>
<p>A common example of what you might want to customize within Payload-wide Upload options would be to increase the allowed <code>fileSize</code> of uploads sent to Payload:</p>
<pre><code class="language-ts">import { buildConfig } from &#x27;payload&#x27;

export default buildConfig({
  collections: [
    {
      slug: &#x27;media&#x27;,
      fields: [
        {
          name: &#x27;alt&#x27;,
          type: &#x27;text&#x27;,
        },
      ],
      upload: true,
    },
  ],
  upload: {
    limits: {
      fileSize: 5000000, // 5MB, written in bytes
    },
  },
})
</code></pre>
<h3>Custom filename via hooks</h3>
<p>You can customize the filename before it&#x27;s uploaded to the server by using a <code>beforeOperation</code> hook.</p>
<pre><code class="language-ts">beforeOperation: [
  ({ req, operation }) =&gt; {
    if ((operation === &#x27;create&#x27; || operation === &#x27;update&#x27;) &amp;&amp; req.file) {
      req.file.name = &#x27;test.jpg&#x27;
    }
  },
],
</code></pre>
<p>The <code>req.file</code> object will have additional information about the file, such as mimeType and extension, and you also have full access to the file data itself.
The filename from here will also be threaded to image sizes if they&#x27;re enabled.</p>
<h2>Image Sizes</h2>
<p>If you specify an array of <code>imageSizes</code> to your <code>upload</code> config, Payload will automatically crop and resize your uploads to fit each of the sizes specified by your config.</p>
<p>The <a href="../admin/overview">Admin Panel</a> will also automatically display all available files, including width, height, and file size, for each of your uploaded files.</p>
<p>Behind the scenes, Payload relies on <a href="https://sharp.pixelplumbing.com/api-resize#resize"><code>sharp</code></a> to perform its image resizing. You can specify additional options for <code>sharp</code> to use while resizing your images.</p>
<p>Note that for image resizing to work, <code>sharp</code> must be specified in your <a href="../configuration/overview">Payload Config</a>. This is configured by default if you created your Payload project with <code>create-payload-app</code>. See <code>sharp</code> in <a href="../configuration/overview#config-options">Config Options</a>.</p>
<h4>Accessing the resized images in hooks</h4>
<p>All auto-resized images are exposed to be re-used in hooks and similar via an object that is bound to <code>req.payloadUploadSizes</code>.</p>
<p>The object will have keys for each size generated, and each key will be set equal to a buffer containing the file data.</p>
<h4>Handling Image Enlargement</h4>
<p>When an uploaded image is smaller than the defined image size, we have 3 options:</p>
<p><code>withoutEnlargement: undefined | false | true</code></p>
<ol>
<li><code>undefined</code> [default]: uploading images with smaller width AND height than the image size will return null</li>
<li><code>false</code>: always enlarge images to the image size</li>
<li><code>true</code>: if the image is smaller than the image size, return the original image</li>
</ol>
<div class="p-4 my-4 rounded-lg border bg-red-50 border-red-200 text-red-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg><p><strong>Note:</strong></p><p>By default, the image size will return NULL when the uploaded image is smaller than the defined
image size. Use the <code>withoutEnlargement</code> prop to change this.</p></div>
<h4>Custom file name per size</h4>
<p>Each image size supports a <code>generateImageName</code> function that can be used to generate a custom file name for the resized image.
This function receives the original file name, the resize name, the extension, height and width as arguments.</p>
<pre><code class="language-ts">{
  name: &#x27;thumbnail&#x27;,
  width: 400,
  height: 300,
  generateImageName: ({ height, sizeName, extension, width }) =&gt; {
    return `custom-${sizeName}-${height}-${width}.${extension}`
  },
}
</code></pre>
<h2>Crop and Focal Point Selector</h2>
<p>This feature is only available for image file types.</p>
<p>Setting <code>crop: false</code> and <code>focalPoint: false</code> in your Upload config will be disable the respective selector in the <a href="../admin/overview">Admin Panel</a>.</p>
<p>Image cropping occurs before any resizing, the resized images will therefore be generated from the cropped image (<strong>not</strong> the original image).</p>
<p>If no resizing options are specified (<code>imageSizes</code> or <code>resizeOptions</code>), the focal point selector will not be displayed.</p>
<h2>Disabling Local Upload Storage</h2>
<p>If you are using a plugin to send your files off to a third-party file storage host or CDN, like Amazon S3 or similar, you may not want to store your files locally at all. You can prevent Payload from writing files to disk by specifying <code>disableLocalStorage: true</code> on your collection&#x27;s upload config.</p>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Note:</strong></p><p>This is a fairly advanced feature. If you do disable local file storage, by default, your admin
panel&#x27;s thumbnails will be broken as you will not have stored a file. It will be totally up to you
to use either a plugin or your own hooks to store your files in a permanent manner, as well as
provide your own admin thumbnail using <strong>upload.adminThumbnail</strong>.</p></div>
<h2>Admin Thumbnails</h2>
<p>You can specify how Payload retrieves admin thumbnails for your upload-enabled Collections with one of the following:</p>
<ol>
<li><code>adminThumbnail</code> as a <strong>string</strong>, equal to one of your provided image size names.</li>
</ol>
<pre><code class="language-ts">import type { CollectionConfig } from &#x27;payload&#x27;

export const Media: CollectionConfig = {
  slug: &#x27;media&#x27;,
  upload: {
    // highlight-start
    adminThumbnail: &#x27;small&#x27;,
    // highlight-end
    imageSizes: [
      {
        name: &#x27;small&#x27;,
        fit: &#x27;cover&#x27;,
        height: 300,
        width: 900,
      },
      {
        name: &#x27;large&#x27;,
        fit: &#x27;cover&#x27;,
        height: 600,
        width: 1800,
      },
    ],
  },
}
</code></pre>
<ol start="2">
<li><code>adminThumbnail</code> as a <strong>function</strong> that takes the document&#x27;s data and sends back a full URL to load the thumbnail.</li>
</ol>
<pre><code class="language-ts">import type { CollectionConfig } from &#x27;payload&#x27;

export const Media: CollectionConfig = {
  slug: &#x27;media&#x27;,
  upload: {
    // highlight-start
    adminThumbnail: ({ doc }) =&gt;
      `https://google.com/custom-path-to-file/${doc.filename}`,
    // highlight-end
  },
}
</code></pre>
<h2>MimeTypes</h2>
<p>Specifying the <code>mimeTypes</code> property can restrict what files are allowed from the user&#x27;s file picker. This accepts an array of strings, which can be any valid mimetype or mimetype wildcards</p>
<p>Some example values are: <code>image/*</code>, <code>audio/*</code>, <code>video/*</code>, <code>image/png</code>, <code>application/pdf</code></p>
<p><strong>Example mimeTypes usage:</strong></p>
<pre><code class="language-ts">import type { CollectionConfig } from &#x27;payload&#x27;

export const Media: CollectionConfig = {
  slug: &#x27;media&#x27;,
  upload: {
    mimeTypes: [&#x27;image/*&#x27;, &#x27;application/pdf&#x27;], // highlight-line
  },
}
</code></pre>
<h2>Uploading Files</h2>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Important:</strong></p><p>Uploading files is currently only possible through the REST and Local APIs due to how GraphQL
works. It&#x27;s difficult and fairly nonsensical to support uploading files through GraphQL.</p></div>
<p>To upload a file, use your collection&#x27;s <a href="/docs/rest-api/overview#collections"><code>create</code></a> endpoint. Send it all the data that your Collection requires, as well as a <code>file</code> key containing the file that you&#x27;d like to upload.</p>
<p>Send your request as a <code>multipart/form-data</code> request, using <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData"><code>FormData</code></a> if possible.</p>
<div class="p-4 my-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p><strong>Note:</strong> To include any additional fields (like <code>title</code>, <code>alt</code>, etc.), append
a <code>_payload</code> field containing a JSON-stringified object of the required
values. These values must match the schema of your upload-enabled collection.</p></div>
<pre><code class="language-ts">const fileInput = document.querySelector(&#x27;#your-file-input&#x27;)
const formData = new FormData()

formData.append(&#x27;file&#x27;, fileInput.files[0])

// Replace with the fields defined in your upload-enabled collection.
// The example below includes an optional field like &#x27;title&#x27;.
formData.append(
  &#x27;_payload&#x27;,
  JSON.stringify({
    title: &#x27;Example Title&#x27;,
    description: &#x27;An optional description for the file&#x27;,
  }),
)

fetch(&#x27;api/:upload-slug&#x27;, {
  method: &#x27;POST&#x27;,
  body: formData,
  /**
   * Do not manually add the Content-Type Header
   * the browser will handle this.
   *
   * headers: {
   *  &#x27;Content-Type&#x27;: &#x27;multipart/form-data&#x27;
   * }
   */
})
</code></pre>
<h2>Uploading Files stored locally</h2>
<p>If you want to upload a file stored on your machine directly using the <code>payload.create</code> method, for example, during a seed script,
you can use the <code>filePath</code> property to specify the local path of the file.</p>
<pre><code class="language-ts">const localFilePath = path.resolve(__dirname, filename)

await payload.create({
  collection: &#x27;media&#x27;,
  data: {
    alt,
  },
  filePath: localFilePath,
})
</code></pre>
<p>The <code>data</code> property should still include all the required fields of your <code>media</code> collection.</p>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p><strong>Important:</strong></p><p>Remember that all custom hooks attached to the <code>media</code> collection will still trigger.
Ensure that files match the specified mimeTypes or sizes defined in the collection&#x27;s <code>formatOptions</code> or custom <code>hooks</code>.</p></div>
<h2>Uploading Files from Remote URLs</h2>
<p>The <code>pasteURL</code> option allows users to fetch files from remote URLs by pasting them into an Upload field. This option is <strong>enabled by default</strong> and can be configured to either <strong>allow unrestricted client-side fetching</strong> or <strong>restrict server-side fetching</strong> to specific trusted domains.</p>
<p>By default, Payload uses <strong>client-side fetching</strong>, where the browser downloads the file directly from the provided URL. However, <strong>client-side fetching will fail if the URL’s server has CORS restrictions</strong>, making it suitable only for internal URLs or public URLs without CORS blocks.</p>
<p>To fetch files from <strong>restricted URLs</strong> that would otherwise be blocked by CORS, use <strong>server-side fetching</strong> by configuring the <code>pasteURL</code> option with an <code>allowList</code> of trusted domains. This method ensures that Payload downloads the file on the server and streams it to the browser. However, for security reasons, only URLs that match the specified <code>allowList</code> will be allowed.</p>
<h4>Configuration Example</h4>
<p>Here’s how to configure the pasteURL option to control remote URL fetching:</p>
<pre><code>import type { CollectionConfig } from &#x27;payload&#x27;

export const Media: CollectionConfig = {
  slug: &#x27;media&#x27;,
  upload: {
    pasteURL: {
      allowList: [
        {
          hostname: &#x27;payloadcms.com&#x27;, // required
          pathname: &#x27;&#x27;,
          port: &#x27;&#x27;,
          protocol: &#x27;https&#x27;,
          search: &#x27;&#x27;
        },
        {
          hostname: &#x27;example.com&#x27;,
          pathname: &#x27;/images/*&#x27;,
        },
      ],
    },
  },
}
</code></pre>
<h5>Accepted Values for <code>pasteURL</code></h5>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>undefined</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Default behavior. Enables client-side fetching for internal or public URLs.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>false</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Disables the ability to paste URLs into Upload fields.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>allowList</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Enables server-side fetching for specific trusted URLs. Requires an array of objects defining trusted domains. See the table below for details on <code>AllowItem</code>.</td></tr></tbody></table></div>
<h5><code>AllowItem</code> Properties</h5>
<p><em>An asterisk denotes that an option is required.</em></p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Example</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>hostname</code></strong> *</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The hostname of the allowed URL. This is required to ensure the URL is coming from a trusted source.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>example.com</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>pathname</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The path portion of the URL. Supports wildcards to match multiple paths.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>/images/*</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>port</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The port number of the URL. If not specified, the default port for the protocol will be used.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>3000</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>protocol</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The protocol to match. Must be either <code>http</code> or <code>https</code>. Defaults to <code>https</code>.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>https</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>search</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The query string of the URL. If specified, the URL must match this exact query string.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>?version=1</code></td></tr></tbody></table></div>
<h2>Access Control</h2>
<p>All files that are uploaded to each Collection automatically support the <code>read</code> <a href="/docs/access-control/overview">Access Control</a> function from the Collection itself. You can use this to control who should be allowed to see your uploads, and who should not.</p></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"Uploads","label":"Overview","order":10,"desc":"Payload supports uploads, storage and management of files directly on your server, combined with powerful file access control.","keywords":"uploads, images, media, overview, documentation, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\",\n    ol: \"ol\",\n    code: \"code\",\n    h2: \"h2\",\n    pre: \"pre\",\n    h3: \"h3\",\n    em: \"em\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    h4: \"h4\",\n    h5: \"h5\"\n  }, _provideComponents(), props.components), {Banner, LightDarkImage} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  if (!LightDarkImage) _missingMdxReference(\"LightDarkImage\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(Banner, {\n      children: _jsxs(_components.p, {\n        children: [\"Payload provides everything you need to enable file upload, storage, and\\nmanagement directly on your server—including extremely powerful file \", _jsx(_components.a, {\n          href: \"#access-control\",\n          children: \"access\\ncontrol\"\n        }), \".\"]\n      })\n    }), \"\\n\", _jsx(LightDarkImage, {\n      srcLight: \"https://payloadcms.com/images/docs/upload-admin.jpg\",\n      srcDark: \"https://payloadcms.com/images/docs/upload-admin.jpg\",\n      alt: \"Shows an Upload enabled collection in the Payload Admin Panel\",\n      caption: \"Admin Panel screenshot depicting a Media Collection with Upload enabled\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"Here are some common use cases of Uploads:\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Creating a \\\"Media Library\\\" that contains images for use throughout your site or app\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Building a Gated Content library where users need to sign up to gain access to downloadable assets like ebook PDFs, whitepapers, etc.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Storing publicly available, downloadable assets like software, ZIP files, MP4s, etc.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"By simply enabling Upload functionality on a Collection, Payload will automatically transform your Collection into a robust file management / storage solution. The following modifications will be made:\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"filename\"\n        }), \", \", _jsx(_components.code, {\n          children: \"mimeType\"\n        }), \", and \", _jsx(_components.code, {\n          children: \"filesize\"\n        }), \" fields will be automatically added to your Collection. Optionally, if you pass \", _jsx(_components.code, {\n          children: \"imageSizes\"\n        }), \" to your Collection's Upload config, a \", _jsx(_components.a, {\n          href: \"#image-sizes\",\n          children: _jsx(_components.code, {\n            children: \"sizes\"\n          })\n        }), \" array will also be added containing auto-resized image sizes and filenames.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"The Admin Panel will modify its built-in \", _jsx(_components.code, {\n          children: \"List\"\n        }), \" component to show a thumbnail for each upload within the List View\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"The Admin Panel will modify its \", _jsx(_components.code, {\n          children: \"Edit\"\n        }), \" view(s) to add a new set of corresponding Upload UI which will allow for file upload\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"The \", _jsx(_components.code, {\n          children: \"create\"\n        }), \", \", _jsx(_components.code, {\n          children: \"update\"\n        }), \", and \", _jsx(_components.code, {\n          children: \"delete\"\n        }), \" Collection operations will be modified to support file upload, re-upload, and deletion\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Enabling Uploads\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Every Payload Collection can opt-in to supporting Uploads by specifying the \", _jsx(_components.code, {\n        children: \"upload\"\n      }), \" property on the Collection's config to either \", _jsx(_components.code, {\n        children: \"true\"\n      }), \" or to an object containing \", _jsx(_components.code, {\n        children: \"upload\"\n      }), \" options.\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"success\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Tip:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"A common pattern is to create a \", _jsx(_components.strong, {\n          children: \"\\\"media\\\"\"\n        }), \" collection and enable \", _jsx(_components.strong, {\n          children: \"upload\"\n        }), \" on that collection.\"]\n      })]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const Media: CollectionConfig = {\\n  slug: 'media',\\n  upload: {\\n    staticDir: 'media',\\n    imageSizes: [\\n      {\\n        name: 'thumbnail',\\n        width: 400,\\n        height: 300,\\n        position: 'centre',\\n      },\\n      {\\n        name: 'card',\\n        width: 768,\\n        height: 1024,\\n        position: 'centre',\\n      },\\n      {\\n        name: 'tablet',\\n        width: 1024,\\n        // By specifying `undefined` or leaving a height undefined,\\n        // the image will be sized to a certain width,\\n        // but it will retain its original aspect ratio\\n        // and calculate a height automatically.\\n        height: undefined,\\n        position: 'centre',\\n      },\\n    ],\\n    adminThumbnail: 'thumbnail',\\n    mimeTypes: ['image/*'],\\n  },\\n  fields: [\\n    {\\n      name: 'alt',\\n      type: 'text',\\n    },\\n  ],\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Collection Upload Options\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.em, {\n        children: \"An asterisk denotes that an option is required.\"\n      })\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"adminThumbnail\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set the way that the \", _jsx(_components.a, {\n              href: \"../admin/overview\",\n              children: \"Admin Panel\"\n            }), \" will display thumbnails for this Collection. \", _jsx(_components.a, {\n              href: \"#admin-thumbnails\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"bulkUpload\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Allow users to upload in bulk from the list view, default is true\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"cacheTags\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \" to disable the cache tag set in the UI for the admin thumbnail component. Useful for when CDNs don't allow certain cache queries.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"crop\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \" to disable the cropping tool in the \", _jsx(_components.a, {\n              href: \"../admin/overview\",\n              children: \"Admin Panel\"\n            }), \". Crop is enabled by default. \", _jsx(_components.a, {\n              href: \"#crop-and-focal-point-selector\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"disableLocalStorage\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Completely disable uploading files to disk locally. \", _jsx(_components.a, {\n              href: \"#disabling-local-upload-storage\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"displayPreview\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Enable displaying preview of the uploaded file in Upload fields related to this Collection. Can be locally overridden by \", _jsx(_components.code, {\n              children: \"displayPreview\"\n            }), \" option in Upload field. \", _jsx(_components.a, {\n              href: \"/docs/fields/upload#config-options\",\n              children: \"More\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"externalFileHeaderFilter\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Accepts existing headers and returns the headers after filtering or modifying.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"filesRequiredOnCreate\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Mandate file data on creation, default is true.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"filenameCompoundIndex\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Field slugs to use for a compound index instead of the default filename index.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"focalPoint\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \" to disable the focal point selection tool in the \", _jsx(_components.a, {\n              href: \"../admin/overview\",\n              children: \"Admin Panel\"\n            }), \". The focal point selector is only available when \", _jsx(_components.code, {\n              children: \"imageSizes\"\n            }), \" or \", _jsx(_components.code, {\n              children: \"resizeOptions\"\n            }), \" are defined. \", _jsx(_components.a, {\n              href: \"#crop-and-focal-point-selector\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"formatOptions\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"An object with \", _jsx(_components.code, {\n              children: \"format\"\n            }), \" and \", _jsx(_components.code, {\n              children: \"options\"\n            }), \" that are used with the Sharp image library to format the upload file. \", _jsx(_components.a, {\n              href: \"https://sharp.pixelplumbing.com/api-output#toformat\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"handlers\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Array of Request handlers to execute when fetching a file, if a handler returns a Response it will be sent to the client. Otherwise Payload will retrieve and send back the file.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"imageSizes\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"If specified, image uploads will be automatically resized in accordance to these image sizes. \", _jsx(_components.a, {\n              href: \"#image-sizes\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"mimeTypes\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Restrict mimeTypes in the file picker. Array of valid mimetypes or mimetype wildcards \", _jsx(_components.a, {\n              href: \"#mimetypes\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"pasteURL\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Controls whether files can be uploaded from remote URLs by pasting them into the Upload field. \", _jsx(_components.strong, {\n              children: \"Enabled by default.\"\n            }), \" Accepts \", _jsx(_components.code, {\n              children: \"false\"\n            }), \" to disable or an object with an \", _jsx(_components.code, {\n              children: \"allowList\"\n            }), \" of valid remote URLs. \", _jsx(_components.a, {\n              href: \"#uploading-files-from-remote-urls\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"resizeOptions\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"An object passed to the the Sharp image library to resize the uploaded file. \", _jsx(_components.a, {\n              href: \"https://sharp.pixelplumbing.com/api-resize\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"staticDir\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The folder directory to use to store media in. Can be either an absolute path or relative to the directory that contains your config. Defaults to your collection slug\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"trimOptions\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"An object passed to the the Sharp image library to trim the uploaded file. \", _jsx(_components.a, {\n              href: \"https://sharp.pixelplumbing.com/api-resize#trim\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"withMetadata\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"If specified, appends metadata to the output image file. Accepts a boolean or a function that receives \", _jsx(_components.code, {\n              children: \"metadata\"\n            }), \" and \", _jsx(_components.code, {\n              children: \"req\"\n            }), \", returning a boolean.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"hideFileInputOnCreate\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to prevent the admin UI from showing file inputs during document creation, useful for programmatic file generation.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"hideRemoveFile\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to prevent the admin UI having a way to remove an existing file while editing.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Payload-wide Upload Options\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Upload options are specifiable on a Collection by Collection basis, you can also control app wide options by passing your base Payload Config an \", _jsx(_components.code, {\n        children: \"upload\"\n      }), \" property containing an object supportive of all \", _jsx(_components.code, {\n        children: \"Busboy\"\n      }), \" configuration options.\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"abortOnLimit\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A boolean that, if \", _jsx(_components.code, {\n              children: \"true\"\n            }), \", returns HTTP 413 if a file exceeds the file size limit. If \", _jsx(_components.code, {\n              children: \"false\"\n            }), \", the file is truncated. Defaults to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"createParentPath\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to automatically create a directory path when moving files from a temporary directory or buffer. Defaults to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"debug\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A boolean that turns upload process logging on if \", _jsx(_components.code, {\n              children: \"true\"\n            }), \", or off if \", _jsx(_components.code, {\n              children: \"false\"\n            }), \". Useful for troubleshooting. Defaults to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"limitHandler\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"A function which is invoked if the file is greater than configured limits.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"parseNested\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to turn \", _jsx(_components.code, {\n              children: \"req.body\"\n            }), \" and \", _jsx(_components.code, {\n              children: \"req.files\"\n            }), \" into nested structures. By default \", _jsx(_components.code, {\n              children: \"req.body\"\n            }), \" and \", _jsx(_components.code, {\n              children: \"req.files\"\n            }), \" are flat objects. Defaults to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"preserveExtension\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Preserves file extensions with the \", _jsx(_components.code, {\n              children: \"safeFileNames\"\n            }), \" option. Limits file names to 3 characters if \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" or a custom length if a \", _jsx(_components.code, {\n              children: \"number\"\n            }), \", trimming from the start of the extension.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"responseOnLimit\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A \", _jsx(_components.code, {\n              children: \"string\"\n            }), \" that is sent in the Response to a client if the file size limit is exceeded when used with \", _jsx(_components.code, {\n              children: \"abortOnLimit\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"safeFileNames\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to strip non-alphanumeric characters except dashes and underscores. Can also be set to a regex to determine what to strip. Defaults to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"tempFileDir\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A \", _jsx(_components.code, {\n              children: \"string\"\n            }), \" path to store temporary files used when the \", _jsx(_components.code, {\n              children: \"useTempFiles\"\n            }), \" option is set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \". Defaults to \", _jsx(_components.code, {\n              children: \"'./tmp'\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"uploadTimeout\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A \", _jsx(_components.code, {\n              children: \"number\"\n            }), \" that defines how long to wait for data before aborting, specified in milliseconds. Set to \", _jsx(_components.code, {\n              children: \"0\"\n            }), \" to disable timeout checks. Defaults to \", _jsx(_components.code, {\n              children: \"60000\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"uriDecodeFileNames\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to apply uri decoding to file names. Defaults to \", _jsx(_components.code, {\n              children: \"false\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"useTempFiles\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to store files to a temporary directory instead of in RAM, reducing memory usage for large files or many files.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://github.com/mscdex/busboy#api\",\n        children: \"Click here\"\n      }), \" for more documentation about what you can control with \", _jsx(_components.code, {\n        children: \"Busboy\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"A common example of what you might want to customize within Payload-wide Upload options would be to increase the allowed \", _jsx(_components.code, {\n        children: \"fileSize\"\n      }), \" of uploads sent to Payload:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from 'payload'\\n\\nexport default buildConfig({\\n  collections: [\\n    {\\n      slug: 'media',\\n      fields: [\\n        {\\n          name: 'alt',\\n          type: 'text',\\n        },\\n      ],\\n      upload: true,\\n    },\\n  ],\\n  upload: {\\n    limits: {\\n      fileSize: 5000000, // 5MB, written in bytes\\n    },\\n  },\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Custom filename via hooks\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can customize the filename before it's uploaded to the server by using a \", _jsx(_components.code, {\n        children: \"beforeOperation\"\n      }), \" hook.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"beforeOperation: [\\n  ({ req, operation }) =\u003e {\\n    if ((operation === 'create' || operation === 'update') \u0026\u0026 req.file) {\\n      req.file.name = 'test.jpg'\\n    }\\n  },\\n],\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"req.file\"\n      }), \" object will have additional information about the file, such as mimeType and extension, and you also have full access to the file data itself.\\nThe filename from here will also be threaded to image sizes if they're enabled.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Image Sizes\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you specify an array of \", _jsx(_components.code, {\n        children: \"imageSizes\"\n      }), \" to your \", _jsx(_components.code, {\n        children: \"upload\"\n      }), \" config, Payload will automatically crop and resize your uploads to fit each of the sizes specified by your config.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.a, {\n        href: \"../admin/overview\",\n        children: \"Admin Panel\"\n      }), \" will also automatically display all available files, including width, height, and file size, for each of your uploaded files.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Behind the scenes, Payload relies on \", _jsx(_components.a, {\n        href: \"https://sharp.pixelplumbing.com/api-resize#resize\",\n        children: _jsx(_components.code, {\n          children: \"sharp\"\n        })\n      }), \" to perform its image resizing. You can specify additional options for \", _jsx(_components.code, {\n        children: \"sharp\"\n      }), \" to use while resizing your images.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Note that for image resizing to work, \", _jsx(_components.code, {\n        children: \"sharp\"\n      }), \" must be specified in your \", _jsx(_components.a, {\n        href: \"../configuration/overview\",\n        children: \"Payload Config\"\n      }), \". This is configured by default if you created your Payload project with \", _jsx(_components.code, {\n        children: \"create-payload-app\"\n      }), \". See \", _jsx(_components.code, {\n        children: \"sharp\"\n      }), \" in \", _jsx(_components.a, {\n        href: \"../configuration/overview#config-options\",\n        children: \"Config Options\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Accessing the resized images in hooks\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All auto-resized images are exposed to be re-used in hooks and similar via an object that is bound to \", _jsx(_components.code, {\n        children: \"req.payloadUploadSizes\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The object will have keys for each size generated, and each key will be set equal to a buffer containing the file data.\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Handling Image Enlargement\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When an uploaded image is smaller than the defined image size, we have 3 options:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"withoutEnlargement: undefined | false | true\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"undefined\"\n        }), \" [default]: uploading images with smaller width AND height than the image size will return null\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"false\"\n        }), \": always enlarge images to the image size\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"true\"\n        }), \": if the image is smaller than the image size, return the original image\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"error\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"By default, the image size will return NULL when the uploaded image is smaller than the defined\\nimage size. Use the \", _jsx(_components.code, {\n          children: \"withoutEnlargement\"\n        }), \" prop to change this.\"]\n      })]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Custom file name per size\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Each image size supports a \", _jsx(_components.code, {\n        children: \"generateImageName\"\n      }), \" function that can be used to generate a custom file name for the resized image.\\nThis function receives the original file name, the resize name, the extension, height and width as arguments.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"{\\n  name: 'thumbnail',\\n  width: 400,\\n  height: 300,\\n  generateImageName: ({ height, sizeName, extension, width }) =\u003e {\\n    return `custom-${sizeName}-${height}-${width}.${extension}`\\n  },\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Crop and Focal Point Selector\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This feature is only available for image file types.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Setting \", _jsx(_components.code, {\n        children: \"crop: false\"\n      }), \" and \", _jsx(_components.code, {\n        children: \"focalPoint: false\"\n      }), \" in your Upload config will be disable the respective selector in the \", _jsx(_components.a, {\n        href: \"../admin/overview\",\n        children: \"Admin Panel\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Image cropping occurs before any resizing, the resized images will therefore be generated from the cropped image (\", _jsx(_components.strong, {\n        children: \"not\"\n      }), \" the original image).\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If no resizing options are specified (\", _jsx(_components.code, {\n        children: \"imageSizes\"\n      }), \" or \", _jsx(_components.code, {\n        children: \"resizeOptions\"\n      }), \"), the focal point selector will not be displayed.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Disabling Local Upload Storage\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you are using a plugin to send your files off to a third-party file storage host or CDN, like Amazon S3 or similar, you may not want to store your files locally at all. You can prevent Payload from writing files to disk by specifying \", _jsx(_components.code, {\n        children: \"disableLocalStorage: true\"\n      }), \" on your collection's upload config.\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"This is a fairly advanced feature. If you do disable local file storage, by default, your admin\\npanel's thumbnails will be broken as you will not have stored a file. It will be totally up to you\\nto use either a plugin or your own hooks to store your files in a permanent manner, as well as\\nprovide your own admin thumbnail using \", _jsx(_components.strong, {\n          children: \"upload.adminThumbnail\"\n        }), \".\"]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Admin Thumbnails\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You can specify how Payload retrieves admin thumbnails for your upload-enabled Collections with one of the following:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"adminThumbnail\"\n        }), \" as a \", _jsx(_components.strong, {\n          children: \"string\"\n        }), \", equal to one of your provided image size names.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const Media: CollectionConfig = {\\n  slug: 'media',\\n  upload: {\\n    // highlight-start\\n    adminThumbnail: 'small',\\n    // highlight-end\\n    imageSizes: [\\n      {\\n        name: 'small',\\n        fit: 'cover',\\n        height: 300,\\n        width: 900,\\n      },\\n      {\\n        name: 'large',\\n        fit: 'cover',\\n        height: 600,\\n        width: 1800,\\n      },\\n    ],\\n  },\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"2\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"adminThumbnail\"\n        }), \" as a \", _jsx(_components.strong, {\n          children: \"function\"\n        }), \" that takes the document's data and sends back a full URL to load the thumbnail.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const Media: CollectionConfig = {\\n  slug: 'media',\\n  upload: {\\n    // highlight-start\\n    adminThumbnail: ({ doc }) =\u003e\\n      `https://google.com/custom-path-to-file/${doc.filename}`,\\n    // highlight-end\\n  },\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"MimeTypes\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Specifying the \", _jsx(_components.code, {\n        children: \"mimeTypes\"\n      }), \" property can restrict what files are allowed from the user's file picker. This accepts an array of strings, which can be any valid mimetype or mimetype wildcards\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Some example values are: \", _jsx(_components.code, {\n        children: \"image/*\"\n      }), \", \", _jsx(_components.code, {\n        children: \"audio/*\"\n      }), \", \", _jsx(_components.code, {\n        children: \"video/*\"\n      }), \", \", _jsx(_components.code, {\n        children: \"image/png\"\n      }), \", \", _jsx(_components.code, {\n        children: \"application/pdf\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"Example mimeTypes usage:\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const Media: CollectionConfig = {\\n  slug: 'media',\\n  upload: {\\n    mimeTypes: ['image/*', 'application/pdf'], // highlight-line\\n  },\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Uploading Files\"\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Important:\"\n        })\n      }), _jsx(_components.p, {\n        children: \"Uploading files is currently only possible through the REST and Local APIs due to how GraphQL\\nworks. It's difficult and fairly nonsensical to support uploading files through GraphQL.\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To upload a file, use your collection's \", _jsx(_components.a, {\n        href: \"/docs/rest-api/overview#collections\",\n        children: _jsx(_components.code, {\n          children: \"create\"\n        })\n      }), \" endpoint. Send it all the data that your Collection requires, as well as a \", _jsx(_components.code, {\n        children: \"file\"\n      }), \" key containing the file that you'd like to upload.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Send your request as a \", _jsx(_components.code, {\n        children: \"multipart/form-data\"\n      }), \" request, using \", _jsx(_components.a, {\n        href: \"https://developer.mozilla.org/en-US/docs/Web/API/FormData\",\n        children: _jsx(_components.code, {\n          children: \"FormData\"\n        })\n      }), \" if possible.\"]\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Note:\"\n        }), \" To include any additional fields (like \", _jsx(_components.code, {\n          children: \"title\"\n        }), \", \", _jsx(_components.code, {\n          children: \"alt\"\n        }), \", etc.), append\\na \", _jsx(_components.code, {\n          children: \"_payload\"\n        }), \" field containing a JSON-stringified object of the required\\nvalues. These values must match the schema of your upload-enabled collection.\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"const fileInput = document.querySelector('#your-file-input')\\nconst formData = new FormData()\\n\\nformData.append('file', fileInput.files[0])\\n\\n// Replace with the fields defined in your upload-enabled collection.\\n// The example below includes an optional field like 'title'.\\nformData.append(\\n  '_payload',\\n  JSON.stringify({\\n    title: 'Example Title',\\n    description: 'An optional description for the file',\\n  }),\\n)\\n\\nfetch('api/:upload-slug', {\\n  method: 'POST',\\n  body: formData,\\n  /**\\n   * Do not manually add the Content-Type Header\\n   * the browser will handle this.\\n   *\\n   * headers: {\\n   *  'Content-Type': 'multipart/form-data'\\n   * }\\n   */\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Uploading Files stored locally\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you want to upload a file stored on your machine directly using the \", _jsx(_components.code, {\n        children: \"payload.create\"\n      }), \" method, for example, during a seed script,\\nyou can use the \", _jsx(_components.code, {\n        children: \"filePath\"\n      }), \" property to specify the local path of the file.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"const localFilePath = path.resolve(__dirname, filename)\\n\\nawait payload.create({\\n  collection: 'media',\\n  data: {\\n    alt,\\n  },\\n  filePath: localFilePath,\\n})\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"data\"\n      }), \" property should still include all the required fields of your \", _jsx(_components.code, {\n        children: \"media\"\n      }), \" collection.\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Important:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"Remember that all custom hooks attached to the \", _jsx(_components.code, {\n          children: \"media\"\n        }), \" collection will still trigger.\\nEnsure that files match the specified mimeTypes or sizes defined in the collection's \", _jsx(_components.code, {\n          children: \"formatOptions\"\n        }), \" or custom \", _jsx(_components.code, {\n          children: \"hooks\"\n        }), \".\"]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Uploading Files from Remote URLs\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"pasteURL\"\n      }), \" option allows users to fetch files from remote URLs by pasting them into an Upload field. This option is \", _jsx(_components.strong, {\n        children: \"enabled by default\"\n      }), \" and can be configured to either \", _jsx(_components.strong, {\n        children: \"allow unrestricted client-side fetching\"\n      }), \" or \", _jsx(_components.strong, {\n        children: \"restrict server-side fetching\"\n      }), \" to specific trusted domains.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"By default, Payload uses \", _jsx(_components.strong, {\n        children: \"client-side fetching\"\n      }), \", where the browser downloads the file directly from the provided URL. However, \", _jsx(_components.strong, {\n        children: \"client-side fetching will fail if the URL’s server has CORS restrictions\"\n      }), \", making it suitable only for internal URLs or public URLs without CORS blocks.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To fetch files from \", _jsx(_components.strong, {\n        children: \"restricted URLs\"\n      }), \" that would otherwise be blocked by CORS, use \", _jsx(_components.strong, {\n        children: \"server-side fetching\"\n      }), \" by configuring the \", _jsx(_components.code, {\n        children: \"pasteURL\"\n      }), \" option with an \", _jsx(_components.code, {\n        children: \"allowList\"\n      }), \" of trusted domains. This method ensures that Payload downloads the file on the server and streams it to the browser. However, for security reasons, only URLs that match the specified \", _jsx(_components.code, {\n        children: \"allowList\"\n      }), \" will be allowed.\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Configuration Example\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Here’s how to configure the pasteURL option to control remote URL fetching:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const Media: CollectionConfig = {\\n  slug: 'media',\\n  upload: {\\n    pasteURL: {\\n      allowList: [\\n        {\\n          hostname: 'payloadcms.com', // required\\n          pathname: '',\\n          port: '',\\n          protocol: 'https',\\n          search: ''\\n        },\\n        {\\n          hostname: 'example.com',\\n          pathname: '/images/*',\\n        },\\n      ],\\n    },\\n  },\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.h5, {\n      children: [\"Accepted Values for \", _jsx(_components.code, {\n        children: \"pasteURL\"\n      })]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"undefined\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Default behavior. Enables client-side fetching for internal or public URLs.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"false\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Disables the ability to paste URLs into Upload fields.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"allowList\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Enables server-side fetching for specific trusted URLs. Requires an array of objects defining trusted domains. See the table below for details on \", _jsx(_components.code, {\n              children: \"AllowItem\"\n            }), \".\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.h5, {\n      children: [_jsx(_components.code, {\n        children: \"AllowItem\"\n      }), \" Properties\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.em, {\n        children: \"An asterisk denotes that an option is required.\"\n      })\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          }), _jsx(_components.th, {\n            children: \"Example\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsxs(_components.td, {\n            children: [_jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"hostname\"\n              })\n            }), \" *\"]\n          }), _jsx(_components.td, {\n            children: \"The hostname of the allowed URL. This is required to ensure the URL is coming from a trusted source.\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"example.com\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"pathname\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The path portion of the URL. Supports wildcards to match multiple paths.\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"/images/*\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"port\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The port number of the URL. If not specified, the default port for the protocol will be used.\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"3000\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"protocol\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The protocol to match. Must be either \", _jsx(_components.code, {\n              children: \"http\"\n            }), \" or \", _jsx(_components.code, {\n              children: \"https\"\n            }), \". Defaults to \", _jsx(_components.code, {\n              children: \"https\"\n            }), \".\"]\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"https\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"search\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The query string of the URL. If specified, the URL must match this exact query string.\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"?version=1\"\n            })\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Access Control\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All files that are uploaded to each Collection automatically support the \", _jsx(_components.code, {\n        children: \"read\"\n      }), \" \", _jsx(_components.a, {\n        href: \"/docs/access-control/overview\",\n        children: \"Access Control\"\n      }), \" function from the Collection itself. You can use this to control who should be allowed to see your uploads, and who should not.\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["upload","overview"]},"buildId":"pbayt_BRhSN28J-gcoKlf","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>