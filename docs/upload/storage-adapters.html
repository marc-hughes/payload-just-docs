<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-f6932393d0a8e091.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">Storage Adapters</h1><p class="text-xl text-gray-600 mb-8">Payload provides additional storage adapters to handle file uploads. These adapters allow you to store files in different locations, such as Amazon S3, Vercel Blob Storage, Google Cloud Storage, Uploadthing, and more.</p><div class="prose prose-lg max-w-none"><p>Payload offers additional storage adapters to handle file uploads. These adapters allow you to store files in different locations, such as Amazon S3, Vercel Blob Storage, Google Cloud Storage, and more.</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Package</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Vercel Blob</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><a href="https://github.com/payloadcms/payload/tree/main/packages/storage-vercel-blob"><code>@payloadcms/storage-vercel-blob</code></a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">AWS S3</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><a href="https://github.com/payloadcms/payload/tree/main/packages/storage-s3"><code>@payloadcms/storage-s3</code></a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Azure</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><a href="https://github.com/payloadcms/payload/tree/main/packages/storage-azure"><code>@payloadcms/storage-azure</code></a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Google Cloud Storage</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><a href="https://github.com/payloadcms/payload/tree/main/packages/storage-gcs"><code>@payloadcms/storage-gcs</code></a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Uploadthing</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><a href="https://github.com/payloadcms/payload/tree/main/packages/storage-uploadthing"><code>@payloadcms/storage-uploadthing</code></a></td></tr></tbody></table></div>
<h2>Vercel Blob Storage</h2>
<p><a href="https://www.npmjs.com/package/@payloadcms/storage-vercel-blob"><code>@payloadcms/storage-vercel-blob</code></a></p>
<h3>Installation#vercel-blob-installation</h3>
<pre><code class="language-sh">pnpm add @payloadcms/storage-vercel-blob
</code></pre>
<h3>Usage#vercel-blob-usage</h3>
<ul>
<li>Configure the <code>collections</code> object to specify which collections should use the Vercel Blob adapter. The slug <em>must</em> match one of your existing collection slugs.</li>
<li>Ensure you have <code>BLOB_READ_WRITE_TOKEN</code> set in your Vercel environment variables. This is usually set by Vercel automatically after adding blob storage to your project.</li>
<li>When enabled, this package will automatically set <code>disableLocalStorage</code> to <code>true</code> for each collection.</li>
<li>When deploying to Vercel, server uploads are limited with 4.5MB. Set <code>clientUploads</code> to <code>true</code> to do uploads directly on the client.</li>
</ul>
<pre><code class="language-ts">import { vercelBlobStorage } from &#x27;@payloadcms/storage-vercel-blob&#x27;
import { Media } from &#x27;./collections/Media&#x27;
import { MediaWithPrefix } from &#x27;./collections/MediaWithPrefix&#x27;

export default buildConfig({
  collections: [Media, MediaWithPrefix],
  plugins: [
    vercelBlobStorage({
      enabled: true, // Optional, defaults to true
      // Specify which collections should use Vercel Blob
      collections: {
        media: true,
        &#x27;media-with-prefix&#x27;: {
          prefix: &#x27;my-prefix&#x27;,
        },
      },
      // Token provided by Vercel once Blob storage is added to your Vercel project
      token: process.env.BLOB_READ_WRITE_TOKEN,
    }),
  ],
})
</code></pre>
<h3>Configuration Options#vercel-blob-configuration</h3>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Default</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>enabled</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Whether or not to enable the plugin</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>true</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>collections</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Collections to apply the Vercel Blob adapter to</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>addRandomSuffix</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Add a random suffix to the uploaded file name in Vercel Blob storage</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>false</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>cacheControlMaxAge</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Cache-Control max-age in seconds</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>365 * 24 * 60 * 60</code> (1 Year)</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>token</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Vercel Blob storage read/write token</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>&#x27;&#x27;</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>clientUploads</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Do uploads directly on the client to bypass limits on Vercel.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr></tbody></table></div>
<h2>S3 Storage</h2>
<p><a href="https://www.npmjs.com/package/@payloadcms/storage-s3"><code>@payloadcms/storage-s3</code></a></p>
<h3>Installation#s3-installation</h3>
<pre><code class="language-sh">pnpm add @payloadcms/storage-s3
</code></pre>
<h3>Usage#s3-usage</h3>
<ul>
<li>Configure the <code>collections</code> object to specify which collections should use the S3 Storage adapter. The slug <em>must</em> match one of your existing collection slugs.</li>
<li>The <code>config</code> object can be any <a href="https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/client/s3"><code>S3ClientConfig</code></a> object (from <a href="https://github.com/aws/aws-sdk-js-v3"><code>@aws-sdk/client-s3</code></a>). <em>This is highly dependent on your AWS setup</em>. Check the AWS documentation for more information.</li>
<li>When enabled, this package will automatically set <code>disableLocalStorage</code> to <code>true</code> for each collection.</li>
<li>When deploying to Vercel, server uploads are limited with 4.5MB. Set <code>clientUploads</code> to <code>true</code> to do uploads directly on the client. You must allow CORS PUT method for the bucket to your website.</li>
</ul>
<pre><code class="language-ts">import { s3Storage } from &#x27;@payloadcms/storage-s3&#x27;
import { Media } from &#x27;./collections/Media&#x27;
import { MediaWithPrefix } from &#x27;./collections/MediaWithPrefix&#x27;

export default buildConfig({
  collections: [Media, MediaWithPrefix],
  plugins: [
    s3Storage({
      collections: {
        media: true,
        &#x27;media-with-prefix&#x27;: {
          prefix,
        },
      },
      bucket: process.env.S3_BUCKET,
      config: {
        credentials: {
          accessKeyId: process.env.S3_ACCESS_KEY_ID,
          secretAccessKey: process.env.S3_SECRET_ACCESS_KEY,
        },
        region: process.env.S3_REGION,
        // ... Other S3 configuration
      },
    }),
  ],
})
</code></pre>
<h3>Configuration Options#s3-configuration</h3>
<p>See the the <a href="https://github.com/aws/aws-sdk-js-v3">AWS SDK Package</a> and <a href="https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/client/s3"><code>S3ClientConfig</code></a> object for guidance on AWS S3 configuration.</p>
<h2>Azure Blob Storage</h2>
<p><a href="https://www.npmjs.com/package/@payloadcms/storage-azure"><code>@payloadcms/storage-azure</code></a></p>
<h3>Installation#azure-installation</h3>
<pre><code class="language-sh">pnpm add @payloadcms/storage-azure
</code></pre>
<h3>Usage#azure-usage</h3>
<ul>
<li>Configure the <code>collections</code> object to specify which collections should use the Azure Blob adapter. The slug <em>must</em> match one of your existing collection slugs.</li>
<li>When enabled, this package will automatically set <code>disableLocalStorage</code> to <code>true</code> for each collection.</li>
<li>When deploying to Vercel, server uploads are limited with 4.5MB. Set <code>clientUploads</code> to <code>true</code> to do uploads directly on the client. You must allow CORS PUT method to your website.</li>
</ul>
<pre><code class="language-ts">import { azureStorage } from &#x27;@payloadcms/storage-azure&#x27;
import { Media } from &#x27;./collections/Media&#x27;
import { MediaWithPrefix } from &#x27;./collections/MediaWithPrefix&#x27;

export default buildConfig({
  collections: [Media, MediaWithPrefix],
  plugins: [
    azureStorage({
      collections: {
        media: true,
        &#x27;media-with-prefix&#x27;: {
          prefix,
        },
      },
      allowContainerCreate:
        process.env.AZURE_STORAGE_ALLOW_CONTAINER_CREATE === &#x27;true&#x27;,
      baseURL: process.env.AZURE_STORAGE_ACCOUNT_BASEURL,
      connectionString: process.env.AZURE_STORAGE_CONNECTION_STRING,
      containerName: process.env.AZURE_STORAGE_CONTAINER_NAME,
    }),
  ],
})
</code></pre>
<h3>Configuration Options#azure-configuration</h3>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Default</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>enabled</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Whether or not to enable the plugin</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>true</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>collections</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Collections to apply the Azure Blob adapter to</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>allowContainerCreate</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Whether or not to allow the container to be created if it does not exist</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>false</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>baseURL</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Base URL for the Azure Blob storage account</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>connectionString</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Azure Blob storage connection string</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>containerName</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Azure Blob storage container name</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>clientUploads</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Do uploads directly on the client to bypass limits on Vercel.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr></tbody></table></div>
<h2>Google Cloud Storage</h2>
<p><a href="https://www.npmjs.com/package/@payloadcms/storage-gcs"><code>@payloadcms/storage-gcs</code></a></p>
<h3>Installation#gcs-installation</h3>
<pre><code class="language-sh">pnpm add @payloadcms/storage-gcs
</code></pre>
<h3>Usage#gcs-usage</h3>
<ul>
<li>Configure the <code>collections</code> object to specify which collections should use the Google Cloud Storage adapter. The slug <em>must</em> match one of your existing collection slugs.</li>
<li>When enabled, this package will automatically set <code>disableLocalStorage</code> to <code>true</code> for each collection.</li>
<li>When deploying to Vercel, server uploads are limited with 4.5MB. Set <code>clientUploads</code> to <code>true</code> to do uploads directly on the client. You must allow CORS PUT method for the bucket to your website.</li>
</ul>
<pre><code class="language-ts">import { gcsStorage } from &#x27;@payloadcms/storage-gcs&#x27;
import { Media } from &#x27;./collections/Media&#x27;
import { MediaWithPrefix } from &#x27;./collections/MediaWithPrefix&#x27;

export default buildConfig({
  collections: [Media, MediaWithPrefix],
  plugins: [
    gcsStorage({
      collections: {
        media: true,
        &#x27;media-with-prefix&#x27;: {
          prefix,
        },
      },
      bucket: process.env.GCS_BUCKET,
      options: {
        apiEndpoint: process.env.GCS_ENDPOINT,
        projectId: process.env.GCS_PROJECT_ID,
      },
    }),
  ],
})
</code></pre>
<h3>Configuration Options#gcs-configuration</h3>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Default</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>enabled</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Whether or not to enable the plugin</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>true</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>collections</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Collections to apply the storage to</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>bucket</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The name of the bucket to use</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>options</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Google Cloud Storage client configuration. See <a href="https://github.com/googleapis/nodejs-storage">Docs</a></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>acl</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Access control list for files that are uploaded</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>Private</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>clientUploads</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Do uploads directly on the client to bypass limits on Vercel.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr></tbody></table></div>
<h2>Uploadthing Storage</h2>
<p><a href="https://www.npmjs.com/package/@payloadcms/storage-uploadthing"><code>@payloadcms/storage-uploadthing</code></a></p>
<h3>Installation#uploadthing-installation</h3>
<pre><code class="language-sh">pnpm add @payloadcms/storage-uploadthing
</code></pre>
<h3>Usage#uploadthing-usage</h3>
<ul>
<li>Configure the <code>collections</code> object to specify which collections should use uploadthing. The slug <em>must</em> match one of your existing collection slugs and be an <code>upload</code> type.</li>
<li>Get a token from Uploadthing and set it as <code>token</code> in the <code>options</code> object.</li>
<li><code>acl</code> is optional and defaults to <code>public-read</code>.</li>
<li>When deploying to Vercel, server uploads are limited with 4.5MB. Set <code>clientUploads</code> to <code>true</code> to do uploads directly on the client.</li>
</ul>
<pre><code class="language-ts">export default buildConfig({
  collections: [Media],
  plugins: [
    uploadthingStorage({
      collections: {
        media: true,
      },
      options: {
        token: process.env.UPLOADTHING_TOKEN,
        acl: &#x27;public-read&#x27;,
      },
    }),
  ],
})
</code></pre>
<h3>Configuration Options#uploadthing-configuration</h3>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Default</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>token</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Token from Uploadthing. Required.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>acl</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Access control list for files that are uploaded</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>public-read</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>logLevel</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Log level for Uploadthing</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>info</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>fetch</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Custom fetch function</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>fetch</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>defaultKeyType</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Default key type for file operations</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>fileKey</code></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>clientUploads</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Do uploads directly on the client to bypass limits on Vercel.</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"></td></tr></tbody></table></div>
<h2>Custom Storage Adapters</h2>
<p>If you need to create a custom storage adapter, you can use the <a href="https://www.npmjs.com/package/@payloadcms/plugin-cloud-storage"><code>@payloadcms/plugin-cloud-storage</code></a> package. This package is used internally by the storage adapters mentioned above.</p>
<h3>Installation#custom-installation</h3>
<p><code>pnpm add @payloadcms/plugin-cloud-storage</code></p>
<h3>Usage#custom-usage</h3>
<p>Reference any of the existing storage adapters for guidance on how this should be structured. Create an adapter following the <code>GeneratedAdapter</code> interface. Then, pass the adapter to the <code>cloudStorage</code> plugin.</p>
<pre><code class="language-ts">export interface GeneratedAdapter {
  /**
   * Additional fields to be injected into the base collection and image sizes
   */
  fields?: Field[]
  /**
   * Generates the public URL for a file
   */
  generateURL?: GenerateURL
  handleDelete: HandleDelete
  handleUpload: HandleUpload
  name: string
  onInit?: () =&gt; void
  staticHandler: StaticHandler
}
</code></pre>
<pre><code class="language-ts">import { buildConfig } from &#x27;payload&#x27;
import { cloudStoragePlugin } from &#x27;@payloadcms/plugin-cloud-storage&#x27;

export default buildConfig({
  plugins: [
    cloudStorage({
      collections: {
        &#x27;my-collection-slug&#x27;: {
          adapter: theAdapterToUse, // see docs for the adapter you want to use
        },
      },
    }),
  ],
  // The rest of your config goes here
})
</code></pre>
<h2>Plugin options</h2>
<p>This plugin is configurable to work across many different Payload collections. A <code>*</code> denotes that the property is required.</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>collections</code> *</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>Record&lt;string, CollectionOptions&gt;</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Object with keys set to the slug of collections you want to enable the plugin for, and values set to collection-specific options.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>enabled</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>boolean</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">To conditionally enable/disable plugin. Default: <code>true</code>.</td></tr></tbody></table></div>
<h2>Collection-specific options</h2>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>adapter</code> *</td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><a href="https://github.com/payloadcms/payload/blob/main/packages/plugin-cloud-storage/src/types.ts#L49">Adapter</a></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Pass in the adapter that you&#x27;d like to use for this collection. You can also set this field to <code>null</code> for local development if you&#x27;d like to bypass cloud storage in certain scenarios and use local storage.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>disableLocalStorage</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>boolean</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Choose to disable local storage on this collection. Defaults to <code>true</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>disablePayloadAccessControl</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>true</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to disable Payload&#x27;s Access Control. <a href="#payload-access-control">More</a></td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>prefix</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>string</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>media/images</code> to upload files inside <code>media/images</code> folder in the bucket.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>generateFileURL</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><a href="https://github.com/payloadcms/payload/blob/main/packages/plugin-cloud-storage/src/types.ts#L67">GenerateFileURL</a></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Override the generated file URL with one that you create.</td></tr></tbody></table></div>
<h2>Payload Access Control</h2>
<p>Payload ships with <a href="../access-control/overview">Access Control</a> that runs <em>even on statically served files</em>. The same <code>read</code> Access Control property on your <code>upload</code>-enabled collections is used, and it allows you to restrict who can request your uploaded files.</p>
<p>To preserve this feature, by default, this plugin <em>keeps all file URLs exactly the same</em>. Your file URLs won&#x27;t be updated to point directly to your cloud storage source, as in that case, Payload&#x27;s Access control will be completely bypassed and you would need public readability on your cloud-hosted files.</p>
<p>Instead, all uploads will still be reached from the default <code>/collectionSlug/staticURL/filename</code> path. This plugin will &quot;pass through&quot; all files that are hosted on your third-party cloud service—with the added benefit of keeping your existing Access Control in place.</p>
<p>If this does not apply to you (your upload collection has <code>read: () =&gt; true</code> or similar) you can disable this functionality by setting <code>disablePayloadAccessControl</code> to <code>true</code>. When this setting is in place, this plugin will update your file URLs to point directly to your cloud host.</p>
<h2>Conditionally Enabling/Disabling</h2>
<p>The proper way to conditionally enable/disable this plugin is to use the <code>enabled</code> property.</p>
<pre><code class="language-ts">cloudStoragePlugin({
  enabled: process.env.MY_CONDITION === &#x27;true&#x27;,
  collections: {
    &#x27;my-collection-slug&#x27;: {
      adapter: theAdapterToUse, // see docs for the adapter you want to use
    },
  },
}),
</code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"Storage Adapters","label":"Storage Adapters","order":20,"desc":"Payload provides additional storage adapters to handle file uploads. These adapters allow you to store files in different locations, such as Amazon S3, Vercel Blob Storage, Google Cloud Storage, Uploadthing, and more.","keywords":"uploads, images, media, storage, adapters, s3, vercel, google cloud, azure"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    a: \"a\",\n    code: \"code\",\n    h2: \"h2\",\n    h3: \"h3\",\n    pre: \"pre\",\n    ul: \"ul\",\n    li: \"li\",\n    em: \"em\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"Payload offers additional storage adapters to handle file uploads. These adapters allow you to store files in different locations, such as Amazon S3, Vercel Blob Storage, Google Cloud Storage, and more.\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Service\"\n          }), _jsx(_components.th, {\n            children: \"Package\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Vercel Blob\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.a, {\n              href: \"https://github.com/payloadcms/payload/tree/main/packages/storage-vercel-blob\",\n              children: _jsx(_components.code, {\n                children: \"@payloadcms/storage-vercel-blob\"\n              })\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"AWS S3\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.a, {\n              href: \"https://github.com/payloadcms/payload/tree/main/packages/storage-s3\",\n              children: _jsx(_components.code, {\n                children: \"@payloadcms/storage-s3\"\n              })\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Azure\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.a, {\n              href: \"https://github.com/payloadcms/payload/tree/main/packages/storage-azure\",\n              children: _jsx(_components.code, {\n                children: \"@payloadcms/storage-azure\"\n              })\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Google Cloud Storage\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.a, {\n              href: \"https://github.com/payloadcms/payload/tree/main/packages/storage-gcs\",\n              children: _jsx(_components.code, {\n                children: \"@payloadcms/storage-gcs\"\n              })\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Uploadthing\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.a, {\n              href: \"https://github.com/payloadcms/payload/tree/main/packages/storage-uploadthing\",\n              children: _jsx(_components.code, {\n                children: \"@payloadcms/storage-uploadthing\"\n              })\n            })\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Vercel Blob Storage\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/@payloadcms/storage-vercel-blob\",\n        children: _jsx(_components.code, {\n          children: \"@payloadcms/storage-vercel-blob\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Installation#vercel-blob-installation\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-sh\",\n        children: \"pnpm add @payloadcms/storage-vercel-blob\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Usage#vercel-blob-usage\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Configure the \", _jsx(_components.code, {\n          children: \"collections\"\n        }), \" object to specify which collections should use the Vercel Blob adapter. The slug \", _jsx(_components.em, {\n          children: \"must\"\n        }), \" match one of your existing collection slugs.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Ensure you have \", _jsx(_components.code, {\n          children: \"BLOB_READ_WRITE_TOKEN\"\n        }), \" set in your Vercel environment variables. This is usually set by Vercel automatically after adding blob storage to your project.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When enabled, this package will automatically set \", _jsx(_components.code, {\n          children: \"disableLocalStorage\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" for each collection.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When deploying to Vercel, server uploads are limited with 4.5MB. Set \", _jsx(_components.code, {\n          children: \"clientUploads\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" to do uploads directly on the client.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { vercelBlobStorage } from '@payloadcms/storage-vercel-blob'\\nimport { Media } from './collections/Media'\\nimport { MediaWithPrefix } from './collections/MediaWithPrefix'\\n\\nexport default buildConfig({\\n  collections: [Media, MediaWithPrefix],\\n  plugins: [\\n    vercelBlobStorage({\\n      enabled: true, // Optional, defaults to true\\n      // Specify which collections should use Vercel Blob\\n      collections: {\\n        media: true,\\n        'media-with-prefix': {\\n          prefix: 'my-prefix',\\n        },\\n      },\\n      // Token provided by Vercel once Blob storage is added to your Vercel project\\n      token: process.env.BLOB_READ_WRITE_TOKEN,\\n    }),\\n  ],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configuration Options#vercel-blob-configuration\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          }), _jsx(_components.th, {\n            children: \"Default\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"enabled\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Whether or not to enable the plugin\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"true\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"collections\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Collections to apply the Vercel Blob adapter to\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"addRandomSuffix\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Add a random suffix to the uploaded file name in Vercel Blob storage\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"false\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"cacheControlMaxAge\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Cache-Control max-age in seconds\"\n          }), _jsxs(_components.td, {\n            children: [_jsx(_components.code, {\n              children: \"365 * 24 * 60 * 60\"\n            }), \" (1 Year)\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"token\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Vercel Blob storage read/write token\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"''\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"clientUploads\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Do uploads directly on the client to bypass limits on Vercel.\"\n          }), _jsx(_components.td, {})]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"S3 Storage\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/@payloadcms/storage-s3\",\n        children: _jsx(_components.code, {\n          children: \"@payloadcms/storage-s3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Installation#s3-installation\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-sh\",\n        children: \"pnpm add @payloadcms/storage-s3\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Usage#s3-usage\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Configure the \", _jsx(_components.code, {\n          children: \"collections\"\n        }), \" object to specify which collections should use the S3 Storage adapter. The slug \", _jsx(_components.em, {\n          children: \"must\"\n        }), \" match one of your existing collection slugs.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"The \", _jsx(_components.code, {\n          children: \"config\"\n        }), \" object can be any \", _jsx(_components.a, {\n          href: \"https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/client/s3\",\n          children: _jsx(_components.code, {\n            children: \"S3ClientConfig\"\n          })\n        }), \" object (from \", _jsx(_components.a, {\n          href: \"https://github.com/aws/aws-sdk-js-v3\",\n          children: _jsx(_components.code, {\n            children: \"@aws-sdk/client-s3\"\n          })\n        }), \"). \", _jsx(_components.em, {\n          children: \"This is highly dependent on your AWS setup\"\n        }), \". Check the AWS documentation for more information.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When enabled, this package will automatically set \", _jsx(_components.code, {\n          children: \"disableLocalStorage\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" for each collection.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When deploying to Vercel, server uploads are limited with 4.5MB. Set \", _jsx(_components.code, {\n          children: \"clientUploads\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" to do uploads directly on the client. You must allow CORS PUT method for the bucket to your website.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { s3Storage } from '@payloadcms/storage-s3'\\nimport { Media } from './collections/Media'\\nimport { MediaWithPrefix } from './collections/MediaWithPrefix'\\n\\nexport default buildConfig({\\n  collections: [Media, MediaWithPrefix],\\n  plugins: [\\n    s3Storage({\\n      collections: {\\n        media: true,\\n        'media-with-prefix': {\\n          prefix,\\n        },\\n      },\\n      bucket: process.env.S3_BUCKET,\\n      config: {\\n        credentials: {\\n          accessKeyId: process.env.S3_ACCESS_KEY_ID,\\n          secretAccessKey: process.env.S3_SECRET_ACCESS_KEY,\\n        },\\n        region: process.env.S3_REGION,\\n        // ... Other S3 configuration\\n      },\\n    }),\\n  ],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configuration Options#s3-configuration\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"See the the \", _jsx(_components.a, {\n        href: \"https://github.com/aws/aws-sdk-js-v3\",\n        children: \"AWS SDK Package\"\n      }), \" and \", _jsx(_components.a, {\n        href: \"https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/client/s3\",\n        children: _jsx(_components.code, {\n          children: \"S3ClientConfig\"\n        })\n      }), \" object for guidance on AWS S3 configuration.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Azure Blob Storage\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/@payloadcms/storage-azure\",\n        children: _jsx(_components.code, {\n          children: \"@payloadcms/storage-azure\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Installation#azure-installation\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-sh\",\n        children: \"pnpm add @payloadcms/storage-azure\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Usage#azure-usage\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Configure the \", _jsx(_components.code, {\n          children: \"collections\"\n        }), \" object to specify which collections should use the Azure Blob adapter. The slug \", _jsx(_components.em, {\n          children: \"must\"\n        }), \" match one of your existing collection slugs.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When enabled, this package will automatically set \", _jsx(_components.code, {\n          children: \"disableLocalStorage\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" for each collection.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When deploying to Vercel, server uploads are limited with 4.5MB. Set \", _jsx(_components.code, {\n          children: \"clientUploads\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" to do uploads directly on the client. You must allow CORS PUT method to your website.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { azureStorage } from '@payloadcms/storage-azure'\\nimport { Media } from './collections/Media'\\nimport { MediaWithPrefix } from './collections/MediaWithPrefix'\\n\\nexport default buildConfig({\\n  collections: [Media, MediaWithPrefix],\\n  plugins: [\\n    azureStorage({\\n      collections: {\\n        media: true,\\n        'media-with-prefix': {\\n          prefix,\\n        },\\n      },\\n      allowContainerCreate:\\n        process.env.AZURE_STORAGE_ALLOW_CONTAINER_CREATE === 'true',\\n      baseURL: process.env.AZURE_STORAGE_ACCOUNT_BASEURL,\\n      connectionString: process.env.AZURE_STORAGE_CONNECTION_STRING,\\n      containerName: process.env.AZURE_STORAGE_CONTAINER_NAME,\\n    }),\\n  ],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configuration Options#azure-configuration\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          }), _jsx(_components.th, {\n            children: \"Default\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"enabled\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Whether or not to enable the plugin\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"true\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"collections\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Collections to apply the Azure Blob adapter to\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"allowContainerCreate\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Whether or not to allow the container to be created if it does not exist\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"false\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"baseURL\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Base URL for the Azure Blob storage account\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"connectionString\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Azure Blob storage connection string\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"containerName\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Azure Blob storage container name\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"clientUploads\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Do uploads directly on the client to bypass limits on Vercel.\"\n          }), _jsx(_components.td, {})]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Google Cloud Storage\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/@payloadcms/storage-gcs\",\n        children: _jsx(_components.code, {\n          children: \"@payloadcms/storage-gcs\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Installation#gcs-installation\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-sh\",\n        children: \"pnpm add @payloadcms/storage-gcs\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Usage#gcs-usage\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Configure the \", _jsx(_components.code, {\n          children: \"collections\"\n        }), \" object to specify which collections should use the Google Cloud Storage adapter. The slug \", _jsx(_components.em, {\n          children: \"must\"\n        }), \" match one of your existing collection slugs.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When enabled, this package will automatically set \", _jsx(_components.code, {\n          children: \"disableLocalStorage\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" for each collection.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When deploying to Vercel, server uploads are limited with 4.5MB. Set \", _jsx(_components.code, {\n          children: \"clientUploads\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" to do uploads directly on the client. You must allow CORS PUT method for the bucket to your website.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { gcsStorage } from '@payloadcms/storage-gcs'\\nimport { Media } from './collections/Media'\\nimport { MediaWithPrefix } from './collections/MediaWithPrefix'\\n\\nexport default buildConfig({\\n  collections: [Media, MediaWithPrefix],\\n  plugins: [\\n    gcsStorage({\\n      collections: {\\n        media: true,\\n        'media-with-prefix': {\\n          prefix,\\n        },\\n      },\\n      bucket: process.env.GCS_BUCKET,\\n      options: {\\n        apiEndpoint: process.env.GCS_ENDPOINT,\\n        projectId: process.env.GCS_PROJECT_ID,\\n      },\\n    }),\\n  ],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configuration Options#gcs-configuration\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          }), _jsx(_components.th, {\n            children: \"Default\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"enabled\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Whether or not to enable the plugin\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"true\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"collections\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Collections to apply the storage to\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"bucket\"\n            })\n          }), _jsx(_components.td, {\n            children: \"The name of the bucket to use\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"options\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Google Cloud Storage client configuration. See \", _jsx(_components.a, {\n              href: \"https://github.com/googleapis/nodejs-storage\",\n              children: \"Docs\"\n            })]\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"acl\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Access control list for files that are uploaded\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"Private\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"clientUploads\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Do uploads directly on the client to bypass limits on Vercel.\"\n          }), _jsx(_components.td, {})]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Uploadthing Storage\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/@payloadcms/storage-uploadthing\",\n        children: _jsx(_components.code, {\n          children: \"@payloadcms/storage-uploadthing\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Installation#uploadthing-installation\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-sh\",\n        children: \"pnpm add @payloadcms/storage-uploadthing\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Usage#uploadthing-usage\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Configure the \", _jsx(_components.code, {\n          children: \"collections\"\n        }), \" object to specify which collections should use uploadthing. The slug \", _jsx(_components.em, {\n          children: \"must\"\n        }), \" match one of your existing collection slugs and be an \", _jsx(_components.code, {\n          children: \"upload\"\n        }), \" type.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Get a token from Uploadthing and set it as \", _jsx(_components.code, {\n          children: \"token\"\n        }), \" in the \", _jsx(_components.code, {\n          children: \"options\"\n        }), \" object.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"acl\"\n        }), \" is optional and defaults to \", _jsx(_components.code, {\n          children: \"public-read\"\n        }), \".\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"When deploying to Vercel, server uploads are limited with 4.5MB. Set \", _jsx(_components.code, {\n          children: \"clientUploads\"\n        }), \" to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \" to do uploads directly on the client.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"export default buildConfig({\\n  collections: [Media],\\n  plugins: [\\n    uploadthingStorage({\\n      collections: {\\n        media: true,\\n      },\\n      options: {\\n        token: process.env.UPLOADTHING_TOKEN,\\n        acl: 'public-read',\\n      },\\n    }),\\n  ],\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Configuration Options#uploadthing-configuration\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          }), _jsx(_components.th, {\n            children: \"Default\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"token\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Token from Uploadthing. Required.\"\n          }), _jsx(_components.td, {})]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"acl\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Access control list for files that are uploaded\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"public-read\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"logLevel\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Log level for Uploadthing\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"info\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"fetch\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Custom fetch function\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"fetch\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"defaultKeyType\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Default key type for file operations\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"fileKey\"\n            })\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"clientUploads\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Do uploads directly on the client to bypass limits on Vercel.\"\n          }), _jsx(_components.td, {})]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Custom Storage Adapters\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you need to create a custom storage adapter, you can use the \", _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/@payloadcms/plugin-cloud-storage\",\n        children: _jsx(_components.code, {\n          children: \"@payloadcms/plugin-cloud-storage\"\n        })\n      }), \" package. This package is used internally by the storage adapters mentioned above.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Installation#custom-installation\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"pnpm add @payloadcms/plugin-cloud-storage\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Usage#custom-usage\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Reference any of the existing storage adapters for guidance on how this should be structured. Create an adapter following the \", _jsx(_components.code, {\n        children: \"GeneratedAdapter\"\n      }), \" interface. Then, pass the adapter to the \", _jsx(_components.code, {\n        children: \"cloudStorage\"\n      }), \" plugin.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"export interface GeneratedAdapter {\\n  /**\\n   * Additional fields to be injected into the base collection and image sizes\\n   */\\n  fields?: Field[]\\n  /**\\n   * Generates the public URL for a file\\n   */\\n  generateURL?: GenerateURL\\n  handleDelete: HandleDelete\\n  handleUpload: HandleUpload\\n  name: string\\n  onInit?: () =\u003e void\\n  staticHandler: StaticHandler\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from 'payload'\\nimport { cloudStoragePlugin } from '@payloadcms/plugin-cloud-storage'\\n\\nexport default buildConfig({\\n  plugins: [\\n    cloudStorage({\\n      collections: {\\n        'my-collection-slug': {\\n          adapter: theAdapterToUse, // see docs for the adapter you want to use\\n        },\\n      },\\n    }),\\n  ],\\n  // The rest of your config goes here\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Plugin options\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This plugin is configurable to work across many different Payload collections. A \", _jsx(_components.code, {\n        children: \"*\"\n      }), \" denotes that the property is required.\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Type\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsxs(_components.td, {\n            children: [_jsx(_components.code, {\n              children: \"collections\"\n            }), \" *\"]\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"Record\u003cstring, CollectionOptions\u003e\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Object with keys set to the slug of collections you want to enable the plugin for, and values set to collection-specific options.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"enabled\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"boolean\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"To conditionally enable/disable plugin. Default: \", _jsx(_components.code, {\n              children: \"true\"\n            }), \".\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Collection-specific options\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Type\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsxs(_components.td, {\n            children: [_jsx(_components.code, {\n              children: \"adapter\"\n            }), \" *\"]\n          }), _jsx(_components.td, {\n            children: _jsx(_components.a, {\n              href: \"https://github.com/payloadcms/payload/blob/main/packages/plugin-cloud-storage/src/types.ts#L49\",\n              children: \"Adapter\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Pass in the adapter that you'd like to use for this collection. You can also set this field to \", _jsx(_components.code, {\n              children: \"null\"\n            }), \" for local development if you'd like to bypass cloud storage in certain scenarios and use local storage.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"disableLocalStorage\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"boolean\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Choose to disable local storage on this collection. Defaults to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"disablePayloadAccessControl\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"true\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to disable Payload's Access Control. \", _jsx(_components.a, {\n              href: \"#payload-access-control\",\n              children: \"More\"\n            })]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"prefix\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"string\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"media/images\"\n            }), \" to upload files inside \", _jsx(_components.code, {\n              children: \"media/images\"\n            }), \" folder in the bucket.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"generateFileURL\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.a, {\n              href: \"https://github.com/payloadcms/payload/blob/main/packages/plugin-cloud-storage/src/types.ts#L67\",\n              children: \"GenerateFileURL\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Override the generated file URL with one that you create.\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Payload Access Control\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Payload ships with \", _jsx(_components.a, {\n        href: \"../access-control/overview\",\n        children: \"Access Control\"\n      }), \" that runs \", _jsx(_components.em, {\n        children: \"even on statically served files\"\n      }), \". The same \", _jsx(_components.code, {\n        children: \"read\"\n      }), \" Access Control property on your \", _jsx(_components.code, {\n        children: \"upload\"\n      }), \"-enabled collections is used, and it allows you to restrict who can request your uploaded files.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To preserve this feature, by default, this plugin \", _jsx(_components.em, {\n        children: \"keeps all file URLs exactly the same\"\n      }), \". Your file URLs won't be updated to point directly to your cloud storage source, as in that case, Payload's Access control will be completely bypassed and you would need public readability on your cloud-hosted files.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Instead, all uploads will still be reached from the default \", _jsx(_components.code, {\n        children: \"/collectionSlug/staticURL/filename\"\n      }), \" path. This plugin will \\\"pass through\\\" all files that are hosted on your third-party cloud service—with the added benefit of keeping your existing Access Control in place.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If this does not apply to you (your upload collection has \", _jsx(_components.code, {\n        children: \"read: () =\u003e true\"\n      }), \" or similar) you can disable this functionality by setting \", _jsx(_components.code, {\n        children: \"disablePayloadAccessControl\"\n      }), \" to \", _jsx(_components.code, {\n        children: \"true\"\n      }), \". When this setting is in place, this plugin will update your file URLs to point directly to your cloud host.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Conditionally Enabling/Disabling\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The proper way to conditionally enable/disable this plugin is to use the \", _jsx(_components.code, {\n        children: \"enabled\"\n      }), \" property.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"cloudStoragePlugin({\\n  enabled: process.env.MY_CONDITION === 'true',\\n  collections: {\\n    'my-collection-slug': {\\n      adapter: theAdapterToUse, // see docs for the adapter you want to use\\n    },\\n  },\\n}),\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["upload","storage-adapters"]},"buildId":"DHzIn8D_gRO4uRLrnkzxV","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>