<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-f6932393d0a8e091.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">MongoDB</h1><p class="text-xl text-gray-600 mb-8">Payload has supported MongoDB natively since we started. The flexible nature of MongoDB lends itself well to Payload&#x27;s powerful fields.</p><div class="prose prose-lg max-w-none"><p>To use Payload with MongoDB, install the package <code>@payloadcms/db-mongodb</code>. It will come with everything you need to
store your Payload data in MongoDB.</p>
<p>Then from there, pass it to your Payload Config as follows:</p>
<pre><code class="language-ts">import { mongooseAdapter } from &#x27;@payloadcms/db-mongodb&#x27;

export default buildConfig({
  // Your config goes here
  collections: [
    // Collections go here
  ],
  // Configure the Mongoose adapter here
  db: mongooseAdapter({
    // Mongoose-specific arguments go here.
    // URL is required.
    url: process.env.DATABASE_URI,
  }),
})
</code></pre>
<h2>Options</h2>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>autoPluralization</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Tell Mongoose to auto-pluralize any collection names if it encounters any singular words used as collection <code>slug</code>s.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>connectOptions</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Customize MongoDB connection options. Payload will connect to your MongoDB database using default options which you can override and extend to include all the <a href="https://mongoosejs.com/docs/connections.html#options">options</a> available to mongoose.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>collectionsSchemaOptions</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Customize Mongoose schema options for collections.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>disableIndexHints</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to true to disable hinting to MongoDB to use &#x27;id&#x27; as index. This is currently done when counting documents for pagination, as it increases the speed of the count function used in that query. Disabling this optimization might fix some problems with AWS DocumentDB. Defaults to false</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>migrationDir</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Customize the directory that migrations are stored.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>transactionOptions</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">An object with configuration properties used in <a href="https://www.mongodb.com/docs/manual/core/transactions/">transactions</a> or <code>false</code> which will disable the use of transactions.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>collation</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Enable language-specific string comparison with customizable options. Available on MongoDB 3.4+. Defaults locale to &quot;en&quot;. Example: <code>{ strength: 3 }</code>. For a full list of collation options and their definitions, see the <a href="https://www.mongodb.com/docs/manual/reference/collation/">MongoDB documentation</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>allowAdditionalKeys</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">By default, Payload strips all additional keys from MongoDB data that don&#x27;t exist in the Payload schema. If you have some data that you want to include to the result but it doesn&#x27;t exist in Payload, you can set this to <code>true</code>. Be careful as Payload access control <em>won&#x27;t</em> work for this data.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><code>allowIDOnCreate</code></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Set to <code>true</code> to use the <code>id</code> passed in data on the create API operations without using a custom ID field.</td></tr></tbody></table></div>
<h2>Access to Mongoose models</h2>
<p>After Payload is initialized, this adapter exposes all of your Mongoose models and they are available for you to work
with directly.</p>
<p>You can access Mongoose models as follows:</p>
<ul>
<li>Collection models - <code>payload.db.collections[myCollectionSlug]</code></li>
<li>Globals model - <code>payload.db.globals</code></li>
<li>Versions model (both collections and globals) - <code>payload.db.versions[myEntitySlug]</code></li>
</ul>
<h2>Using other MongoDB implementations</h2>
<p>Limitations with <a href="https://aws.amazon.com/documentdb/">DocumentDB</a> and <a href="https://azure.microsoft.com/en-us/products/cosmos-db">Azure Cosmos DB</a>:</p>
<ul>
<li>For Azure Cosmos DB you must pass <code>transactionOptions: false</code> to the adapter options. Azure Cosmos DB does not support transactions that update two and more documents in different collections, which is a common case when using Payload (via hooks).</li>
<li>For Azure Cosmos DB the root config property <code>indexSortableFields</code> must be set to <code>true</code>.</li>
<li>The <a href="../fields/join">Join Field</a> is not supported in DocumentDB and Azure Cosmos DB, as we internally use MongoDB aggregations to query data for that field, which are limited there. This can be changed in the future.</li>
<li>For DocumentDB pass <code>disableIndexHints: true</code> to disable hinting to the DB to use <code>id</code> as index which can cause problems with DocumentDB.</li>
</ul></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"MongoDB","label":"MongoDB","order":40,"desc":"Payload has supported MongoDB natively since we started. The flexible nature of MongoDB lends itself well to Payload's powerful fields.","keywords":"MongoDB, documentation, typescript, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    code: \"code\",\n    pre: \"pre\",\n    h2: \"h2\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    a: \"a\",\n    em: \"em\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"To use Payload with MongoDB, install the package \", _jsx(_components.code, {\n        children: \"@payloadcms/db-mongodb\"\n      }), \". It will come with everything you need to\\nstore your Payload data in MongoDB.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Then from there, pass it to your Payload Config as follows:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { mongooseAdapter } from '@payloadcms/db-mongodb'\\n\\nexport default buildConfig({\\n  // Your config goes here\\n  collections: [\\n    // Collections go here\\n  ],\\n  // Configure the Mongoose adapter here\\n  db: mongooseAdapter({\\n    // Mongoose-specific arguments go here.\\n    // URL is required.\\n    url: process.env.DATABASE_URI,\\n  }),\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Options\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"autoPluralization\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Tell Mongoose to auto-pluralize any collection names if it encounters any singular words used as collection \", _jsx(_components.code, {\n              children: \"slug\"\n            }), \"s.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"connectOptions\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Customize MongoDB connection options. Payload will connect to your MongoDB database using default options which you can override and extend to include all the \", _jsx(_components.a, {\n              href: \"https://mongoosejs.com/docs/connections.html#options\",\n              children: \"options\"\n            }), \" available to mongoose.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"collectionsSchemaOptions\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Customize Mongoose schema options for collections.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"disableIndexHints\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Set to true to disable hinting to MongoDB to use 'id' as index. This is currently done when counting documents for pagination, as it increases the speed of the count function used in that query. Disabling this optimization might fix some problems with AWS DocumentDB. Defaults to false\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"migrationDir\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Customize the directory that migrations are stored.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"transactionOptions\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"An object with configuration properties used in \", _jsx(_components.a, {\n              href: \"https://www.mongodb.com/docs/manual/core/transactions/\",\n              children: \"transactions\"\n            }), \" or \", _jsx(_components.code, {\n              children: \"false\"\n            }), \" which will disable the use of transactions.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"collation\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Enable language-specific string comparison with customizable options. Available on MongoDB 3.4+. Defaults locale to \\\"en\\\". Example: \", _jsx(_components.code, {\n              children: \"{ strength: 3 }\"\n            }), \". For a full list of collation options and their definitions, see the \", _jsx(_components.a, {\n              href: \"https://www.mongodb.com/docs/manual/reference/collation/\",\n              children: \"MongoDB documentation\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"allowAdditionalKeys\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"By default, Payload strips all additional keys from MongoDB data that don't exist in the Payload schema. If you have some data that you want to include to the result but it doesn't exist in Payload, you can set this to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \". Be careful as Payload access control \", _jsx(_components.em, {\n              children: \"won't\"\n            }), \" work for this data.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"allowIDOnCreate\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Set to \", _jsx(_components.code, {\n              children: \"true\"\n            }), \" to use the \", _jsx(_components.code, {\n              children: \"id\"\n            }), \" passed in data on the create API operations without using a custom ID field.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Access to Mongoose models\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"After Payload is initialized, this adapter exposes all of your Mongoose models and they are available for you to work\\nwith directly.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You can access Mongoose models as follows:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Collection models - \", _jsx(_components.code, {\n          children: \"payload.db.collections[myCollectionSlug]\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Globals model - \", _jsx(_components.code, {\n          children: \"payload.db.globals\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Versions model (both collections and globals) - \", _jsx(_components.code, {\n          children: \"payload.db.versions[myEntitySlug]\"\n        })]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Using other MongoDB implementations\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Limitations with \", _jsx(_components.a, {\n        href: \"https://aws.amazon.com/documentdb/\",\n        children: \"DocumentDB\"\n      }), \" and \", _jsx(_components.a, {\n        href: \"https://azure.microsoft.com/en-us/products/cosmos-db\",\n        children: \"Azure Cosmos DB\"\n      }), \":\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"For Azure Cosmos DB you must pass \", _jsx(_components.code, {\n          children: \"transactionOptions: false\"\n        }), \" to the adapter options. Azure Cosmos DB does not support transactions that update two and more documents in different collections, which is a common case when using Payload (via hooks).\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"For Azure Cosmos DB the root config property \", _jsx(_components.code, {\n          children: \"indexSortableFields\"\n        }), \" must be set to \", _jsx(_components.code, {\n          children: \"true\"\n        }), \".\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"The \", _jsx(_components.a, {\n          href: \"../fields/join\",\n          children: \"Join Field\"\n        }), \" is not supported in DocumentDB and Azure Cosmos DB, as we internally use MongoDB aggregations to query data for that field, which are limited there. This can be changed in the future.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"For DocumentDB pass \", _jsx(_components.code, {\n          children: \"disableIndexHints: true\"\n        }), \" to disable hinting to the DB to use \", _jsx(_components.code, {\n          children: \"id\"\n        }), \" as index which can cause problems with DocumentDB.\"]\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["database","mongodb"]},"buildId":"DHzIn8D_gRO4uRLrnkzxV","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>