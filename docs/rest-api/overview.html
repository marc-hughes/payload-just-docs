<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-f6932393d0a8e091.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">REST API</h1><p class="text-xl text-gray-600 mb-8">Payload generates a fully functional REST API from your Collection and Global configs.</p><div class="prose prose-lg max-w-none"><div class="p-4 my-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p>A fully functional REST API is automatically generated from your Collection
and Global configs.</p></div>
<p>The REST API is a fully functional HTTP client that allows you to interact with your Documents in a RESTful manner. It supports all CRUD operations and is equipped with automatic pagination, depth, and sorting.
All Payload API routes are mounted and prefixed to your config&#x27;s <code>routes.api</code> URL segment (default: <code>/api</code>).</p>
<p><strong>REST query parameters:</strong></p>
<ul>
<li><a href="../queries/depth">depth</a> - automatically populates relationships and uploads</li>
<li><a href="/payload-just-docs/docs/configuration/localization#retrieving-localized-docs">locale</a> - retrieves document(s) in a specific locale</li>
<li><a href="/payload-just-docs/docs/configuration/localization#retrieving-localized-docs">fallback-locale</a> - specifies a fallback locale if no locale value exists</li>
<li><a href="../queries/select">select</a> - specifies which fields to include to the result</li>
<li><a href="../queries/select#populate">populate</a> - specifies which fields to include to the result from populated documents</li>
<li><a href="../queries/pagination#pagination-controls">limit</a> - limits the number of documents returned</li>
<li><a href="../queries/pagination#pagination-controls">page</a> - specifies which page to get documents from when used with a limit</li>
<li><a href="../queries/sort#rest-api">sort</a> - specifies the field(s) to use to sort the returned documents by</li>
<li><a href="../queries/overview">where</a> - specifies advanced filters to use to query documents</li>
<li><a href="/payload-just-docs/docs/fields/join#rest-api">joins</a> - specifies the custom request for each join field by name of the field</li>
</ul>
<h2>Collections</h2>
<p>Each collection is mounted using its <code>slug</code> value. For example, if a collection&#x27;s slug is <code>users</code>, all corresponding routes will be mounted on <code>/api/users</code>.</p>
<p>Note: Collection slugs must be formatted in kebab-case</p>
<p><strong>All CRUD operations are exposed as follows:</strong></p>
<div class="space-y-4 my-8"><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">GET</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Find paginated documents</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">GET</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}/{id}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Find a specific document by ID</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">GET</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}/count</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Count the documents</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Create a new document</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">PATCH</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Update all documents matching the where query</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">PATCH</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}/{id}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Update a document by ID</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">DELETE</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Delete all documents matching the where query</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">DELETE</span> <span class="text-gray-800 dark:text-gray-200">/api/{collection-slug}/{id}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Delete an existing document by ID</div></div></div>
<h2>Auth Operations</h2>
<p>Auth enabled collections are also given the following endpoints:</p>
<div class="space-y-4 my-8"><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/login</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Logs in a user with email / password</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/logout</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Logs out a user</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/unlock</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Unlock a user account</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/refresh-token</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Refreshes a token that has not yet expired</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/verify/{token}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">User verification</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">GET</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/me</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Returns the currently logged in user with token</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/forgot-password</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Password reset workflow entry point</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/{user-collection}/reset-password</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Reset user password</div></div></div>
<h2>Globals</h2>
<p>Globals cannot be created or deleted, so there are only two REST endpoints opened:</p>
<div class="space-y-4 my-8"><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">GET</span> <span class="text-gray-800 dark:text-gray-200">/api/globals/{global-slug}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Get a global by slug</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/globals/{global-slug}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Update a global by slug</div></div></div>
<h2>Preferences</h2>
<p>In addition to the dynamically generated endpoints above Payload also has REST endpoints to manage the admin user <a href="/payload-just-docs/docs/admin/preferences">preferences</a> for data specific to the authenticated user.</p>
<div class="space-y-4 my-8"><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">GET</span> <span class="text-gray-800 dark:text-gray-200">/api/payload-preferences/{key}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Get a preference by key</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">POST</span> <span class="text-gray-800 dark:text-gray-200">/api/payload-preferences/{key}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Create or update a preference by key</div></div><div class="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900"><div class="font-mono"><span class="text-blue-600 dark:text-blue-400">DELETE</span> <span class="text-gray-800 dark:text-gray-200">/api/payload-preferences/{key}</span></div><div class="mt-2 text-sm text-gray-600 dark:text-gray-400">Delete a preference by key</div></div></div>
<h2>Custom Endpoints</h2>
<p>Additional REST API endpoints can be added to your application by providing an array of <code>endpoints</code> in various places within a Payload Config. Custom endpoints are useful for adding additional middleware on existing routes or for building custom functionality into Payload apps and plugins. Endpoints can be added at the top of the Payload Config, <code>collections</code>, and <code>globals</code> and accessed respective of the api and slugs you have configured.</p>
<div class="p-4 my-4 rounded-lg border bg-yellow-50 border-yellow-200 text-yellow-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg><p>Custom endpoints are not authenticated by default. You are responsible for
securing your own endpoints.</p></div>
<p>Each endpoint object needs to have:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Property</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>path</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A string for the endpoint route after the collection or globals slug</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>method</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The lowercase HTTP verb to use: &#x27;get&#x27;, &#x27;head&#x27;, &#x27;post&#x27;, &#x27;put&#x27;, &#x27;delete&#x27;, &#x27;connect&#x27; or &#x27;options&#x27;</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>handler</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">A function that accepts <strong>req</strong> - <code>PayloadRequest</code> object which contains <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Web Request</a> properties, currently authenticated <code>user</code> and the Local API instance <code>payload</code>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>root</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">When <code>true</code>, defines the endpoint on the root Next.js app, bypassing Payload handlers and the <code>routes.api</code> subpath. Note: this only applies to top-level endpoints of your Payload Config, endpoints defined on <code>collections</code> or <code>globals</code> cannot be root.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>custom</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Extension point for adding custom data (e.g. for plugins)</td></tr></tbody></table></div>
<p>Example:</p>
<pre><code class="language-ts">import type { CollectionConfig } from &#x27;payload&#x27;

// a collection of &#x27;orders&#x27; with an additional route for tracking details, reachable at /api/orders/:id/tracking
export const Orders: CollectionConfig = {
  slug: &#x27;orders&#x27;,
  fields: [
    /* ... */
  ],
  // highlight-start
  endpoints: [
    {
      path: &#x27;/:id/tracking&#x27;,
      method: &#x27;get&#x27;,
      handler: async (req) =&gt; {
        const tracking = await getTrackingInfo(req.routeParams.id)

        if (!tracking) {
          return Response.json({ error: &#x27;not found&#x27; }, { status: 404 })
        }

        return Response.json({
          message: `Hello ${req.routeParams.name as string} @ ${req.routeParams.group as string}`,
        })
      },
    },
    {
      path: &#x27;/:id/tracking&#x27;,
      method: &#x27;post&#x27;,
      handler: async (req) =&gt; {
        // `data` is not automatically appended to the request
        // if you would like to read the body of the request
        // you can use `data = await req.json()`
        const data = await req.json()
        await req.payload.update({
          collection: &#x27;tracking&#x27;,
          data: {
            // data to update the document with
          },
        })
        return Response.json({
          message: &#x27;successfully updated tracking info&#x27;,
        })
      },
    },
    {
      path: &#x27;/:id/forbidden&#x27;,
      method: &#x27;post&#x27;,
      handler: async (req) =&gt; {
        // this is an example of an authenticated endpoint
        if (!req.user) {
          return Response.json({ error: &#x27;forbidden&#x27; }, { status: 403 })
        }

        // do something

        return Response.json({
          message: &#x27;successfully updated tracking info&#x27;,
        })
      },
    },
  ],
  // highlight-end
}
</code></pre>
<div class="p-4 my-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p><strong>Note:</strong> <strong>req</strong> will have the <strong>payload</strong> object and can be used inside your
endpoint handlers for making calls like req.payload.find() that will make use
of <a href="../access-control/overview">Access Control</a> and
<a href="../hooks/overview">Hooks</a>.</p></div>
<h4>Helpful tips</h4>
<p><code>req.data</code></p>
<p>Data is not automatically appended to the request. You can read the body data by calling <code>await req.json()</code>.</p>
<p>Or you could use our helper function that mutates the request and appends data and file if found.</p>
<pre><code class="language-ts">import { addDataAndFileToRequest } from &#x27;payload&#x27;

// custom endpoint example
{
  path: &#x27;/:id/tracking&#x27;,
  method: &#x27;post&#x27;,
  handler: async (req) =&gt; {
    await addDataAndFileToRequest(req)
    await req.payload.update({
      collection: &#x27;tracking&#x27;,
      data: {
        // data to update the document with
      }
    })
    return Response.json({
      message: &#x27;successfully updated tracking info&#x27;
    })
  }
}
</code></pre>
<p><code>req.locale</code> &amp; <code>req.fallbackLocale</code></p>
<p>The locale and the fallback locale are not automatically appended to custom endpoint requests. If you would like to add them you can use this helper function.</p>
<pre><code class="language-ts">import { addLocalesToRequestFromData } from &#x27;payload&#x27;

// custom endpoint example
{
  path: &#x27;/:id/tracking&#x27;,
  method: &#x27;post&#x27;,
  handler: async (req) =&gt; {
    await addLocalesToRequestFromData(req)
    // you now can access req.locale &amp; req.fallbackLocale
    return Response.json({ message: &#x27;success&#x27; })
  }
}
</code></pre>
<p><code>headersWithCors</code></p>
<p>By default, custom endpoints don&#x27;t handle CORS headers in responses. The <code>headersWithCors</code> function checks the Payload config and sets the appropriate CORS headers in the response accordingly.</p>
<pre><code class="language-ts">import { headersWithCors } from &#x27;payload&#x27;

// custom endpoint example
{
  path: &#x27;/:id/tracking&#x27;,
  method: &#x27;post&#x27;,
  handler: async (req) =&gt; {
    return Response.json(
      { message: &#x27;success&#x27; },
      {
        headers: headersWithCors({
          headers: new Headers(),
          req,
        })
      },
    )
  }
}
</code></pre>
<h2>Method Override for GET Requests</h2>
<p>Payload supports a method override feature that allows you to send GET requests using the HTTP POST method. This can be particularly useful in scenarios when the query string in a regular GET request is too long.</p>
<h3>How to Use</h3>
<p>To use this feature, include the <code>X-HTTP-Method-Override</code> header set to <code>GET</code> in your POST request. The parameters should be sent in the body of the request with the <code>Content-Type</code> set to <code>application/x-www-form-urlencoded</code>.</p>
<h3>Example</h3>
<p>Here is an example of how to use the method override to perform a GET request:</p>
<h4>Using Method Override (POST)</h4>
<pre><code class="language-ts">const res = await fetch(`${api}/${collectionSlug}`, {
  method: &#x27;POST&#x27;,
  credentials: &#x27;include&#x27;,
  headers: {
    &#x27;Accept-Language&#x27;: i18n.language,
    &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;,
    &#x27;X-HTTP-Method-Override&#x27;: &#x27;GET&#x27;,
  },
  body: qs.stringify({
    depth: 1,
    locale: &#x27;en&#x27;,
  }),
})
</code></pre>
<h4>Equivalent Regular GET Request</h4>
<pre><code class="language-ts">const res = await fetch(`${api}/${collectionSlug}?depth=1&amp;locale=en`, {
  method: &#x27;GET&#x27;,
  credentials: &#x27;include&#x27;,
  headers: {
    &#x27;Accept-Language&#x27;: i18n.language,
  },
})
</code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"REST API","label":"Overview","order":10,"desc":"Payload generates a fully functional REST API from your Collection and Global configs.","keywords":"rest, api, documentation, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    code: \"code\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\",\n    h2: \"h2\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    pre: \"pre\",\n    h4: \"h4\",\n    h3: \"h3\"\n  }, _provideComponents(), props.components), {Banner, RestExamples} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  if (!RestExamples) _missingMdxReference(\"RestExamples\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(Banner, {\n      children: _jsx(_components.p, {\n        children: \"A fully functional REST API is automatically generated from your Collection\\nand Global configs.\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The REST API is a fully functional HTTP client that allows you to interact with your Documents in a RESTful manner. It supports all CRUD operations and is equipped with automatic pagination, depth, and sorting.\\nAll Payload API routes are mounted and prefixed to your config's \", _jsx(_components.code, {\n        children: \"routes.api\"\n      }), \" URL segment (default: \", _jsx(_components.code, {\n        children: \"/api\"\n      }), \").\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"REST query parameters:\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"../queries/depth\",\n          children: \"depth\"\n        }), \" - automatically populates relationships and uploads\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"/docs/configuration/localization#retrieving-localized-docs\",\n          children: \"locale\"\n        }), \" - retrieves document(s) in a specific locale\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"/docs/configuration/localization#retrieving-localized-docs\",\n          children: \"fallback-locale\"\n        }), \" - specifies a fallback locale if no locale value exists\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"../queries/select\",\n          children: \"select\"\n        }), \" - specifies which fields to include to the result\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"../queries/select#populate\",\n          children: \"populate\"\n        }), \" - specifies which fields to include to the result from populated documents\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"../queries/pagination#pagination-controls\",\n          children: \"limit\"\n        }), \" - limits the number of documents returned\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"../queries/pagination#pagination-controls\",\n          children: \"page\"\n        }), \" - specifies which page to get documents from when used with a limit\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"../queries/sort#rest-api\",\n          children: \"sort\"\n        }), \" - specifies the field(s) to use to sort the returned documents by\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"../queries/overview\",\n          children: \"where\"\n        }), \" - specifies advanced filters to use to query documents\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.a, {\n          href: \"/docs/fields/join#rest-api\",\n          children: \"joins\"\n        }), \" - specifies the custom request for each join field by name of the field\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Collections\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Each collection is mounted using its \", _jsx(_components.code, {\n        children: \"slug\"\n      }), \" value. For example, if a collection's slug is \", _jsx(_components.code, {\n        children: \"users\"\n      }), \", all corresponding routes will be mounted on \", _jsx(_components.code, {\n        children: \"/api/users\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Note: Collection slugs must be formatted in kebab-case\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"All CRUD operations are exposed as follows:\"\n      })\n    }), \"\\n\", _jsx(RestExamples, {\n      data: [{\n        operation: \"Find\",\n        method: \"GET\",\n        path: \"/api/{collection-slug}\",\n        description: \"Find paginated documents\",\n        example: {\n          slug: \"getCollection\",\n          req: true,\n          res: {\n            paginated: true,\n            data: {\n              id: \"644a5c24cc1383022535fc7c\",\n              title: \"Home\",\n              content: \"REST API examples\",\n              slug: \"home\",\n              createdAt: \"2023-04-27T11:27:32.419Z\",\n              updatedAt: \"2023-04-27T11:27:32.419Z\"\n            }\n          },\n          drawerContent: `\n#### Additional \\`find\\` query parameters\n\nThe \\`find\\` endpoint supports the following additional query parameters:\n\n- [sort](/docs/queries/overview#sort) - sort by field\n- [where](/docs/queries/overview) - pass a where query to constrain returned documents\n- [limit](/docs/queries/pagination#pagination-controls) - limit the returned documents to a certain number\n- [page](/docs/queries/pagination#pagination-controls) - get a specific page of documents\n  `\n        }\n      }, {\n        operation: \"Find By ID\",\n        method: \"GET\",\n        path: \"/api/{collection-slug}/{id}\",\n        description: \"Find a specific document by ID\",\n        example: {\n          slug: \"findByID\",\n          req: true,\n          res: {\n            id: \"644a5c24cc1383022535fc7c\",\n            title: \"Home\",\n            content: \"REST API examples\",\n            slug: \"home\",\n            createdAt: \"2023-04-27T11:27:32.419Z\",\n            updatedAt: \"2023-04-27T11:27:32.419Z\"\n          }\n        }\n      }, {\n        operation: \"Count\",\n        method: \"GET\",\n        path: \"/api/{collection-slug}/count\",\n        description: \"Count the documents\",\n        example: {\n          slug: \"count\",\n          req: true,\n          res: {\n            totalDocs: 10\n          }\n        }\n      }, {\n        operation: \"Create\",\n        method: \"POST\",\n        path: \"/api/{collection-slug}\",\n        description: \"Create a new document\",\n        example: {\n          slug: \"createDocument\",\n          req: {\n            credentials: true,\n            headers: true,\n            body: {\n              title: \"New page\",\n              content: \"Here is some content\"\n            }\n          },\n          res: {\n            message: \"Page successfully created.\",\n            doc: {\n              id: \"644ba34c86359864f9535932\",\n              title: \"New page\",\n              content: \"Here is some content\",\n              slug: \"new-page\",\n              createdAt: \"2023-04-28T10:43:24.466Z\",\n              updatedAt: \"2023-04-28T10:43:24.466Z\"\n            }\n          }\n        }\n      }, {\n        operation: \"Update\",\n        method: \"PATCH\",\n        path: \"/api/{collection-slug}\",\n        description: \"Update all documents matching the where query\",\n        example: {\n          slug: \"updateDocument\",\n          req: {\n            credentials: true,\n            query: true,\n            headers: true,\n            body: {\n              title: \"I have been updated!\"\n            }\n          },\n          res: {\n            docs: [{\n              id: \"644ba34c86359864f9535932\",\n              title: \"I have been updated!\",\n              content: \"Here is some content\",\n              slug: \"new-page\",\n              createdAt: \"2023-04-28T10:43:24.466Z\",\n              updatedAt: \"2023-04-28T10:45:23.724Z\"\n            }],\n            errors: []\n          }\n        }\n      }, {\n        operation: \"Update By ID\",\n        method: \"PATCH\",\n        path: \"/api/{collection-slug}/{id}\",\n        description: \"Update a document by ID\",\n        example: {\n          slug: \"updateDocumentByID\",\n          req: {\n            credentials: true,\n            headers: true,\n            body: {\n              title: \"I have been updated by ID!\",\n              categories: \"example-uuid\",\n              tags: {\n                relationTo: \"location\",\n                value: \"another-example-uuid\"\n              }\n            }\n          },\n          res: {\n            message: \"Updated successfully.\",\n            doc: {\n              id: \"644a5c24cc1383022535fc7c\",\n              title: \"I have been updated by ID!\",\n              content: \"REST API examples\",\n              categories: {\n                id: \"example-uuid\",\n                name: \"Test Category\"\n              },\n              tags: [{\n                relationTo: \"location\",\n                value: {\n                  id: \"another-example-uuid\",\n                  name: \"Test Location\"\n                }\n              }],\n              slug: \"home\",\n              createdAt: \"2023-04-27T11:27:32.419Z\",\n              updatedAt: \"2023-04-28T10:47:59.259Z\"\n            }\n          }\n        }\n      }, {\n        operation: \"Delete\",\n        method: \"DELETE\",\n        path: \"/api/{collection-slug}\",\n        description: \"Delete all documents matching the where query\",\n        example: {\n          slug: \"deleteDocuments\",\n          req: {\n            credentials: true,\n            query: true,\n            headers: true\n          },\n          res: {\n            docs: [{\n              id: \"644ba4cf86359864f953594b\",\n              title: \"New page\",\n              content: \"Here is some content\",\n              slug: \"new-page\",\n              createdAt: \"2023-04-28T10:49:51.359Z\",\n              updatedAt: \"2023-04-28T10:49:51.359Z\"\n            }],\n            errors: []\n          }\n        }\n      }, {\n        operation: \"Delete by ID\",\n        method: \"DELETE\",\n        path: \"/api/{collection-slug}/{id}\",\n        description: \"Delete an existing document by ID\",\n        example: {\n          slug: \"deleteByID\",\n          req: {\n            credentials: true,\n            headers: true\n          },\n          res: {\n            id: \"644ba51786359864f9535954\",\n            title: \"New page\",\n            content: \"Here is some content\",\n            slug: \"new-page\",\n            createdAt: \"2023-04-28T10:51:03.028Z\",\n            updatedAt: \"2023-04-28T10:51:03.028Z\"\n          }\n        }\n      }]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Auth Operations\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Auth enabled collections are also given the following endpoints:\"\n    }), \"\\n\", _jsx(RestExamples, {\n      data: [{\n        operation: \"Login\",\n        method: \"POST\",\n        path: \"/api/{user-collection}/login\",\n        description: \"Logs in a user with email / password\",\n        example: {\n          slug: \"login\",\n          req: {\n            credentials: true,\n            headers: true,\n            body: {\n              email: \"dev@payloadcms.com\",\n              password: \"password\"\n            }\n          },\n          res: {\n            message: \"Auth Passed\",\n            user: {\n              id: \"644b8453cd20c7857da5a9b0\",\n              email: \"dev@payloadcms.com\",\n              _verified: true,\n              createdAt: \"2023-04-28T08:31:15.788Z\",\n              updatedAt: \"2023-04-28T11:11:03.716Z\"\n            },\n            token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\",\n            exp: 1682689147\n          }\n        }\n      }, {\n        operation: \"Logout\",\n        method: \"POST\",\n        path: \"/api/{user-collection}/logout\",\n        description: \"Logs out a user\",\n        example: {\n          slug: \"logout\",\n          req: {\n            headers: true,\n            credentials: true\n          },\n          res: {\n            message: \"You have been logged out successfully.\"\n          }\n        }\n      }, {\n        operation: \"Unlock\",\n        method: \"POST\",\n        path: \"/api/{user-collection}/unlock\",\n        description: \"Unlock a user account\",\n        example: {\n          slug: \"unlockCollection\",\n          req: {\n            credentials: true,\n            headers: true,\n            body: {\n              email: \"dev@payloadcms.com\"\n            }\n          },\n          res: {\n            message: \"Success\"\n          }\n        }\n      }, {\n        operation: \"Refresh\",\n        method: \"POST\",\n        path: \"/api/{user-collection}/refresh-token\",\n        description: \"Refreshes a token that has not yet expired\",\n        example: {\n          slug: \"refreshToken\",\n          req: {\n            credentials: true,\n            headers: true\n          },\n          res: {\n            message: \"Token refresh successful\",\n            refreshedToken: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\",\n            exp: 1682689362,\n            user: {\n              email: \"dev@payloadcms.com\",\n              id: \"644b8453cd20c7857da5a9b0\",\n              collection: \"users\"\n            }\n          }\n        }\n      }, {\n        operation: \"Verify User\",\n        method: \"POST\",\n        path: \"/api/{user-collection}/verify/{token}\",\n        description: \"User verification\",\n        example: {\n          slug: \"verifyUser\",\n          req: {\n            credentials: true,\n            headers: true\n          },\n          res: {\n            message: \"Email verified successfully.\"\n          }\n        }\n      }, {\n        operation: \"Current User\",\n        method: \"GET\",\n        path: \"/api/{user-collection}/me\",\n        description: \"Returns the currently logged in user with token\",\n        example: {\n          slug: \"currentUser\",\n          req: {\n            credentials: true,\n            headers: true\n          },\n          res: {\n            user: {\n              id: \"644b8453cd20c7857da5a9b0\",\n              email: \"dev@payloadcms.com\",\n              _verified: true,\n              createdAt: \"2023-04-28T08:31:15.788Z\",\n              updatedAt: \"2023-04-28T11:45:23.926Z\",\n              _strategy: \"local-jwt\"\n            },\n            collection: \"users\",\n            token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\",\n            exp: 1682689523\n          }\n        }\n      }, {\n        operation: \"Forgot Password\",\n        method: \"POST\",\n        path: \"/api/{user-collection}/forgot-password\",\n        description: \"Password reset workflow entry point\",\n        example: {\n          slug: \"forgotPassword\",\n          req: {\n            headers: true,\n            credentials: true,\n            body: {\n              email: \"dev@payloadcms.com\"\n            }\n          },\n          res: {\n            message: \"Success\"\n          }\n        }\n      }, {\n        operation: \"Reset Password\",\n        method: \"POST\",\n        path: \"/api/{user-collection}/reset-password\",\n        description: \"Reset user password\",\n        example: {\n          slug: \"resetPassword\",\n          req: {\n            credentials: true,\n            headers: true,\n            body: {\n              token: \"7eac3830ffcfc7f9f66c00315dabeb11575dba91\",\n              password: \"newPassword\"\n            }\n          },\n          res: {\n            message: \"Password reset successfully.\",\n            token: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9\",\n            user: {\n              id: \"644baa473ea9538765cc30fc\",\n              email: \"dev@payloadcms.com\",\n              _verified: true,\n              createdAt: \"2023-04-28T11:13:11.569Z\",\n              updatedAt: \"2023-04-28T11:49:23.860Z\"\n            }\n          }\n        }\n      }]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Globals\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Globals cannot be created or deleted, so there are only two REST endpoints opened:\"\n    }), \"\\n\", _jsx(RestExamples, {\n      data: [{\n        operation: 'Get Global',\n        method: 'GET',\n        path: '/api/globals/{global-slug}',\n        description: 'Get a global by slug',\n        example: {\n          slug: 'getGlobal',\n          req: {\n            credentials: true,\n            headers: true\n          },\n          res: {\n            announcement: 'Here is an announcement!',\n            globalType: 'announcement',\n            createdAt: '2023-04-28T08:53:56.066Z',\n            updatedAt: '2023-04-28T08:53:56.066Z',\n            id: '644b89a496c64a833fe579c9'\n          }\n        }\n      }, {\n        operation: 'Update Global',\n        method: 'POST',\n        path: '/api/globals/{global-slug}',\n        description: 'Update a global by slug',\n        example: {\n          slug: 'updateGlobal',\n          req: {\n            headers: true,\n            credentials: true,\n            body: {\n              announcement: 'Paging Doctor Scrunt'\n            }\n          },\n          res: {\n            announcement: 'Paging Doctor Scrunt',\n            globalType: 'announcement',\n            createdAt: '2023-04-28T08:53:56.066Z',\n            updatedAt: '2023-04-28T08:53:56.066Z',\n            id: '644b89a496c64a833fe579c9'\n          }\n        }\n      }]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Preferences\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In addition to the dynamically generated endpoints above Payload also has REST endpoints to manage the admin user \", _jsx(_components.a, {\n        href: \"/docs/admin/preferences\",\n        children: \"preferences\"\n      }), \" for data specific to the authenticated user.\"]\n    }), \"\\n\", _jsx(RestExamples, {\n      data: [{\n        operation: 'Get Preference',\n        method: 'GET',\n        path: '/api/payload-preferences/{key}',\n        description: 'Get a preference by key',\n        example: {\n          slug: 'getPreference',\n          req: {\n            headers: true,\n            credentials: true\n          },\n          res: {\n            _id: '644bb7a8307b3d363c6edf2c',\n            key: 'region',\n            user: '644b8453cd20c7857da5a9b0',\n            userCollection: 'users',\n            __v: 0,\n            createdAt: '2023-04-28T12:10:16.689Z',\n            updatedAt: '2023-04-28T12:10:16.689Z',\n            value: 'Europe/London'\n          }\n        }\n      }, {\n        operation: 'Create Preference',\n        method: 'POST',\n        path: '/api/payload-preferences/{key}',\n        description: 'Create or update a preference by key',\n        example: {\n          slug: 'createPreference',\n          req: {\n            headers: true,\n            credentials: true,\n            body: {\n              value: 'Europe/London'\n            }\n          },\n          res: {\n            message: 'Updated successfully.',\n            doc: {\n              user: '644b8453cd20c7857da5a9b0',\n              key: 'region',\n              userCollection: 'users',\n              value: 'Europe/London'\n            }\n          }\n        }\n      }, {\n        operation: 'Delete Preference',\n        method: 'DELETE',\n        path: '/api/payload-preferences/{key}',\n        description: 'Delete a preference by key',\n        example: {\n          slug: 'deletePreference',\n          req: {\n            headers: true\n          },\n          res: {\n            message: 'deletedSuccessfully'\n          }\n        }\n      }]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Custom Endpoints\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Additional REST API endpoints can be added to your application by providing an array of \", _jsx(_components.code, {\n        children: \"endpoints\"\n      }), \" in various places within a Payload Config. Custom endpoints are useful for adding additional middleware on existing routes or for building custom functionality into Payload apps and plugins. Endpoints can be added at the top of the Payload Config, \", _jsx(_components.code, {\n        children: \"collections\"\n      }), \", and \", _jsx(_components.code, {\n        children: \"globals\"\n      }), \" and accessed respective of the api and slugs you have configured.\"]\n    }), \"\\n\", _jsx(Banner, {\n      type: \"warning\",\n      children: _jsx(_components.p, {\n        children: \"Custom endpoints are not authenticated by default. You are responsible for\\nsecuring your own endpoints.\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Each endpoint object needs to have:\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Property\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"path\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"A string for the endpoint route after the collection or globals slug\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"method\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The lowercase HTTP verb to use: 'get', 'head', 'post', 'put', 'delete', 'connect' or 'options'\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"handler\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"A function that accepts \", _jsx(_components.strong, {\n              children: \"req\"\n            }), \" - \", _jsx(_components.code, {\n              children: \"PayloadRequest\"\n            }), \" object which contains \", _jsx(_components.a, {\n              href: \"https://developer.mozilla.org/en-US/docs/Web/API/Request\",\n              children: \"Web Request\"\n            }), \" properties, currently authenticated \", _jsx(_components.code, {\n              children: \"user\"\n            }), \" and the Local API instance \", _jsx(_components.code, {\n              children: \"payload\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"root\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"When \", _jsx(_components.code, {\n              children: \"true\"\n            }), \", defines the endpoint on the root Next.js app, bypassing Payload handlers and the \", _jsx(_components.code, {\n              children: \"routes.api\"\n            }), \" subpath. Note: this only applies to top-level endpoints of your Payload Config, endpoints defined on \", _jsx(_components.code, {\n              children: \"collections\"\n            }), \" or \", _jsx(_components.code, {\n              children: \"globals\"\n            }), \" cannot be root.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"custom\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Extension point for adding custom data (e.g. for plugins)\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Example:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\n// a collection of 'orders' with an additional route for tracking details, reachable at /api/orders/:id/tracking\\nexport const Orders: CollectionConfig = {\\n  slug: 'orders',\\n  fields: [\\n    /* ... */\\n  ],\\n  // highlight-start\\n  endpoints: [\\n    {\\n      path: '/:id/tracking',\\n      method: 'get',\\n      handler: async (req) =\u003e {\\n        const tracking = await getTrackingInfo(req.routeParams.id)\\n\\n        if (!tracking) {\\n          return Response.json({ error: 'not found' }, { status: 404 })\\n        }\\n\\n        return Response.json({\\n          message: `Hello ${req.routeParams.name as string} @ ${req.routeParams.group as string}`,\\n        })\\n      },\\n    },\\n    {\\n      path: '/:id/tracking',\\n      method: 'post',\\n      handler: async (req) =\u003e {\\n        // `data` is not automatically appended to the request\\n        // if you would like to read the body of the request\\n        // you can use `data = await req.json()`\\n        const data = await req.json()\\n        await req.payload.update({\\n          collection: 'tracking',\\n          data: {\\n            // data to update the document with\\n          },\\n        })\\n        return Response.json({\\n          message: 'successfully updated tracking info',\\n        })\\n      },\\n    },\\n    {\\n      path: '/:id/forbidden',\\n      method: 'post',\\n      handler: async (req) =\u003e {\\n        // this is an example of an authenticated endpoint\\n        if (!req.user) {\\n          return Response.json({ error: 'forbidden' }, { status: 403 })\\n        }\\n\\n        // do something\\n\\n        return Response.json({\\n          message: 'successfully updated tracking info',\\n        })\\n      },\\n    },\\n  ],\\n  // highlight-end\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Note:\"\n        }), \" \", _jsx(_components.strong, {\n          children: \"req\"\n        }), \" will have the \", _jsx(_components.strong, {\n          children: \"payload\"\n        }), \" object and can be used inside your\\nendpoint handlers for making calls like req.payload.find() that will make use\\nof \", _jsx(_components.a, {\n          href: \"../access-control/overview\",\n          children: \"Access Control\"\n        }), \" and\\n\", _jsx(_components.a, {\n          href: \"../hooks/overview\",\n          children: \"Hooks\"\n        }), \".\"]\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Helpful tips\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"req.data\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Data is not automatically appended to the request. You can read the body data by calling \", _jsx(_components.code, {\n        children: \"await req.json()\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Or you could use our helper function that mutates the request and appends data and file if found.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { addDataAndFileToRequest } from 'payload'\\n\\n// custom endpoint example\\n{\\n  path: '/:id/tracking',\\n  method: 'post',\\n  handler: async (req) =\u003e {\\n    await addDataAndFileToRequest(req)\\n    await req.payload.update({\\n      collection: 'tracking',\\n      data: {\\n        // data to update the document with\\n      }\\n    })\\n    return Response.json({\\n      message: 'successfully updated tracking info'\\n    })\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"req.locale\"\n      }), \" \u0026 \", _jsx(_components.code, {\n        children: \"req.fallbackLocale\"\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The locale and the fallback locale are not automatically appended to custom endpoint requests. If you would like to add them you can use this helper function.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { addLocalesToRequestFromData } from 'payload'\\n\\n// custom endpoint example\\n{\\n  path: '/:id/tracking',\\n  method: 'post',\\n  handler: async (req) =\u003e {\\n    await addLocalesToRequestFromData(req)\\n    // you now can access req.locale \u0026 req.fallbackLocale\\n    return Response.json({ message: 'success' })\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"headersWithCors\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"By default, custom endpoints don't handle CORS headers in responses. The \", _jsx(_components.code, {\n        children: \"headersWithCors\"\n      }), \" function checks the Payload config and sets the appropriate CORS headers in the response accordingly.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { headersWithCors } from 'payload'\\n\\n// custom endpoint example\\n{\\n  path: '/:id/tracking',\\n  method: 'post',\\n  handler: async (req) =\u003e {\\n    return Response.json(\\n      { message: 'success' },\\n      {\\n        headers: headersWithCors({\\n          headers: new Headers(),\\n          req,\\n        })\\n      },\\n    )\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Method Override for GET Requests\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Payload supports a method override feature that allows you to send GET requests using the HTTP POST method. This can be particularly useful in scenarios when the query string in a regular GET request is too long.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"How to Use\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To use this feature, include the \", _jsx(_components.code, {\n        children: \"X-HTTP-Method-Override\"\n      }), \" header set to \", _jsx(_components.code, {\n        children: \"GET\"\n      }), \" in your POST request. The parameters should be sent in the body of the request with the \", _jsx(_components.code, {\n        children: \"Content-Type\"\n      }), \" set to \", _jsx(_components.code, {\n        children: \"application/x-www-form-urlencoded\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Example\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Here is an example of how to use the method override to perform a GET request:\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Using Method Override (POST)\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"const res = await fetch(`${api}/${collectionSlug}`, {\\n  method: 'POST',\\n  credentials: 'include',\\n  headers: {\\n    'Accept-Language': i18n.language,\\n    'Content-Type': 'application/x-www-form-urlencoded',\\n    'X-HTTP-Method-Override': 'GET',\\n  },\\n  body: qs.stringify({\\n    depth: 1,\\n    locale: 'en',\\n  }),\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Equivalent Regular GET Request\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"const res = await fetch(`${api}/${collectionSlug}?depth=1\u0026locale=en`, {\\n  method: 'GET',\\n  credentials: 'include',\\n  headers: {\\n    'Accept-Language': i18n.language,\\n  },\\n})\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["rest-api","overview"]},"buildId":"DHzIn8D_gRO4uRLrnkzxV","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>