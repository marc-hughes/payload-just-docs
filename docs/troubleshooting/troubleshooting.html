<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-f6932393d0a8e091.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/DHzIn8D_gRO4uRLrnkzxV/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">Troubleshooting</h1><p class="text-xl text-gray-600 mb-8">Troubleshooting Common Issues in Payload</p><div class="prose prose-lg max-w-none"><h2>Common Issues</h2>
<h3>&quot;Unauthorized, you must be logged in to make this request&quot; when attempting to log in</h3>
<p>This means that your auth cookie is not being set or accepted correctly upon logging in. To resolve check the following settings in your Payload Config:</p>
<ul>
<li>CORS - If you are using the &#x27;*&#x27;, try to explicitly only allow certain domains instead including the one you have specified.</li>
<li>CSRF - Do you have this set? if so, make sure your domain is whitelisted within the csrf domains. If not, probably not the issue, but probably can&#x27;t hurt to whitelist it anyway.</li>
<li>Cookie settings. If these are completely undefined, then that&#x27;s fine. but if you have cookie domain set, or anything similar, make sure you don&#x27;t have the domain misconfigured</li>
</ul>
<p>This error likely means that the auth cookie that Payload sets after logging in successfully is being rejected because of misconfiguration.</p>
<p>To further investigate the issue:</p>
<ul>
<li>Go to the login screen. Open your inspector. Go to the Network tab.</li>
<li>Log in and then find the login request that should appear in your network panel. Click the login request.</li>
<li>The login request should have a Set-Cookie header on the response, and the cookie should be getting set successfully. If it is not, most browsers generally have a little yellow ⚠️ symbol that you can hover over to see why the cookie was rejected.</li>
</ul></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"Troubleshooting","label":"Troubleshooting","order":10,"desc":"Troubleshooting Common Issues in Payload","keywords":"admin, components, custom, customize, documentation, Content Management System, cms, headless, javascript, node, react, nextjs, troubleshooting"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    h3: \"h3\",\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h2, {\n      children: \"Common Issues\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"\\\"Unauthorized, you must be logged in to make this request\\\" when attempting to log in\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This means that your auth cookie is not being set or accepted correctly upon logging in. To resolve check the following settings in your Payload Config:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"CORS - If you are using the '*', try to explicitly only allow certain domains instead including the one you have specified.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"CSRF - Do you have this set? if so, make sure your domain is whitelisted within the csrf domains. If not, probably not the issue, but probably can't hurt to whitelist it anyway.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Cookie settings. If these are completely undefined, then that's fine. but if you have cookie domain set, or anything similar, make sure you don't have the domain misconfigured\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This error likely means that the auth cookie that Payload sets after logging in successfully is being rejected because of misconfiguration.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To further investigate the issue:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Go to the login screen. Open your inspector. Go to the Network tab.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Log in and then find the login request that should appear in your network panel. Click the login request.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"The login request should have a Set-Cookie header on the response, and the cookie should be getting set successfully. If it is not, most browsers generally have a little yellow ⚠️ symbol that you can hover over to see why the cookie was rejected.\"\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["troubleshooting","troubleshooting"]},"buildId":"DHzIn8D_gRO4uRLrnkzxV","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>