<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" as="style" crossorigin=""/><link rel="stylesheet" href="/payload-just-docs/_next/static/css/adeeaed65336a824.css" crossorigin="" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/payload-just-docs/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/payload-just-docs/_next/static/chunks/webpack-c335844537ee4527.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/framework-fae63b21a27d6472.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/main-4b5290d5009800e1.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/_app-2747846ed27f1501.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/chunks/pages/docs/%5B...slug%5D-e023289636109d90.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_buildManifest.js" defer="" crossorigin=""></script><script src="/payload-just-docs/_next/static/pbayt_BRhSN28J-gcoKlf/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="container mx-auto px-4 py-8 max-w-4xl"><h1 class="text-4xl font-bold mb-4">Global Hooks</h1><p class="text-xl text-gray-600 mb-8">Hooks can be added to any Global and allow you to validate data, flatten locales, hide protected fields, remove fields and more.</p><div class="prose prose-lg max-w-none"><p>Global Hooks are <a href="./overview">Hooks</a> that run on <a href="../configuration/globals">Global</a> Documents. They allow you to execute your own logic during specific events of the Document lifecycle.</p>
<p>To add Hooks to a Global, use the <code>hooks</code> property in your <a href="../configuration/globals">Global Config</a>:</p>
<pre><code class="language-ts">import type { GlobalConfig } from &#x27;payload&#x27;

export const GlobalWithHooks: GlobalConfig = {
  // ...
  hooks: {
    // highlight-line
    // ...
  },
}
</code></pre>
<div class="p-4 my-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800"><svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><p><strong>Tip:</strong> You can also set hooks on the field-level to isolate hook logic to
specific fields. <a href="./fields">More details</a>.</p></div>
<h2>Config Options</h2>
<p>All Global Hooks accept an array of <a href="./overview#async-vs-synchronous">synchronous or asynchronous functions</a>. Each Global Hook receives specific arguments based on its own type, and has the ability to modify specific outputs.</p>
<pre><code class="language-ts">import type { GlobalConfig } from &#x27;payload&#x27;;

const GlobalWithHooks: GlobalConfig = {
  // ...
  // highlight-start
  hooks: {
    beforeValidate: [(args) =&gt; {...}],
    beforeChange: [(args) =&gt; {...}],
    beforeRead: [(args) =&gt; {...}],
    afterChange: [(args) =&gt; {...}],
    afterRead: [(args) =&gt; {...}],
  }
  // highlight-end
}
</code></pre>
<h3>beforeValidate</h3>
<p>Runs during the <code>update</code> operation. This hook allows you to add or format data before the incoming data is validated server-side.</p>
<p>Please do note that this does not run before client-side validation. If you render a custom field component in your front-end and provide it with a <code>validate</code> function, the order that validations will run in is:</p>
<ol>
<li><code>validate</code> runs on the client</li>
<li>if successful, <code>beforeValidate</code> runs on the server</li>
<li><code>validate</code> runs on the server</li>
</ol>
<pre><code class="language-ts">import type { GlobalBeforeValidateHook } from &#x27;payload&#x27;

const beforeValidateHook: GlobalBeforeValidateHook = async ({
  data,
  req,
  originalDoc,
}) =&gt; {
  return data
}
</code></pre>
<p>The following arguments are provided to the <code>beforeValidate</code> hook:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>global</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="../configuration/globals">Global</a> in which this Hook is running against.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>context</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Custom context passed between Hooks. <a href="./context">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>data</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The incoming data passed through the operation.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>originalDoc</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The Document before changes are applied.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>req</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Web Request</a> object. This is mocked for <a href="../local-api/overview">Local API</a> operations.</td></tr></tbody></table></div>
<h3>beforeChange</h3>
<p>Immediately following validation, <code>beforeChange</code> hooks will run within the <code>update</code> operation. At this stage, you can be confident that the data that will be saved to the document is valid in accordance to your field validations. You can optionally modify the shape of data to be saved.</p>
<pre><code class="language-ts">import type { GlobalBeforeChangeHook } from &#x27;payload&#x27;

const beforeChangeHook: GlobalBeforeChangeHook = async ({
  data,
  req,
  originalDoc,
}) =&gt; {
  return data
}
</code></pre>
<p>The following arguments are provided to the <code>beforeChange</code> hook:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>global</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="../configuration/globals">Global</a> in which this Hook is running against.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>context</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Custom context passed between hooks. <a href="./context">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>data</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The incoming data passed through the operation.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>originalDoc</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The Document before changes are applied.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>req</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Web Request</a> object. This is mocked for <a href="../local-api/overview">Local API</a> operations.</td></tr></tbody></table></div>
<h3>afterChange</h3>
<p>After a global is updated, the <code>afterChange</code> hook runs. Use this hook to purge caches of your applications, sync site data to CRMs, and more.</p>
<pre><code class="language-ts">import type { GlobalAfterChangeHook } from &#x27;payload&#x27;

const afterChangeHook: GlobalAfterChangeHook = async ({
  doc,
  previousDoc,
  req,
}) =&gt; {
  return data
}
</code></pre>
<p>The following arguments are provided to the <code>afterChange</code> hook:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>global</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="../configuration/globals">Global</a> in which this Hook is running against.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>context</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Custom context passed between hooks. <a href="./context">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>doc</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The resulting Document after changes are applied.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>previousDoc</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The Document before changes were applied.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>req</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Web Request</a> object. This is mocked for <a href="../local-api/overview">Local API</a> operations.</td></tr></tbody></table></div>
<h3>beforeRead</h3>
<p>Runs before <code>findOne</code> global operation is transformed for output by <code>afterRead</code>. This hook fires before hidden fields are removed and before localized fields are flattened into the requested locale. Using this Hook will provide you with all locales and all hidden fields via the <code>doc</code> argument.</p>
<pre><code class="language-ts">import type { GlobalBeforeReadHook } from &#x27;payload&#x27;

const beforeReadHook: GlobalBeforeReadHook = async ({
  doc,
  req,
}) =&gt; {...}
</code></pre>
<p>The following arguments are provided to the <code>beforeRead</code> hook:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>global</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="../configuration/globals">Global</a> in which this Hook is running against.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>context</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Custom context passed between hooks. <a href="./context">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>doc</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The resulting Document after changes are applied.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>req</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Web Request</a> object. This is mocked for <a href="../local-api/overview">Local API</a> operations.</td></tr></tbody></table></div>
<h3>afterRead</h3>
<p>Runs as the last step before a global is returned. Flattens locales, hides protected fields, and removes fields that users do not have access to.</p>
<pre><code class="language-ts">import type { GlobalAfterReadHook } from &#x27;payload&#x27;

const afterReadHook: GlobalAfterReadHook = async ({
  doc,
  req,
  findMany,
}) =&gt; {...}
</code></pre>
<p>The following arguments are provided to the <code>beforeRead</code> hook:</p>
<div class="overflow-x-auto my-8"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr class="even:bg-gray-50"><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Option</th><th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>global</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="../configuration/globals">Global</a> in which this Hook is running against.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>context</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Custom context passed between hooks. <a href="./context">More details</a>.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>findMany</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">Boolean to denote if this hook is running against finding one, or finding many (useful in versions).</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>doc</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The resulting Document after changes are applied.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>query</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="../queries/overview">Query</a> of the request.</td></tr><tr class="even:bg-gray-50"><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"><strong><code>req</code></strong></td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500">The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Web Request</a> object. This is mocked for <a href="../local-api/overview">Local API</a> operations.</td></tr></tbody></table></div>
<h2>TypeScript</h2>
<p>Payload exports a type for each Global hook which can be accessed as follows:</p>
<pre><code class="language-ts">import type {
  GlobalBeforeValidateHook,
  GlobalBeforeChangeHook,
  GlobalAfterChangeHook,
  GlobalBeforeReadHook,
  GlobalAfterReadHook,
} from &#x27;payload&#x27;
</code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontMatter":{"title":"Global Hooks","label":"Globals","order":30,"desc":"Hooks can be added to any Global and allow you to validate data, flatten locales, hide protected fields, remove fields and more.","keywords":"hooks, globals, config, configuration, documentation, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    code: \"code\",\n    pre: \"pre\",\n    strong: \"strong\",\n    h2: \"h2\",\n    h3: \"h3\",\n    ol: \"ol\",\n    li: \"li\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Global Hooks are \", _jsx(_components.a, {\n        href: \"./overview\",\n        children: \"Hooks\"\n      }), \" that run on \", _jsx(_components.a, {\n        href: \"../configuration/globals\",\n        children: \"Global\"\n      }), \" Documents. They allow you to execute your own logic during specific events of the Document lifecycle.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To add Hooks to a Global, use the \", _jsx(_components.code, {\n        children: \"hooks\"\n      }), \" property in your \", _jsx(_components.a, {\n        href: \"../configuration/globals\",\n        children: \"Global Config\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { GlobalConfig } from 'payload'\\n\\nexport const GlobalWithHooks: GlobalConfig = {\\n  // ...\\n  hooks: {\\n    // highlight-line\\n    // ...\\n  },\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Tip:\"\n        }), \" You can also set hooks on the field-level to isolate hook logic to\\nspecific fields. \", _jsx(_components.a, {\n          href: \"./fields\",\n          children: \"More details\"\n        }), \".\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Config Options\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All Global Hooks accept an array of \", _jsx(_components.a, {\n        href: \"./overview#async-vs-synchronous\",\n        children: \"synchronous or asynchronous functions\"\n      }), \". Each Global Hook receives specific arguments based on its own type, and has the ability to modify specific outputs.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { GlobalConfig } from 'payload';\\n\\nconst GlobalWithHooks: GlobalConfig = {\\n  // ...\\n  // highlight-start\\n  hooks: {\\n    beforeValidate: [(args) =\u003e {...}],\\n    beforeChange: [(args) =\u003e {...}],\\n    beforeRead: [(args) =\u003e {...}],\\n    afterChange: [(args) =\u003e {...}],\\n    afterRead: [(args) =\u003e {...}],\\n  }\\n  // highlight-end\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"beforeValidate\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Runs during the \", _jsx(_components.code, {\n        children: \"update\"\n      }), \" operation. This hook allows you to add or format data before the incoming data is validated server-side.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Please do note that this does not run before client-side validation. If you render a custom field component in your front-end and provide it with a \", _jsx(_components.code, {\n        children: \"validate\"\n      }), \" function, the order that validations will run in is:\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"validate\"\n        }), \" runs on the client\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"if successful, \", _jsx(_components.code, {\n          children: \"beforeValidate\"\n        }), \" runs on the server\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"validate\"\n        }), \" runs on the server\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { GlobalBeforeValidateHook } from 'payload'\\n\\nconst beforeValidateHook: GlobalBeforeValidateHook = async ({\\n  data,\\n  req,\\n  originalDoc,\\n}) =\u003e {\\n  return data\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The following arguments are provided to the \", _jsx(_components.code, {\n        children: \"beforeValidate\"\n      }), \" hook:\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"global\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"../configuration/globals\",\n              children: \"Global\"\n            }), \" in which this Hook is running against.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"context\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Custom context passed between Hooks. \", _jsx(_components.a, {\n              href: \"./context\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"data\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The incoming data passed through the operation.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"originalDoc\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The Document before changes are applied.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"req\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"https://developer.mozilla.org/en-US/docs/Web/API/Request\",\n              children: \"Web Request\"\n            }), \" object. This is mocked for \", _jsx(_components.a, {\n              href: \"../local-api/overview\",\n              children: \"Local API\"\n            }), \" operations.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"beforeChange\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Immediately following validation, \", _jsx(_components.code, {\n        children: \"beforeChange\"\n      }), \" hooks will run within the \", _jsx(_components.code, {\n        children: \"update\"\n      }), \" operation. At this stage, you can be confident that the data that will be saved to the document is valid in accordance to your field validations. You can optionally modify the shape of data to be saved.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { GlobalBeforeChangeHook } from 'payload'\\n\\nconst beforeChangeHook: GlobalBeforeChangeHook = async ({\\n  data,\\n  req,\\n  originalDoc,\\n}) =\u003e {\\n  return data\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The following arguments are provided to the \", _jsx(_components.code, {\n        children: \"beforeChange\"\n      }), \" hook:\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"global\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"../configuration/globals\",\n              children: \"Global\"\n            }), \" in which this Hook is running against.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"context\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Custom context passed between hooks. \", _jsx(_components.a, {\n              href: \"./context\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"data\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The incoming data passed through the operation.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"originalDoc\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The Document before changes are applied.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"req\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"https://developer.mozilla.org/en-US/docs/Web/API/Request\",\n              children: \"Web Request\"\n            }), \" object. This is mocked for \", _jsx(_components.a, {\n              href: \"../local-api/overview\",\n              children: \"Local API\"\n            }), \" operations.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"afterChange\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"After a global is updated, the \", _jsx(_components.code, {\n        children: \"afterChange\"\n      }), \" hook runs. Use this hook to purge caches of your applications, sync site data to CRMs, and more.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { GlobalAfterChangeHook } from 'payload'\\n\\nconst afterChangeHook: GlobalAfterChangeHook = async ({\\n  doc,\\n  previousDoc,\\n  req,\\n}) =\u003e {\\n  return data\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The following arguments are provided to the \", _jsx(_components.code, {\n        children: \"afterChange\"\n      }), \" hook:\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"global\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"../configuration/globals\",\n              children: \"Global\"\n            }), \" in which this Hook is running against.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"context\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Custom context passed between hooks. \", _jsx(_components.a, {\n              href: \"./context\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"doc\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The resulting Document after changes are applied.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"previousDoc\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The Document before changes were applied.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"req\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"https://developer.mozilla.org/en-US/docs/Web/API/Request\",\n              children: \"Web Request\"\n            }), \" object. This is mocked for \", _jsx(_components.a, {\n              href: \"../local-api/overview\",\n              children: \"Local API\"\n            }), \" operations.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"beforeRead\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Runs before \", _jsx(_components.code, {\n        children: \"findOne\"\n      }), \" global operation is transformed for output by \", _jsx(_components.code, {\n        children: \"afterRead\"\n      }), \". This hook fires before hidden fields are removed and before localized fields are flattened into the requested locale. Using this Hook will provide you with all locales and all hidden fields via the \", _jsx(_components.code, {\n        children: \"doc\"\n      }), \" argument.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { GlobalBeforeReadHook } from 'payload'\\n\\nconst beforeReadHook: GlobalBeforeReadHook = async ({\\n  doc,\\n  req,\\n}) =\u003e {...}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The following arguments are provided to the \", _jsx(_components.code, {\n        children: \"beforeRead\"\n      }), \" hook:\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"global\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"../configuration/globals\",\n              children: \"Global\"\n            }), \" in which this Hook is running against.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"context\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Custom context passed between hooks. \", _jsx(_components.a, {\n              href: \"./context\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"doc\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The resulting Document after changes are applied.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"req\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"https://developer.mozilla.org/en-US/docs/Web/API/Request\",\n              children: \"Web Request\"\n            }), \" object. This is mocked for \", _jsx(_components.a, {\n              href: \"../local-api/overview\",\n              children: \"Local API\"\n            }), \" operations.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"afterRead\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Runs as the last step before a global is returned. Flattens locales, hides protected fields, and removes fields that users do not have access to.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { GlobalAfterReadHook } from 'payload'\\n\\nconst afterReadHook: GlobalAfterReadHook = async ({\\n  doc,\\n  req,\\n  findMany,\\n}) =\u003e {...}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The following arguments are provided to the \", _jsx(_components.code, {\n        children: \"beforeRead\"\n      }), \" hook:\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"global\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"../configuration/globals\",\n              children: \"Global\"\n            }), \" in which this Hook is running against.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"context\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Custom context passed between hooks. \", _jsx(_components.a, {\n              href: \"./context\",\n              children: \"More details\"\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"findMany\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"Boolean to denote if this hook is running against finding one, or finding many (useful in versions).\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"doc\"\n              })\n            })\n          }), _jsx(_components.td, {\n            children: \"The resulting Document after changes are applied.\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"query\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"../queries/overview\",\n              children: \"Query\"\n            }), \" of the request.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.strong, {\n              children: _jsx(_components.code, {\n                children: \"req\"\n              })\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The \", _jsx(_components.a, {\n              href: \"https://developer.mozilla.org/en-US/docs/Web/API/Request\",\n              children: \"Web Request\"\n            }), \" object. This is mocked for \", _jsx(_components.a, {\n              href: \"../local-api/overview\",\n              children: \"Local API\"\n            }), \" operations.\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"TypeScript\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Payload exports a type for each Global hook which can be accessed as follows:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type {\\n  GlobalBeforeValidateHook,\\n  GlobalBeforeChangeHook,\\n  GlobalAfterChangeHook,\\n  GlobalBeforeReadHook,\\n  GlobalAfterReadHook,\\n} from 'payload'\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["hooks","globals"]},"buildId":"pbayt_BRhSN28J-gcoKlf","assetPrefix":"/payload-just-docs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>