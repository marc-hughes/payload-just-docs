{"pageProps":{"frontMatter":{"title":"Stripe Plugin","label":"Stripe","order":40,"desc":"Easily accept payments with Stripe","keywords":"plugins, stripe, payments, ecommerce"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    a: \"a\",\n    code: \"code\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\",\n    h3: \"h3\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    em: \"em\",\n    h5: \"h5\",\n    strong: \"strong\",\n    ol: \"ol\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://img.shields.io/npm/v/@payloadcms/plugin-stripe\",\n        alt: \"https://www.npmjs.com/package/@payloadcms/plugin-stripe\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"With this plugin you can easily integrate \", _jsx(_components.a, {\n        href: \"https://stripe.com\",\n        children: \"Stripe\"\n      }), \" into Payload. Simply provide your Stripe credentials and this plugin will open up a two-way communication channel between the two platforms. This enables you to easily sync data back and forth, as well as proxy the Stripe REST API through Payload's \", _jsx(_components.a, {\n        href: \"../access-control/overview\",\n        children: \"Access Control\"\n      }), \". Use this plugin to completely offload billing to Stripe and retain full control over your application's data.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For example, you might be building an e-commerce or SaaS application, where you have a \", _jsx(_components.code, {\n        children: \"products\"\n      }), \" or a \", _jsx(_components.code, {\n        children: \"plans\"\n      }), \" collection that requires either a one-time payment or a subscription. You can to tie each of these products to Stripe, then easily subscribe to billing-related events to perform your application's business logic, such as active purchases or subscription cancellations.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To build a checkout flow on your front-end you can either use \", _jsx(_components.a, {\n        href: \"https://stripe.com/payments/checkout\",\n        children: \"Stripe Checkout\"\n      }), \", or you can also build a completely custom checkout experience from scratch using \", _jsx(_components.a, {\n        href: \"https://stripe.com/docs/payments/elements\",\n        children: \"Stripe Web Elements\"\n      }), \". Then to build fully custom, secure customer dashboards, you can leverage Payload's Access Control to restrict access to your Stripe resources so your users never have to leave your site to manage their accounts.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The beauty of this plugin is the entirety of your application's content and business logic can be handled in Payload while Stripe handles solely the billing and payment processing. You can build a completely proprietary application that is endlessly customizable and extendable, on APIs and databases that you own. Hosted services like Shopify or BigCommerce might fracture your application's content then charge you for access.\"\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [\"This plugin is completely open-source and the \", _jsx(_components.a, {\n          href: \"https://github.com/payloadcms/payload/tree/main/packages/plugin-stripe\",\n          children: \"source code can be found\\nhere\"\n        }), \".\\nIf you need help, check out our \", _jsx(_components.a, {\n          href: \"https://payloadcms.com/community-help\",\n          children: \"Community\\nHelp\"\n        }), \". If you think you've found a bug,\\nplease \", _jsx(_components.a, {\n          href: \"https://github.com/payloadcms/payload/issues/new?assignees=&labels=plugin%3A%20stripe&template=bug_report.md&title=plugin-stripe%3A\",\n          children: \"open a new\\nissue\"\n        }), \"\\nwith as much detail as possible.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Core features\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Hides your Stripe credentials when shipping SaaS applications\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Allows restricted keys through \", _jsx(_components.a, {\n          href: \"https://payloadcms.com/docs/access-control/overview\",\n          children: \"Payload access control\"\n        })]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Enables a two-way communication channel between Stripe and Payload\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Proxies the \", _jsx(_components.a, {\n          href: \"https://stripe.com/docs/api\",\n          children: \"Stripe REST API\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Proxies \", _jsx(_components.a, {\n          href: \"https://stripe.com/docs/webhooks\",\n          children: \"Stripe webhooks\"\n        })]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Automatically syncs data between the two platforms\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Installation\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Install the plugin using any JavaScript package manager like \", _jsx(_components.a, {\n        href: \"https://pnpm.io\",\n        children: \"pnpm\"\n      }), \", \", _jsx(_components.a, {\n        href: \"https://npmjs.com\",\n        children: \"npm\"\n      }), \", or \", _jsx(_components.a, {\n        href: \"https://yarnpkg.com\",\n        children: \"Yarn\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"  pnpm add @payloadcms/plugin-stripe\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Basic Usage\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In the \", _jsx(_components.code, {\n        children: \"plugins\"\n      }), \" array of your \", _jsx(_components.a, {\n        href: \"https://payloadcms.com/docs/configuration/overview\",\n        children: \"Payload Config\"\n      }), \", call the plugin with \", _jsx(_components.a, {\n        href: \"#options\",\n        children: \"options\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from 'payload'\\nimport { stripePlugin } from '@payloadcms/plugin-stripe'\\n\\nconst config = buildConfig({\\n  plugins: [\\n    stripePlugin({\\n      stripeSecretKey: process.env.STRIPE_SECRET_KEY,\\n    }),\\n  ],\\n})\\n\\nexport default config\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Options\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Option\"\n          }), _jsx(_components.th, {\n            children: \"Type\"\n          }), _jsx(_components.th, {\n            children: \"Default\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsxs(_components.td, {\n            children: [_jsx(_components.code, {\n              children: \"stripeSecretKey\"\n            }), \" *\"]\n          }), _jsx(_components.td, {\n            children: \"string\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"undefined\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Your Stripe secret key\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"stripeWebhooksEndpointSecret\"\n            })\n          }), _jsx(_components.td, {\n            children: \"string\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"undefined\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Your Stripe webhook endpoint secret\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"rest\"\n            })\n          }), _jsx(_components.td, {\n            children: \"boolean\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"false\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"When \", _jsx(_components.code, {\n              children: \"true\"\n            }), \", opens the \", _jsx(_components.code, {\n              children: \"/api/stripe/rest\"\n            }), \" endpoint\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"webhooks\"\n            })\n          }), _jsx(_components.td, {\n            children: \"object or function\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"undefined\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Either a function to handle all webhooks events, or an object of Stripe webhook handlers, keyed to the name of the event\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"sync\"\n            })\n          }), _jsx(_components.td, {\n            children: \"array\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"undefined\"\n            })\n          }), _jsx(_components.td, {\n            children: \"An array of sync configs\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"logs\"\n            })\n          }), _jsx(_components.td, {\n            children: \"boolean\"\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"false\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"When \", _jsx(_components.code, {\n              children: \"true\"\n            }), \", logs sync events to the console as they happen\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.em, {\n        children: \"* An asterisk denotes that a property is required.\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Endpoints\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The following custom endpoints are automatically opened for you:\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Endpoint\"\n          }), _jsx(_components.th, {\n            children: \"Method\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"/api/stripe/rest\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"POST\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Proxies the \", _jsx(_components.a, {\n              href: \"https://stripe.com/docs/api\",\n              children: \"Stripe REST API\"\n            }), \" behind \", _jsx(_components.a, {\n              href: \"https://payloadcms.com/docs/access-control/overview\",\n              children: \"Payload access control\"\n            }), \" and returns the result. See the \", _jsx(_components.a, {\n              href: \"#stripe-rest-proxy\",\n              children: \"REST Proxy\"\n            }), \" section for more details.\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"/api/stripe/webhooks\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"POST\"\n            })\n          }), _jsx(_components.td, {\n            children: \"Handles all Stripe webhook events\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h5, {\n      children: \"Stripe REST Proxy\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If \", _jsx(_components.code, {\n        children: \"rest\"\n      }), \" is true, proxies the \", _jsx(_components.a, {\n        href: \"https://stripe.com/docs/api\",\n        children: \"Stripe REST API\"\n      }), \" behind \", _jsx(_components.a, {\n        href: \"https://payloadcms.com/docs/access-control/overview\",\n        children: \"Payload access control\"\n      }), \" and returns the result. This flag should only be used for local development, see the security note below for more information.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"const res = await fetch(`/api/stripe/rest`, {\\n  method: 'POST',\\n  credentials: 'include',\\n  headers: {\\n    'Content-Type': 'application/json',\\n    // Authorization: `JWT ${token}` // NOTE: do this if not in a browser (i.e. curl or Postman)\\n  },\\n  body: JSON.stringify({\\n    stripeMethod: 'stripe.subscriptions.list',\\n    stripeArgs: [\\n      {\\n        customer: 'abc',\\n      },\\n    ],\\n  }),\\n})\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If you need to proxy the API server-side, use the \", _jsx(_components.a, {\n        href: \"#node\",\n        children: \"stripeProxy\"\n      }), \" function.\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"info\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"The \", _jsx(_components.code, {\n          children: \"/api\"\n        }), \" part of these routes may be different based on the settings defined in your Payload\\nconfig.\"]\n      })]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Warning:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"Opening the REST proxy endpoint in production is a potential security risk. Authenticated users will have open access to the Stripe REST API. In production, open your own endpoint and use the \", _jsx(_components.a, {\n          href: \"#node\",\n          children: \"stripeProxy\"\n        }), \" function to proxy the Stripe API server-side.\"]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Webhooks\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://stripe.com/docs/webhooks\",\n        children: \"Stripe webhooks\"\n      }), \" are used to sync from Stripe to Payload. Webhooks listen for events on your Stripe account so you can trigger reactions to them. Follow the steps below to enable webhooks.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Development:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Login using Stripe cli \", _jsx(_components.code, {\n          children: \"stripe login\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Forward events to localhost \", _jsx(_components.code, {\n          children: \"stripe listen --forward-to localhost:3000/api/stripe/webhooks\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Paste the given secret into your \", _jsx(_components.code, {\n          children: \".env\"\n        }), \" file as \", _jsx(_components.code, {\n          children: \"STRIPE_WEBHOOKS_ENDPOINT_SECRET\"\n        })]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Production:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Login and \", _jsx(_components.a, {\n          href: \"https://dashboard.stripe.com/test/webhooks/create\",\n          children: \"create a new webhook\"\n        }), \" from the Stripe dashboard\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Paste \", _jsx(_components.code, {\n          children: \"YOUR_DOMAIN_NAME/api/stripe/webhooks\"\n        }), \" as the \\\"Webhook Endpoint URL\\\"\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Select which events to broadcast\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Paste the given secret into your \", _jsx(_components.code, {\n          children: \".env\"\n        }), \" file as \", _jsx(_components.code, {\n          children: \"STRIPE_WEBHOOKS_ENDPOINT_SECRET\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Then, handle these events using the \", _jsx(_components.code, {\n          children: \"webhooks\"\n        }), \" portion of this plugin's config:\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from 'payload'\\nimport stripePlugin from '@payloadcms/plugin-stripe'\\n\\nconst config = buildConfig({\\n  plugins: [\\n    stripePlugin({\\n      stripeSecretKey: process.env.STRIPE_SECRET_KEY,\\n      stripeWebhooksEndpointSecret: process.env.STRIPE_WEBHOOKS_ENDPOINT_SECRET,\\n      webhooks: {\\n        'customer.subscription.updated': ({ event, stripe, stripeConfig }) => {\\n          // do something...\\n        },\\n      },\\n      // NOTE: you can also catch all Stripe webhook events and handle the event types yourself\\n      // webhooks: (event, stripe, stripeConfig) => {\\n      //   switch (event.type): {\\n      //     case 'customer.subscription.updated': {\\n      //       // do something...\\n      //       break;\\n      //     }\\n      //     default: {\\n      //       break;\\n      //     }\\n      //   }\\n      // }\\n    }),\\n  ],\\n})\\n\\nexport default config\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For a full list of available webhooks, see \", _jsx(_components.a, {\n        href: \"https://stripe.com/docs/cli/trigger#trigger-event\",\n        children: \"here\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Node\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"On the server you should interface with Stripe directly using the \", _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/stripe\",\n        children: \"stripe\"\n      }), \" npm module. That might look something like this:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import Stripe from 'stripe'\\n\\nconst stripeSecretKey = process.env.STRIPE_SECRET_KEY\\nconst stripe = new Stripe(stripeSecretKey, {\\n  apiVersion: '2022-08-01',\\n})\\n\\nexport const MyFunction = async () => {\\n  try {\\n    const customer = await stripe.customers.create({\\n      email: data.email,\\n    })\\n\\n    // do something...\\n  } catch (error) {\\n    console.error(error.message)\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Alternatively, you can interface with the Stripe using the \", _jsx(_components.code, {\n        children: \"stripeProxy\"\n      }), \", which is exactly what the \", _jsx(_components.code, {\n        children: \"/api/stripe/rest\"\n      }), \" endpoint does behind-the-scenes. Here's the same example as above, but piped through the proxy:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { stripeProxy } from '@payloadcms/plugin-stripe'\\n\\nexport const MyFunction = async () => {\\n  try {\\n    const customer = await stripeProxy({\\n      stripeSecretKey: process.env.STRIPE_SECRET_KEY,\\n      stripeMethod: 'customers.create',\\n      stripeArgs: [\\n        {\\n          email: data.email,\\n        },\\n      ],\\n    })\\n\\n    if (customer.status === 200) {\\n      // do something...\\n    }\\n\\n    if (customer.status >= 400) {\\n      throw new Error(customer.message)\\n    }\\n  } catch (error) {\\n    console.error(error.message)\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Sync\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This option will setup a basic sync between Payload collections and Stripe resources for you automatically. It will create all the necessary hooks and webhooks handlers, so the only thing you have to do is map your Payload fields to their corresponding Stripe properties. As documents are created, updated, and deleted from either Stripe or Payload, the changes are reflected on either side.\"\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"info\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"If you wish to enable a \", _jsx(_components.em, {\n          children: \"two-way\"\n        }), \" sync, be sure to setup \", _jsx(_components.a, {\n          href: \"#webhooks\",\n          children: _jsx(_components.code, {\n            children: \"webhooks\"\n          })\n        }), \" and pass the\\n\", _jsx(_components.code, {\n          children: \"stripeWebhooksEndpointSecret\"\n        }), \" through your config.\"]\n      })]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from 'payload'\\nimport stripePlugin from '@payloadcms/plugin-stripe'\\n\\nconst config = buildConfig({\\n  plugins: [\\n    stripePlugin({\\n      stripeSecretKey: process.env.STRIPE_SECRET_KEY,\\n      stripeWebhooksEndpointSecret: process.env.STRIPE_WEBHOOKS_ENDPOINT_SECRET,\\n      sync: [\\n        {\\n          collection: 'customers',\\n          stripeResourceType: 'customers',\\n          stripeResourceTypeSingular: 'customer',\\n          fields: [\\n            {\\n              fieldPath: 'name', // this is a field on your own Payload Config\\n              stripeProperty: 'name', // use dot notation, if applicable\\n            },\\n          ],\\n        },\\n      ],\\n    }),\\n  ],\\n})\\n\\nexport default config\\n\"\n      })\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsx(_components.p, {\n        children: \"Due to limitations in the Stripe API, this currently only works with top-level fields. This is\\nbecause every Stripe object is a separate entity, making it difficult to abstract into a simple\\nreusable library. In the future, we may find a pattern around this. But for now, cases like that\\nwill need to be hard-coded.\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Using \", _jsx(_components.code, {\n        children: \"sync\"\n      }), \" will do the following:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Adds and maintains a \", _jsx(_components.code, {\n          children: \"stripeID\"\n        }), \" read-only field on each collection, this is a field generated \", _jsx(_components.em, {\n          children: \"by Stripe\"\n        }), \" and used as a cross-reference\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Adds a direct link to the resource on Stripe.com\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Adds and maintains an \", _jsx(_components.code, {\n          children: \"skipSync\"\n        }), \" read-only flag on each collection to prevent infinite syncs when hooks trigger webhooks\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Adds the following hooks to each collection:\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.code, {\n              children: \"beforeValidate\"\n            }), \": \", _jsx(_components.code, {\n              children: \"createNewInStripe\"\n            })]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.code, {\n              children: \"beforeChange\"\n            }), \": \", _jsx(_components.code, {\n              children: \"syncExistingWithStripe\"\n            })]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.code, {\n              children: \"afterDelete\"\n            }), \": \", _jsx(_components.code, {\n              children: \"deleteFromStripe\"\n            })]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Handles the following Stripe webhooks\", \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.code, {\n              children: \"STRIPE_TYPE.created\"\n            }), \": \", _jsx(_components.code, {\n              children: \"handleCreatedOrUpdated\"\n            })]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.code, {\n              children: \"STRIPE_TYPE.updated\"\n            }), \": \", _jsx(_components.code, {\n              children: \"handleCreatedOrUpdated\"\n            })]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.code, {\n              children: \"STRIPE_TYPE.deleted\"\n            }), \": \", _jsx(_components.code, {\n              children: \"handleDeleted\"\n            })]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"TypeScript\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"All types can be directly imported:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import {\\n  StripeConfig,\\n  StripeWebhookHandler,\\n  StripeProxy,\\n  ...\\n} from '@payloadcms/plugin-stripe/types';\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Examples\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.a, {\n        href: \"https://github.com/payloadcms/payload/tree/main/templates\",\n        children: \"Templates Directory\"\n      }), \" contains an official \", _jsx(_components.a, {\n        href: \"https://github.com/payloadcms/payload/tree/main/templates/ecommerce\",\n        children: \"E-commerce Template\"\n      }), \" which demonstrates exactly how to configure this plugin in Payload and implement it on your front-end. You can also check out \", _jsx(_components.a, {\n        href: \"https://payloadcms.com/blog/how-to-build-an-e-commerce-site-with-nextjs\",\n        children: \"How to Build An E-Commerce Site With Next.js\"\n      }), \" post for a bit more context around this template.\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true}