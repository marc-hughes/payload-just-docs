{"pageProps":{"frontMatter":{"title":"Vercel Content Link","label":"Vercel Content Link","order":10,"desc":"Payload + Vercel Content Link allows yours editors to navigate directly from the content rendered on your front-end to the fields in Payload that control it.","keywords":"vercel, vercel content link, content link, visual editing, content source maps, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    img: \"img\",\n    h2: \"h2\",\n    code: \"code\",\n    pre: \"pre\",\n    h4: \"h4\",\n    h3: \"h3\",\n    em: \"em\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://vercel.com/docs/workflow-collaboration/edit-mode#content-link\",\n        children: \"Vercel Content Link\"\n      }), \" will allow your editors to navigate directly from the content rendered on your front-end to the fields in Payload that control it. This requires no changes to your front-end code and very few changes to your Payload Config.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/images/docs/vercel-visual-editing.jpg\",\n        alt: \"Versions\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"warning\",\n      children: _jsxs(_components.p, {\n        children: [\"Vercel Content Link is an enterprise-only feature and only available for\\ndeployments hosted on Vercel. If you are an existing enterprise customer,\\n\", _jsx(_components.a, {\n          href: \"https://payloadcms.com/for-enterprise\",\n          children: \"contact our sales team\"\n        }), \" for help with\\nyour integration.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"How it works\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To power Vercel Content Link, Payload embeds Content Source Maps into its API responses. Content Source Maps are invisible, encoded JSON values that include a link back to the field in the CMS that generated the content. When rendered on the page, Vercel detects and decodes these values to display the Content Link interface.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For full details on how the encoding and decoding algorithm works, check out \", _jsx(_components.a, {\n        href: \"https://www.npmjs.com/package/@vercel/stega\",\n        children: _jsx(_components.code, {\n          children: \"@vercel/stega\"\n        })\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Getting Started\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Setting up Payload with Vercel Content Link is easy. First, install the \", _jsx(_components.code, {\n        children: \"@payloadcms/plugin-csm\"\n      }), \" plugin into your project. This plugin requires an API key to install, \", _jsx(_components.a, {\n        href: \"https://payloadcms.com/for-enterprise\",\n        children: \"contact our sales team\"\n      }), \" if you don't already have one.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"npm i @payloadcms/plugin-csm\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Then in the \", _jsx(_components.code, {\n        children: \"plugins\"\n      }), \" array of your Payload Config, call the plugin and enable any collections that require Content Source Maps.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from \\\"payload/config\\\"\\nimport contentSourceMaps from \\\"@payloadcms/plugin-csm\\\"\\n\\nconst config = buildConfig({\\n  collections: [\\n    {\\n      slug: \\\"pages\\\",\\n      fields: [\\n        {\\n          name: 'slug',\\n          type: 'text',\\n        },\\n        {\\n          name: 'title,'\\n          type: 'text',\\n        },\\n      ],\\n    },\\n  ],\\n  plugins: [\\n    contentSourceMaps({\\n      collections: [\\\"pages\\\"],\\n    }),\\n  ],\\n})\\n\\nexport default config\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Now in your Next.js app, include the \", _jsx(_components.code, {\n        children: \"?encodeSourceMaps=true\"\n      }), \" parameter in any of your API requests. For performance reasons, this should only be done when in draft mode or on preview deployments.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"if (isDraftMode || process.env.VERCEL_ENV === 'preview') {\\n  const res = await fetch(\\n    `${process.env.NEXT_PUBLIC_PAYLOAD_CMS_URL}/api/pages?where[slug][equals]=${slug}&encodeSourceMaps=true`,\\n  )\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"And that's it! You are now ready to enter Edit Mode and begin visually editing your content.\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Edit Mode\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To see Content Link on your site, you first need to visit any preview deployment on Vercel and login using the Vercel Toolbar. When Content Source Maps are detected on the page, a pencil icon will appear in the toolbar. Clicking this icon will enable Edit Mode, highlighting all editable fields on the page in blue.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/images/docs/vercel-toolbar.jpg\",\n        alt: \"Versions\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Troubleshooting\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Date Fields\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The plugin does not encode \", _jsx(_components.code, {\n        children: \"date\"\n      }), \" fields by default, but for some cases like text that uses negative CSS letter-spacing, it may be necessary to split the encoded data out from the rendered text. This way you can safely use the cleaned data as expected.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { vercelStegaSplit } from '@vercel/stega'\\nconst { cleaned, encoded } = vercelStegaSplit(text)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Blocks and array fields\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"All \", _jsx(_components.code, {\n        children: \"blocks\"\n      }), \" and \", _jsx(_components.code, {\n        children: \"array\"\n      }), \" fields by definition do not have plain text strings to encode. For this reason, they are given an additional \", _jsx(_components.code, {\n        children: \"_encodedSourceMap\"\n      }), \" property, which you can use to enable Content Link on entire \", _jsx(_components.em, {\n        children: \"sections\"\n      }), \" of your site. You can then specify the editing container by adding the \", _jsx(_components.code, {\n        children: \"data-vercel-edit-target\"\n      }), \" HTML attribute to any top-level element of your block.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"<div data-vercel-edit-target>\\n  <span style={{ display: \\\"none\\\" }}>{_encodedSourceMap}</span>\\n  {children}\\n</div>\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true}