{"pageProps":{"frontMatter":{"title":"Nested Docs Plugin","label":"Nested Docs","order":40,"desc":"Nested documents in a parent, child, and sibling relationship.","keywords":"plugins, nested, documents, parent, child, sibling, relationship"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    code: \"code\",\n    em: \"em\",\n    a: \"a\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\",\n    h3: \"h3\",\n    h4: \"h4\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://img.shields.io/npm/v/@payloadcms/plugin-nested-docs\",\n        alt: \"https://www.npmjs.com/package/@payloadcms/plugin-nested-docs\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This plugin allows you to easily nest the documents of your application inside of one another. It does so by adding a\\nnew \", _jsx(_components.code, {\n        children: \"parent\"\n      }), \" field onto each of your documents that, when selected, attaches itself to the parent's tree. When you edit\\nthe great-great-grandparent of a document, for instance, all of its descendants are recursively updated. This is an\\nextremely powerful way of achieving hierarchy within a collection, such as parent/child relationship between pages.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Documents also receive a new \", _jsx(_components.code, {\n        children: \"breadcrumbs\"\n      }), \" field. Once a parent is assigned, these breadcrumbs are populated based on\\neach ancestor up the tree. Breadcrumbs allow you to dynamically generate labels and URLs based on the document's\\nposition in the hierarchy. Even if the slug of a parent document changes, or the entire tree is nested another level\\ndeep, changes will cascade down the entire tree and all breadcrumbs will reflect those changes.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"With this pattern you can perform whatever side-effects your applications needs on even the most deeply nested\\ndocuments. For example, you could easily add a custom \", _jsx(_components.code, {\n        children: \"fullTitle\"\n      }), \" field onto each document and inject the parent's title\\nonto it, such as \\\"Parent Title > Child Title\\\". This would allow you to then perform searches and filters based on \", _jsx(_components.em, {\n        children: \"that\"\n      }), \"\\nfield instead of the original title. This is especially useful if you happen to have two documents with identical titles\\nbut different parents.\"]\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [\"This plugin is completely open-source and the \", _jsx(_components.a, {\n          href: \"https://github.com/payloadcms/payload/tree/main/packages/plugin-nested-docs\",\n          children: \"source code can be found\\nhere\"\n        }), \".\\nIf you need help, check out our \", _jsx(_components.a, {\n          href: \"https://payloadcms.com/community-help\",\n          children: \"Community\\nHelp\"\n        }), \". If you think you've found a bug,\\nplease \", _jsx(_components.a, {\n          href: \"https://github.com/payloadcms/payload/issues/new?assignees=&labels=plugin%3A%20nested-docs&template=bug_report.md&title=plugin-nested-docs%3A\",\n          children: \"open a new\\nissue\"\n        }), \"\\nwith as much detail as possible.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Core features\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Automatically adds a \", _jsx(_components.code, {\n          children: \"parent\"\n        }), \" relationship field to each document\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Allows for parent/child relationships between documents within the same collection\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Recursively updates all descendants when a parent is changed\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Automatically populates a \", _jsx(_components.code, {\n          children: \"breadcrumbs\"\n        }), \" field with all ancestors up the tree\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Dynamically generate labels and URLs for each breadcrumb\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Supports localization\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Installation\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Install the plugin using any JavaScript package manager like \", _jsx(_components.a, {\n        href: \"https://pnpm.io\",\n        children: \"pnpm\"\n      }), \", \", _jsx(_components.a, {\n        href: \"https://npmjs.com\",\n        children: \"npm\"\n      }), \", or \", _jsx(_components.a, {\n        href: \"https://yarnpkg.com\",\n        children: \"Yarn\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"  pnpm add @payloadcms/plugin-nested-docs\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Basic Usage\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In the \", _jsx(_components.code, {\n        children: \"plugins\"\n      }), \" array of your \", _jsx(_components.a, {\n        href: \"https://payloadcms.com/docs/configuration/overview\",\n        children: \"Payload Config\"\n      }), \", call the plugin\\nwith \", _jsx(_components.a, {\n        href: \"#options\",\n        children: \"options\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import { buildConfig } from 'payload'\\nimport { nestedDocsPlugin } from '@payloadcms/plugin-nested-docs'\\n\\nconst config = buildConfig({\\n  collections: [\\n    {\\n      slug: 'pages',\\n      fields: [\\n        {\\n          name: 'title',\\n          type: 'text',\\n        },\\n        {\\n          name: 'slug',\\n          type: 'text',\\n        },\\n      ],\\n    },\\n  ],\\n  plugins: [\\n    nestedDocsPlugin({\\n      collections: ['pages'],\\n      generateLabel: (_, doc) => doc.title,\\n      generateURL: (docs) =>\\n        docs.reduce((url, doc) => `${url}/${doc.slug}`, ''),\\n    }),\\n  ],\\n})\\n\\nexport default config\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Fields\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Parent\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"parent\"\n      }), \" relationship field is automatically added to every document which allows editors to choose another document\\nfrom the same collection to act as the direct parent.\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"Breadcrumbs\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"breadcrumbs\"\n      }), \" field is an array which dynamically populates all parent relationships of a document up to the top\\nlevel and stores the following fields.\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Field\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"label\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The label of the breadcrumb. This field is automatically set to either the \", _jsx(_components.code, {\n              children: \"collection.admin.useAsTitle\"\n            }), \" (if defined) or is set to the \", _jsx(_components.code, {\n              children: \"ID\"\n            }), \" of the document. You can also dynamically define the \", _jsx(_components.code, {\n              children: \"label\"\n            }), \" by passing a function to the options property of \", _jsx(_components.a, {\n              href: \"#generatelabel\",\n              children: _jsx(_components.code, {\n                children: \"generateLabel\"\n              })\n            }), \".\"]\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"url\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"The URL of the breadcrumb. By default, this field is undefined. You can manually define this field by passing a property called function to the plugin options property of \", _jsx(_components.a, {\n              href: \"#generateurl\",\n              children: _jsx(_components.code, {\n                children: \"generateURL\"\n              })\n            }), \".\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Options\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: _jsx(_components.code, {\n        children: \"collections\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"An array of collections slugs to enable nested docs.\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: _jsx(_components.code, {\n        children: \"generateLabel\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Each \", _jsx(_components.code, {\n        children: \"breadcrumb\"\n      }), \" has a required \", _jsx(_components.code, {\n        children: \"label\"\n      }), \" field. By default, its value will be set to the collection's \", _jsx(_components.code, {\n        children: \"admin.useAsTitle\"\n      }), \"\\nor fallback the the \", _jsx(_components.code, {\n        children: \"ID\"\n      }), \" of the document.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can also pass a function to dynamically set the \", _jsx(_components.code, {\n        children: \"label\"\n      }), \" of your breadcrumb.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"// payload.config.ts\\nnestedDocsPlugin({\\n  //...\\n  generateLabel: (_, doc) => doc.title, // NOTE: 'title' is a hypothetical field\\n})\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The function takes two arguments and returns a string:\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Argument\"\n          }), _jsx(_components.th, {\n            children: \"Type\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"docs\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"Array\"\n            })\n          }), _jsx(_components.td, {\n            children: \"An array of the breadcrumbs up to that point\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"doc\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"Object\"\n            })\n          }), _jsx(_components.td, {\n            children: \"The current document being edited\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: _jsx(_components.code, {\n        children: \"generateURL\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"A function that allows you to dynamically generate each breadcrumb \", _jsx(_components.code, {\n        children: \"url\"\n      }), \". Each \", _jsx(_components.code, {\n        children: \"breadcrumb\"\n      }), \" has an optional \", _jsx(_components.code, {\n        children: \"url\"\n      }), \" field\\nwhich is undefined by default. For example, you might want to format a full URL to contain all breadcrumbs up to\\nthat point, like \", _jsx(_components.code, {\n        children: \"/about-us/company/our-team\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"// payload.config.ts\\nnestedDocsPlugin({\\n  //...\\n  generateURL: (docs) => docs.reduce((url, doc) => `${url}/${doc.slug}`, ''), // NOTE: 'slug' is a hypothetical field\\n})\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Argument\"\n          }), _jsx(_components.th, {\n            children: \"Type\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"docs\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"Array\"\n            })\n          }), _jsx(_components.td, {\n            children: \"An array of the breadcrumbs up to that point\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"doc\"\n            })\n          }), _jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"Object\"\n            })\n          }), _jsx(_components.td, {\n            children: \"The current document being edited\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: _jsx(_components.code, {\n        children: \"parentFieldSlug\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When defined, the \", _jsx(_components.code, {\n        children: \"parent\"\n      }), \" field will not be provided for you automatically, and instead, expects you to add your\\nown \", _jsx(_components.code, {\n        children: \"parent\"\n      }), \" field to each collection manually. This gives you complete control over where you put the field in your\\nadmin dashboard, etc. Set this property to the \", _jsx(_components.code, {\n        children: \"name\"\n      }), \" of your custom field.\"]\n    }), \"\\n\", _jsx(_components.h4, {\n      children: _jsx(_components.code, {\n        children: \"breadcrumbsFieldSlug\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When defined, the \", _jsx(_components.code, {\n        children: \"breadcrumbs\"\n      }), \" field will not be provided for you, and instead, expects you to add your\\nown \", _jsx(_components.code, {\n        children: \"breadcrumbs\"\n      }), \" field to each collection manually. Set this property to the \", _jsx(_components.code, {\n        children: \"name\"\n      }), \" of your custom field.\"]\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"info\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"If you opt out of automatically being provided a \", _jsx(_components.code, {\n          children: \"parent\"\n        }), \" or \", _jsx(_components.code, {\n          children: \"breadcrumbs\"\n        }), \" field, you need to make\\nsure that both fields are placed at the top-level of your document. They cannot exist within any\\nnested data structures like a \", _jsx(_components.code, {\n          children: \"group\"\n        }), \", \", _jsx(_components.code, {\n          children: \"array\"\n        }), \", or \", _jsx(_components.code, {\n          children: \"blocks\"\n        }), \".\"]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Overrides\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can also extend the built-in \", _jsx(_components.code, {\n        children: \"parent\"\n      }), \" and \", _jsx(_components.code, {\n        children: \"breadcrumbs\"\n      }), \" fields per collection by using the \", _jsx(_components.code, {\n        children: \"createParentField\"\n      }), \"\\nand \", _jsx(_components.code, {\n        children: \"createBreadcrumbField\"\n      }), \" methods. They will merge your customizations overtop the plugin's base field configurations.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\nimport { createParentField } from '@payloadcms/plugin-nested-docs/fields'\\nimport { createBreadcrumbsField } from '@payloadcms/plugin-nested-docs/fields'\\n\\nconst examplePageConfig: CollectionConfig = {\\n  slug: 'pages',\\n  fields: [\\n    createParentField(\\n      // First argument is equal to the slug of the collection\\n      // that the field references\\n      'pages',\\n\\n      // Second argument is equal to field overrides that you specify,\\n      // which will be merged into the base parent field config\\n      {\\n        admin: {\\n          position: 'sidebar',\\n        },\\n        // Note: if you override the `filterOptions` of the `parent` field,\\n        // be sure to continue to prevent the document from referencing itself as the parent like this:\\n        // filterOptions: ({ id }) => ({ id: {not_equals: id }})\\n      },\\n    ),\\n    createBreadcrumbsField(\\n      // First argument is equal to the slug of the collection\\n      // that the field references\\n      'pages',\\n\\n      // Argument equal to field overrides that you specify,\\n      // which will be merged into the base `breadcrumbs` field config\\n      {\\n        label: 'Page Breadcrumbs',\\n      },\\n    ),\\n  ],\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(Banner, {\n      type: \"warning\",\n      children: [_jsx(_components.p, {\n        children: _jsx(_components.strong, {\n          children: \"Note:\"\n        })\n      }), _jsxs(_components.p, {\n        children: [\"If overriding the \", _jsx(_components.code, {\n          children: \"name\"\n        }), \" of either \", _jsx(_components.code, {\n          children: \"breadcrumbs\"\n        }), \" or \", _jsx(_components.code, {\n          children: \"parent\"\n        }), \" fields, you must specify the\\n\", _jsx(_components.code, {\n          children: \"breadcrumbsFieldSlug\"\n        }), \" or \", _jsx(_components.code, {\n          children: \"parentFieldSlug\"\n        }), \" respectively.\"]\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Localization\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This plugin supports localization by default. If the \", _jsx(_components.code, {\n        children: \"localization\"\n      }), \" property is set in your Payload Config,\\nthe \", _jsx(_components.code, {\n        children: \"breadcrumbs\"\n      }), \" field is automatically localized. For more details on how localization works in Payload, see\\nthe \", _jsx(_components.a, {\n        href: \"https://payloadcms.com/docs/configuration/localization\",\n        children: \"Localization\"\n      }), \" docs.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"TypeScript\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"All types can be directly imported:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import {\\n  PluginConfig,\\n  GenerateURL,\\n  GenerateLabel,\\n} from '@payloadcms/plugin-nested-docs/types'\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Examples\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.a, {\n        href: \"https://github.com/payloadcms/payload/tree/main/templates\",\n        children: \"Templates Directory\"\n      }), \" also contains an official \", _jsx(_components.a, {\n        href: \"https://github.com/payloadcms/payload/tree/main/templates/website\",\n        children: \"Website Template\"\n      }), \" and \", _jsx(_components.a, {\n        href: \"https://github.com/payloadcms/payload/tree/main/templates/ecommerce\",\n        children: \"E-commerce Template\"\n      }), \", both of which use this plugin.\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true}