{"pageProps":{"frontMatter":{"title":"Depth","label":"Depth","order":30,"desc":"Payload depth determines how many levels down related documents should be automatically populated when retrieved.","keywords":"query, documents, pagination, documentation, Content Management System, cms, headless, javascript, node, react, nextjs"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    code: \"code\",\n    pre: \"pre\",\n    strong: \"strong\",\n    h2: \"h2\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Documents in Payload can have relationships to other Documents. This is true for both \", _jsx(_components.a, {\n        href: \"../configuration/collections\",\n        children: \"Collections\"\n      }), \" as well as \", _jsx(_components.a, {\n        href: \"../configuration/globals\",\n        children: \"Globals\"\n      }), \". When you query a Document, you can specify the depth at which to populate any of its related Documents either as full objects, or only their IDs.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Depth will optimize the performance of your application by limiting the amount of processing made in the database and significantly reducing the amount of data returned. Since Documents can be infinitely nested or recursively related, it's important to be able to control how deep your API populates.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For example, when you specify a \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" of \", _jsx(_components.code, {\n        children: \"0\"\n      }), \", the API response might look like this:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  \\\"id\\\": \\\"5ae8f9bde69e394e717c8832\\\",\\n  \\\"title\\\": \\\"This is a great post\\\",\\n  \\\"author\\\": \\\"5f7dd05cd50d4005f8bcab17\\\"\\n}\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"But with a \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" of \", _jsx(_components.code, {\n        children: \"1\"\n      }), \", the response might look like this:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n  \\\"id\\\": \\\"5ae8f9bde69e394e717c8832\\\",\\n  \\\"title\\\": \\\"This is a great post\\\",\\n  \\\"author\\\": {\\n    \\\"id\\\": \\\"5f7dd05cd50d4005f8bcab17\\\",\\n    \\\"name\\\": \\\"John Doe\\\"\\n  }\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"warning\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Important:\"\n        }), \" Depth has no effect in the \", _jsx(_components.a, {\n          href: \"../graphql/overview\",\n          children: \"GraphQL API\"\n        }), \",\\nbecause there, depth is based on the shape of your queries.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Local API\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To specify depth in the \", _jsx(_components.a, {\n        href: \"../local-api/overview\",\n        children: \"Local API\"\n      }), \", you can use the \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" option in your query:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { Payload } from 'payload'\\n\\nconst getPosts = async (payload: Payload) => {\\n  const posts = await payload.find({\\n    collection: 'posts',\\n    depth: 2, // highlight-line\\n  })\\n\\n  return posts\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Reminder:\"\n        }), \" This is the same for \", _jsx(_components.a, {\n          href: \"../configuration/globals\",\n          children: \"Globals\"\n        }), \" using\\nthe \", _jsx(_components.code, {\n          children: \"findGlobal\"\n        }), \" operation.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"REST API\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To specify depth in the \", _jsx(_components.a, {\n        href: \"../rest-api/overview\",\n        children: \"REST API\"\n      }), \", you can use the \", _jsx(_components.code, {\n        children: \"depth\"\n      }), \" parameter in your query:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"fetch('https://localhost:3000/api/posts?depth=2') // highlight-line\\n  .then((res) => res.json())\\n  .then((data) => console.log(data))\\n\"\n      })\n    }), \"\\n\", _jsx(Banner, {\n      type: \"info\",\n      children: _jsxs(_components.p, {\n        children: [_jsx(_components.strong, {\n          children: \"Reminder:\"\n        }), \" This is the same for \", _jsx(_components.a, {\n          href: \"../configuration/globals\",\n          children: \"Globals\"\n        }), \" using\\nthe \", _jsx(_components.code, {\n          children: \"/api/globals\"\n        }), \" endpoint.\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Max Depth\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Fields like the \", _jsx(_components.a, {\n        href: \"../fields/relationship\",\n        children: \"Relationship Field\"\n      }), \" or the \", _jsx(_components.a, {\n        href: \"../fields/upload\",\n        children: \"Upload Field\"\n      }), \" can also set a maximum depth. If exceeded, this will limit the population depth regardless of what the depth might be on the request.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To set a max depth for a field, use the \", _jsx(_components.code, {\n        children: \"maxDepth\"\n      }), \" property in your field configuration:\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-js\",\n        children: \"{\\n  slug: 'posts',\\n  fields: [\\n    {\\n      name: 'author',\\n      type: 'relationship',\\n      relationTo: 'users',\\n      maxDepth: 2, // highlight-line\\n    }\\n  ]\\n}\\n\"\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true}