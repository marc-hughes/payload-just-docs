{"pageProps":{"frontMatter":{"title":"Autosave","label":"Autosave","order":30,"desc":"Using Payload's Draft functionality, you can configure your collections and globals to autosave changes as drafts, and publish only you're ready.","keywords":"version history, revisions, audit log, draft, publish, autosave, Content Management System, cms, headless, javascript, node, react, nextjss"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    img: \"img\",\n    em: \"em\",\n    h2: \"h2\",\n    code: \"code\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    strong: \"strong\",\n    pre: \"pre\",\n    h3: \"h3\"\n  }, _provideComponents(), props.components), {Banner} = _components;\n  if (!Banner) _missingMdxReference(\"Banner\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Extending on Payload's \", _jsx(_components.a, {\n        href: \"/docs/versions/drafts\",\n        children: \"Draft\"\n      }), \" functionality, you can configure your collections and globals to autosave changes as drafts, and publish only you're ready. The Admin UI will automatically adapt to autosaving progress at an interval that you define, and will store all autosaved changes as a new Draft version. Never lose your work - and publish changes to the live document only when you're ready.\"]\n    }), \"\\n\", _jsx(Banner, {\n      type: \"warning\",\n      children: _jsx(_components.p, {\n        children: \"Autosave relies on Versions and Drafts being enabled in order to function.\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.img, {\n        src: \"/images/docs/autosave-enabled.png\",\n        alt: \"Autosave Enabled\"\n      }), \"\\n\", _jsx(_components.em, {\n        children: \"If Autosave is enabled, drafts will be created automatically as the document is modified and the Admin UI adds an indicator describing when the document was last saved to the top right of the sidebar.\"\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Options\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Collections and Globals both support the same options for configuring autosave. You can either set \", _jsx(_components.code, {\n        children: \"versions.drafts.autosave\"\n      }), \" to \", _jsx(_components.code, {\n        children: \"true\"\n      }), \", or pass an object to configure autosave properties.\"]\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"Drafts Autosave Options\"\n          }), _jsx(_components.th, {\n            children: \"Description\"\n          })]\n        })\n      }), _jsx(_components.tbody, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: _jsx(_components.code, {\n              children: \"interval\"\n            })\n          }), _jsxs(_components.td, {\n            children: [\"Define an \", _jsx(_components.code, {\n              children: \"interval\"\n            }), \" in milliseconds to automatically save progress while documents are edited. Document updates are \\\"debounced\\\" at this interval. Defaults to \", _jsx(_components.code, {\n              children: \"800\"\n            }), \".\"]\n          })]\n        })\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"Example config with versions, drafts, and autosave enabled:\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-ts\",\n        children: \"import type { CollectionConfig } from 'payload'\\n\\nexport const Pages: CollectionConfig = {\\n  slug: 'pages',\\n  access: {\\n    read: ({ req }) => {\\n      // If there is a user logged in,\\n      // let them retrieve all documents\\n      if (req.user) return true\\n\\n      // If there is no user,\\n      // restrict the documents that are returned\\n      // to only those where `_status` is equal to `published`\\n      return {\\n        _status: {\\n          equals: 'published',\\n        },\\n      }\\n    },\\n  },\\n  versions: {\\n    drafts: {\\n      autosave: true,\\n\\n      // Alternatively, you can specify an `interval`:\\n      // autosave: {\\n      //   interval: 1500,\\n      // },\\n    },\\n  },\\n  //.. the rest of the Pages config here\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Autosave API\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When \", _jsx(_components.code, {\n        children: \"autosave\"\n      }), \" is enabled, all \", _jsx(_components.code, {\n        children: \"update\"\n      }), \" operations within Payload expose a new argument called \", _jsx(_components.code, {\n        children: \"autosave\"\n      }), \". When set to \", _jsx(_components.code, {\n        children: \"true\"\n      }), \", Payload will treat the incoming draft update as an \", _jsx(_components.code, {\n        children: \"autosave\"\n      }), \". This is primarily used by the Admin UI, but there may be some cases where you are building an app for your users and wish to implement \", _jsx(_components.code, {\n        children: \"autosave\"\n      }), \" in your own app. To do so, use the \", _jsx(_components.code, {\n        children: \"autosave\"\n      }), \" argument in your \", _jsx(_components.code, {\n        children: \"update\"\n      }), \" operations.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"How autosaves are stored\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If we created a new version for each autosave, you'd quickly find a ton of autosaves that clutter up your \", _jsx(_components.code, {\n        children: \"_versions\"\n      }), \" collection within the database. That would be messy quick because \", _jsx(_components.code, {\n        children: \"autosave\"\n      }), \" is typically set to save a document at ~800ms intervals.\"]\n    }), \"\\n\", _jsx(Banner, {\n      type: \"success\",\n      children: _jsxs(_components.p, {\n        children: [\"Instead of creating a new version each time a document is autosaved, Payload\\nsmartly only creates \", _jsx(_components.strong, {\n          children: \"one\"\n        }), \" autosave version, and then updates that specific\\nversion with each autosave performed. This makes sure that your versions\\nremain nice and tidy.\"]\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true}